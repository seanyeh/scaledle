{"mappings":"C,A,kC;A,uC;A,E;A,2D;A,E;A,4D;A,wD;A,S,C,C,C,C,C,C,C,C,C,E,2B,E,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,A,Y,O,C,C,E,E,C,C,E,C,E,E,K,E,C,E,E,A,a,O,Q,A,Y,O,O,O,E,O,O,C,I,C,Q,S,E,C,C,C,E,G,C,C,C,E,C,C,G,C,C,C,E,C,C,0D;A,+D;A,8B;A,I,E,A,Y,O,C,C,E,E,C,C,E,C,G,C,G,E,O,E,E,C,E,gE;A,6D;A,+D;A,gC;A,G,E,O,E,E,C,E,+C;A,G,G,A,U,O,E,O,E,G,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,O,C,S,C,E,I,E,C,C,E,C,E,C,E,C,O,A,M,E,E,C,E,E,K,C,C,E,I,E,C,C,E,C,I,E,M,C,G,C,C,E,C,E,C,I,C,E,O,C,E,E,E,O,C,I,C,C,O,C,C,E,C,O,C,S,E,C,E,I,E,E,O,C,G,M,A,C,I,E,C,E,E,E,C,C,E,e,C,C,E,E,M,C,S,C,E,I,C,E,C,E,I,C,M,C,E,I,C,O,C,C,C,E,E,O,C,E,E,K,C,E,E,M,C,E,E,Q,C,S,C,C,C,E,C,C,E,C,C,S,C,C,C,E,E,O,C,C,E,C,E,A,E,O,c,C,E,O,C,I,W,O,C,C,E,A,C,G,C,C,E,C,E,I,I,E,E,E,E,M,C,I,E,C,C,E,E,G,E,C,qD;A,yE;A,I,E,E,E,Y;A,U,O,S,A,a,O,O,O,O,C,E,A,Y,O,Q,O,G,C,O,W,O,C,G,G,C,I,C,E,C,C,C,C,E,C,M,C,S,C,C,C,C,C,E,I,E,E,kDCAA,EAAA,EAAA,W,E,E,c,C,GACA,EAAA,EAAA,yB,E,E,c,C,GAGA,AADA,oDAAoD;AACpD,CAAA,EAAA,EAAA,OAAC,AAAD,EAAE,KAAK,CAAC,SAAS,IAAI,CAAE,IAAK,CAC1B,IAAK,EAAA,OAAO,AACd,E,E,C,Q,Q,wB,Q,iD,O,E,C,Q,C,S,C,C,C,C,C,ECJA,IAAI,EAAc,EAAQ,oBACtB,EAAU,EAAQ,oBAClB,EAAc,EAAQ,oBAEtB,EAAI,WAAe,OAAO,EAAY,KAAK,CAAC,IAAI,CAAE,UAAW,CACjE,CAAA,EAAE,CAAC,CAAG,EACN,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AG,CAAC,AAAC,GAAM,EAAK,SAAS,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI;AAAE,CAAC,EACpD,IAAI,CAAC,IAER,MAAO,CAAC,WAAW,EAAE,EAAa,CAAC,EAAE,EAAM;AAAI,EAAE,EAAW;AAAE,EAAE,EAAK,GAAG,CAAC,CAAC,AAC5E,CAEA,OAAO,mBAAmB,CAAS,CAAE,CACnC,0BAA0B;AAC1B,IAAI,EAAU,EAAU,OAAO,CAAC,QAAS,IAUzC,OAPI,EAAQ,QAAQ,CAAC,yBACnB,EAAU,EAAQ,OAAO,CAAC,wBAAyB,0BAE5C,EAAQ,QAAQ,CAAC,eACxB,CAAA,EAAU,EAAQ,OAAO,CAAC,aAAc,yBADrC,EAIE,CACT,CACF,CAjIqB,EAAA,OAAA,CAAA,C,E,C,M,Q,iD,O,E,C,M,C,S,C,C,C,C,C,E,W;A,I,E,E,kD,E,iB,C,G,E,M,C,E,c,I,E,O,E,E,M,C,E,Q,I,G,E,M,C,E,Q,I,E,O,E,E,M,C,E,kB,I,G,E,M,C,E,Y,I,E,O,E,E,M,C,E,a,I,E,O,E,E,M,C,E,O,I,G,E,M,C,E,gB,I,E,O,E,E,M,C,E,W,I,E,O,E,E,M,C,E,M,I,E,O,E,E,M,C,E,O,I,E,O,E,E,M,C,E,O,I,E,O,E,E,M,C,E,O,I,E,O,E,E,M,C,E,Q,I,G,E,M,C,E,Q,I,E,O,E,E,M,C,E,c,I,E,O,E,E,M,C,E,Q,I,E,O,E,E,M,C,E,e,I,E,O,E,E,M,C,E,Q,I,E,O,E,E,M,C,E,kB,I,G,E,M,C,E,Y,I,E,O,E,E,M,C,E,gB,I,E,O,E,E,M,C,E,Q,I,GEFrB,IAAA,EAAA,EAAA,yB,E,E,c,C,GACA,EAAA,EAAA,kBACA,EAAA,EAAA,kB,E,E,c,C,GACA,EAAA,EAAA,uB,E,E,c,C,GACA,EAAA,EAAA,uB,E,E,c,C,GACA,EAAA,EAAA,iBACA,EAAA,EAAA,2B,E,E,c,C,GACA,EAAA,EAAA,qB,E,E,c,C,GACA,EAAA,EAAA,gB,E,E,c,C,GACA,EAAA,EAAA,iB,E,E,c,C,GACA,EAAA,EAAA,iB,E,E,c,C,GACA,EAAA,EAAA,iB,E,E,c,C,GACA,EAAA,EAAA,kB,E,E,c,C,GACA,EA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,QAAA,AAAA,EAAS,IAEhC,IACT,CAEA,IAAO,EAAQ,CAAE,SAAA,EAAU,2BAAA,EAA4B,SAAA,CAAS,C,E,C,gB,Q,gB,Q,yB,Q,iD,O,E,C,Q,C,S,C,C,C,C,C,E,W;A,I,E,E,kD,E,iB,C,G,E,M,C,E,c,I,G,E,M,C,E,Y,I,G,E,M,C,E,S,I,G,E,M,C,E,U,I,G,E,M,C,E,a,I,G,E,M,C,E,a,I,G,E,M,C,E,O,I,G,E,M,C,E,W,I,G,E,M,C,E,iB,I,G,E,M,C,E,W,I,G,E,M,C,E,iB,I,G,E,M,C,E,M,I,G,E,M,C,E,O,I,G,E,M,C,E,O,I,G,E,M,C,E,Q,I,G,E,M,C,E,S,I,G,E,M,C,E,a,I,G,E,M,C,E,W,I,G,E,M,C,E,c,I,G,E,M,C,E,kB,I,G,E,M,C,E,K,I,G,E,M,C,E,O,I,G,E,M,C,E,W,I,G,E,M,C,E,S,I,G,E,M,C,E,Y,I,G,E,M,C,E,c,I,G,E,M,C,E,kB,I,G,E,M,C,E,gB,I,G,E,M,C,E,mB,I,GE7NhE,IAAA,EAAA,EAAA,iBAUA,EAAA,EAAA,iBAEM,EAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAA7C,CAEM,EAAS,AAAC,GAAa,EAAE,IAA/B,CACM,EAAY,AAAC,GACjB,EAAM,GAAA,CAAI,EAAA,IAAK,EAAE,MAAA,CAAO,AAAC,GAAM,CAAC,EAAE,KAAK,EAQlC,SAAS,EAAM,CAAA,SACpB,AAAI,AAAU,KAAA,IAAV,EACK,EAAM,KAAA,GACH,MAAM,OAAA,CAAQ,GAGjB,EAAU,GAAO,GAAA,CAAI,GAFrB,EAAP,AAIJ,CASO,IAAM,EAAM,EAAA,IAAZ,CAMM,EAAO,AAAC,GAAsB,EAAI,GAAM,IAA9C,CAMM,EAAa,AAAC,GAAsB,EAAI,GAAM,EAApD,CAMM,EAAc,AAAC,GAAsB,EAAI,GAAM,GAArD,CAMM,EAAS,AAAC,GAAsB,EAAI,GAAM,GAAhD,CAMM,EAAO,AAAC,GAAsB,EAAI,GAAM,IAA9C,CAMM,EAAO,AAAC,GAAsB,EAAI,GAAM,IAA9C,CAMM,EAAS,AAAC,GAAsB,EAAI,GAAM,MAAhD,CAYA,SAAS,EAAS9U,CAAAA,EAC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","sources":["<anon>","src/App.ts","node_modules/mithril/index.js","node_modules/mithril/hyperscript.js","node_modules/mithril/render/hyperscript.js","node_modules/mithril/render/vnode.js","node_modules/mithril/render/hyperscriptVnode.js","node_modules/mithril/util/hasOwn.js","node_modules/mithril/render/trust.js","node_modules/mithril/render/fragment.js","node_modules/mithril/request.js","node_modules/mithril/promise/promise.js","node_modules/mithril/promise/polyfill.js","node_modules/mithril/mount-redraw.js","node_modules/mithril/render.js","node_modules/mithril/render/render.js","node_modules/mithril/api/mount-redraw.js","node_modules/mithril/request/request.js","node_modules/mithril/pathname/build.js","node_modules/mithril/querystring/build.js","node_modules/mithril/util/assign.js","node_modules/mithril/route.js","node_modules/mithril/api/router.js","node_modules/mithril/pathname/parse.js","node_modules/mithril/querystring/parse.js","node_modules/mithril/pathname/compileTemplate.js","node_modules/mithril/util/censor.js","src/components/MainPage.ts","src/components/ControlButtons.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/components/Modal.ts","src/components/Keyboard.ts","src/Util.ts","node_modules/tonal/dist/index.mjs","node_modules/tonal/index.ts","node_modules/@tonaljs/abc-notation/dist/index.mjs","node_modules/@tonaljs/abc-notation/index.ts","node_modules/@tonaljs/core/dist/index.mjs","node_modules/@tonaljs/core/src/utils.ts","node_modules/@tonaljs/core/src/named.ts","node_modules/@tonaljs/core/src/pitch.ts","node_modules/@tonaljs/core/src/note.ts","node_modules/@tonaljs/core/src/interval.ts","node_modules/@tonaljs/core/src/distance.ts","node_modules/@tonaljs/array/dist/index.mjs","node_modules/@tonaljs/array/index.ts","node_modules/@tonaljs/chord/dist/index.mjs","node_modules/@tonaljs/chord/index.ts","node_modules/@tonaljs/chord-detect/dist/index.mjs","node_modules/@tonaljs/chord-detect/index.ts","node_modules/@tonaljs/chord-type/dist/index.mjs","node_modules/@tonaljs/chord-type/index.ts","node_modules/@tonaljs/chord-type/data.ts","node_modules/@tonaljs/pcset/dist/index.mjs","node_modules/@tonaljs/pcset/index.ts","node_modules/@tonaljs/collection/dist/index.mjs","node_modules/@tonaljs/collection/index.ts","node_modules/@tonaljs/scale-type/dist/index.mjs","node_modules/@tonaljs/scale-type/index.ts","node_modules/@tonaljs/scale-type/data.ts","node_modules/@tonaljs/duration-value/dist/index.mjs","node_modules/@tonaljs/duration-value/data.ts","node_modules/@tonaljs/duration-value/index.ts","node_modules/@tonaljs/interval/dist/index.mjs","node_modules/@tonaljs/interval/index.ts","node_modules/@tonaljs/key/dist/index.mjs","node_modules/@tonaljs/key/index.ts","node_modules/@tonaljs/note/dist/index.mjs","node_modules/@tonaljs/note/index.ts","node_modules/@tonaljs/midi/dist/index.mjs","node_modules/@tonaljs/midi/index.ts","node_modules/@tonaljs/roman-numeral/dist/index.mjs","node_modules/@tonaljs/roman-numeral/index.ts","node_modules/@tonaljs/mode/dist/index.mjs","node_modules/@tonaljs/mode/index.ts","node_modules/@tonaljs/progression/dist/index.mjs","node_modules/@tonaljs/progression/index.ts","node_modules/@tonaljs/range/dist/index.mjs","node_modules/@tonaljs/range/index.ts","node_modules/@tonaljs/scale/dist/index.mjs","node_modules/@tonaljs/scale/index.ts","node_modules/@tonaljs/time-signature/dist/index.mjs","node_modules/@tonaljs/time-signature/index.ts","src/components/Row.ts","src/components/GameEndContent.ts","src/components/HelpContent.ts"],"sourcesContent":["// modules are defined as an array\n// [ module function, map of requires ]\n//\n// map of requires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the require for previous bundles\n\n(function (modules, entry, mainEntry, parcelRequireName, globalName) {\n  /* eslint-disable no-undef */\n  var globalObject =\n    typeof globalThis !== 'undefined'\n      ? globalThis\n      : typeof self !== 'undefined'\n      ? self\n      : typeof window !== 'undefined'\n      ? window\n      : typeof global !== 'undefined'\n      ? global\n      : {};\n  /* eslint-enable no-undef */\n\n  // Save the require from previous bundle to this closure if any\n  var previousRequire =\n    typeof globalObject[parcelRequireName] === 'function' &&\n    globalObject[parcelRequireName];\n\n  var cache = previousRequire.cache || {};\n  // Do not use `require` to prevent Webpack from trying to bundle this call\n  var nodeRequire =\n    typeof module !== 'undefined' &&\n    typeof module.require === 'function' &&\n    module.require.bind(module);\n\n  function newRequire(name, jumped) {\n    if (!cache[name]) {\n      if (!modules[name]) {\n        // if we cannot find the module within our internal map or\n        // cache jump to the current global require ie. the last bundle\n        // that was added to the page.\n        var currentRequire =\n          typeof globalObject[parcelRequireName] === 'function' &&\n          globalObject[parcelRequireName];\n        if (!jumped && currentRequire) {\n          return currentRequire(name, true);\n        }\n\n        // If there are other bundles on this page the require from the\n        // previous one is saved to 'previousRequire'. Repeat this as\n        // many times as there are bundles until the module is found or\n        // we exhaust the require chain.\n        if (previousRequire) {\n          return previousRequire(name, true);\n        }\n\n        // Try the node require function if it exists.\n        if (nodeRequire && typeof name === 'string') {\n          return nodeRequire(name);\n        }\n\n        var err = new Error(\"Cannot find module '\" + name + \"'\");\n        err.code = 'MODULE_NOT_FOUND';\n        throw err;\n      }\n\n      localRequire.resolve = resolve;\n      localRequire.cache = {};\n\n      var module = (cache[name] = new newRequire.Module(name));\n\n      modules[name][0].call(\n        module.exports,\n        localRequire,\n        module,\n        module.exports,\n        this\n      );\n    }\n\n    return cache[name].exports;\n\n    function localRequire(x) {\n      var res = localRequire.resolve(x);\n      return res === false ? {} : newRequire(res);\n    }\n\n    function resolve(x) {\n      var id = modules[name][1][x];\n      return id != null ? id : x;\n    }\n  }\n\n  function Module(moduleName) {\n    this.id = moduleName;\n    this.bundle = newRequire;\n    this.exports = {};\n  }\n\n  newRequire.isParcelRequire = true;\n  newRequire.Module = Module;\n  newRequire.modules = modules;\n  newRequire.cache = cache;\n  newRequire.parent = previousRequire;\n  newRequire.register = function (id, exports) {\n    modules[id] = [\n      function (require, module) {\n        module.exports = exports;\n      },\n      {},\n    ];\n  };\n\n  Object.defineProperty(newRequire, 'root', {\n    get: function () {\n      return globalObject[parcelRequireName];\n    },\n  });\n\n  globalObject[parcelRequireName] = newRequire;\n\n  for (var i = 0; i < entry.length; i++) {\n    newRequire(entry[i]);\n  }\n\n  if (mainEntry) {\n    // Expose entry point to Node, AMD or browser globals\n    // Based on https://github.com/ForbesLindesay/umd/blob/master/template.js\n    var mainExports = newRequire(mainEntry);\n\n    // CommonJS\n    if (typeof exports === 'object' && typeof module !== 'undefined') {\n      module.exports = mainExports;\n\n      // RequireJS\n    } else if (typeof define === 'function' && define.amd) {\n      define(function () {\n        return mainExports;\n      });\n\n      // <script>\n    } else if (globalName) {\n      this[globalName] = mainExports;\n    }\n  }\n})({\"bn6ru\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nvar _mainPage = require(\"./components/MainPage\");\nvar _mainPageDefault = parcelHelpers.interopDefault(_mainPage);\n// Set up routing by connecting components to routes\n(0, _mithrilDefault.default).route(document.body, \"/\", {\n    \"/\": (0, _mainPageDefault.default)\n});\n\n},{\"mithril\":\"13PaA\",\"./components/MainPage\":\"fepoz\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"13PaA\":[function(require,module,exports) {\n\"use strict\";\nvar hyperscript = require(\"93549bebb559a185\");\nvar request = require(\"ffc931a12fb92780\");\nvar mountRedraw = require(\"3c155dd1af211f5d\");\nvar m = function m() {\n    return hyperscript.apply(this, arguments);\n};\nm.m = hyperscript;\nm.trust = hyperscript.trust;\nm.fragment = hyperscript.fragment;\nm.Fragment = \"[\";\nm.mount = mountRedraw.mount;\nm.route = require(\"1f0fc3bbca8278a1\");\nm.render = require(\"c1148290e36671bb\");\nm.redraw = mountRedraw.redraw;\nm.request = request.request;\nm.jsonp = request.jsonp;\nm.parseQueryString = require(\"b348d752473aa042\");\nm.buildQueryString = require(\"6fda30db2e0aba2d\");\nm.parsePathname = require(\"4410a62b9aac3465\");\nm.buildPathname = require(\"e25eb55f7e8253db\");\nm.vnode = require(\"4fa5caca81091144\");\nm.PromisePolyfill = require(\"1957dc4f39cb285f\");\nm.censor = require(\"d0598fefc1e3090e\");\nmodule.exports = m;\n\n},{\"93549bebb559a185\":\"dHWmr\",\"ffc931a12fb92780\":\"lsk1L\",\"3c155dd1af211f5d\":\"aBC6V\",\"1f0fc3bbca8278a1\":\"hiLSa\",\"c1148290e36671bb\":\"b64hn\",\"b348d752473aa042\":\"juUuV\",\"6fda30db2e0aba2d\":\"i28pn\",\"4410a62b9aac3465\":\"5bNaX\",\"e25eb55f7e8253db\":\"6Sp6O\",\"4fa5caca81091144\":\"3MB60\",\"1957dc4f39cb285f\":\"b2FhZ\",\"d0598fefc1e3090e\":\"a4I0S\"}],\"dHWmr\":[function(require,module,exports) {\n\"use strict\";\nvar hyperscript = require(\"f0f774058bea2afe\");\nhyperscript.trust = require(\"66380fad4f676f97\");\nhyperscript.fragment = require(\"249e7d359e55d495\");\nmodule.exports = hyperscript;\n\n},{\"f0f774058bea2afe\":\"5U6pe\",\"66380fad4f676f97\":\"cVuFq\",\"249e7d359e55d495\":\"f9Dy7\"}],\"5U6pe\":[function(require,module,exports) {\n\"use strict\";\nvar Vnode = require(\"67d1a8f028b8c23a\");\nvar hyperscriptVnode = require(\"310598f2e22371a7\");\nvar hasOwn = require(\"46da15ad2a627b49\");\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g;\nvar selectorCache = {};\nfunction isEmpty(object) {\n    for(var key in object)if (hasOwn.call(object, key)) return false;\n    return true;\n}\nfunction compileSelector(selector) {\n    var match, tag = \"div\", classes = [], attrs = {};\n    while(match = selectorParser.exec(selector)){\n        var type = match[1], value = match[2];\n        if (type === \"\" && value !== \"\") tag = value;\n        else if (type === \"#\") attrs.id = value;\n        else if (type === \".\") classes.push(value);\n        else if (match[3][0] === \"[\") {\n            var attrValue = match[6];\n            if (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\");\n            if (match[4] === \"class\") classes.push(attrValue);\n            else attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true;\n        }\n    }\n    if (classes.length > 0) attrs.className = classes.join(\" \");\n    return selectorCache[selector] = {\n        tag: tag,\n        attrs: attrs\n    };\n}\nfunction execSelector(state, vnode) {\n    var attrs = vnode.attrs;\n    var hasClass = hasOwn.call(attrs, \"class\");\n    var className = hasClass ? attrs.class : attrs.className;\n    vnode.tag = state.tag;\n    vnode.attrs = {};\n    if (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n        var newAttrs = {};\n        for(var key in attrs)if (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key];\n        attrs = newAttrs;\n    }\n    for(var key in state.attrs)if (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)) attrs[key] = state.attrs[key];\n    if (className != null || state.attrs.className != null) attrs.className = className != null ? state.attrs.className != null ? String(state.attrs.className) + \" \" + String(className) : className : state.attrs.className != null ? state.attrs.className : null;\n    if (hasClass) attrs.class = null;\n    for(var key in attrs)if (hasOwn.call(attrs, key) && key !== \"key\") {\n        vnode.attrs = attrs;\n        break;\n    }\n    return vnode;\n}\nfunction hyperscript(selector) {\n    if (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") throw Error(\"The selector must be either a string or a component.\");\n    var vnode = hyperscriptVnode.apply(1, arguments);\n    if (typeof selector === \"string\") {\n        vnode.children = Vnode.normalizeChildren(vnode.children);\n        if (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode);\n    }\n    vnode.tag = selector;\n    return vnode;\n}\nmodule.exports = hyperscript;\n\n},{\"67d1a8f028b8c23a\":\"3MB60\",\"310598f2e22371a7\":\"jteII\",\"46da15ad2a627b49\":\"1qiWM\"}],\"3MB60\":[function(require,module,exports) {\n\"use strict\";\nfunction Vnode(tag, key, attrs, children, text, dom) {\n    return {\n        tag: tag,\n        key: key,\n        attrs: attrs,\n        children: children,\n        text: text,\n        dom: dom,\n        domSize: undefined,\n        state: undefined,\n        events: undefined,\n        instance: undefined\n    };\n}\nVnode.normalize = function(node) {\n    if (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined);\n    if (node == null || typeof node === \"boolean\") return null;\n    if (typeof node === \"object\") return node;\n    return Vnode(\"#\", undefined, undefined, String(node), undefined, undefined);\n};\nVnode.normalizeChildren = function(input) {\n    var children = [];\n    if (input.length) {\n        var isKeyed = input[0] != null && input[0].key != null;\n        // Note: this is a *very* perf-sensitive check.\n        // Fun fact: merging the loop like this is somehow faster than splitting\n        // it, noticeably so.\n        for(var i = 1; i < input.length; i++){\n            if ((input[i] != null && input[i].key != null) !== isKeyed) throw new TypeError(isKeyed && (input[i] != null || typeof input[i] === \"boolean\") ? \"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.\" : \"In fragments, vnodes must either all have keys or none have keys.\");\n        }\n        for(var i = 0; i < input.length; i++)children[i] = Vnode.normalize(input[i]);\n    }\n    return children;\n};\nmodule.exports = Vnode;\n\n},{}],\"jteII\":[function(require,module,exports) {\n\"use strict\";\nvar Vnode = require(\"f1426f9dc42d73e\");\n// Call via `hyperscriptVnode.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript` and `fragment` factories and define this as\n// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril.js requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// module.exports = function(attrs, ...children) {\n//     if (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]\n//     } else {\n//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n//         attrs = undefined\n//     }\n//\n//     if (attrs == null) attrs = {}\n//     return Vnode(\"\", attrs.key, attrs, children)\n// }\nmodule.exports = function() {\n    var attrs = arguments[this], start = this + 1, children;\n    if (attrs == null) attrs = {};\n    else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n        attrs = {};\n        start = this;\n    }\n    if (arguments.length === start + 1) {\n        children = arguments[start];\n        if (!Array.isArray(children)) children = [\n            children\n        ];\n    } else {\n        children = [];\n        while(start < arguments.length)children.push(arguments[start++]);\n    }\n    return Vnode(\"\", attrs.key, attrs, children);\n};\n\n},{\"f1426f9dc42d73e\":\"3MB60\"}],\"1qiWM\":[function(require,module,exports) {\n// This exists so I'm only saving it once.\n\"use strict\";\nmodule.exports = ({}).hasOwnProperty;\n\n},{}],\"cVuFq\":[function(require,module,exports) {\n\"use strict\";\nvar Vnode = require(\"d026f8a7e33fcbb9\");\nmodule.exports = function(html) {\n    if (html == null) html = \"\";\n    return Vnode(\"<\", undefined, undefined, html, undefined, undefined);\n};\n\n},{\"d026f8a7e33fcbb9\":\"3MB60\"}],\"f9Dy7\":[function(require,module,exports) {\n\"use strict\";\nvar Vnode = require(\"50a8ddcebd144f63\");\nvar hyperscriptVnode = require(\"39de75837a549ccc\");\nmodule.exports = function() {\n    var vnode = hyperscriptVnode.apply(0, arguments);\n    vnode.tag = \"[\";\n    vnode.children = Vnode.normalizeChildren(vnode.children);\n    return vnode;\n};\n\n},{\"50a8ddcebd144f63\":\"3MB60\",\"39de75837a549ccc\":\"jteII\"}],\"lsk1L\":[function(require,module,exports) {\n\"use strict\";\nvar PromisePolyfill = require(\"a9d8fbae64b1b7e8\");\nvar mountRedraw = require(\"64666c357cfd1bd3\");\nmodule.exports = require(\"20cfea52190c88b7\")(typeof window !== \"undefined\" ? window : null, PromisePolyfill, mountRedraw.redraw);\n\n},{\"a9d8fbae64b1b7e8\":\"9Z5xX\",\"64666c357cfd1bd3\":\"aBC6V\",\"20cfea52190c88b7\":\"dWcdG\"}],\"9Z5xX\":[function(require,module,exports) {\n/* global window */ var global = arguments[3];\n\"use strict\";\nvar PromisePolyfill = require(\"5a96f0df8de3693c\");\nif (typeof window !== \"undefined\") {\n    if (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill;\n    else if (!window.Promise.prototype.finally) window.Promise.prototype.finally = PromisePolyfill.prototype.finally;\n    module.exports = window.Promise;\n} else if (typeof global !== \"undefined\") {\n    if (typeof global.Promise === \"undefined\") global.Promise = PromisePolyfill;\n    else if (!global.Promise.prototype.finally) global.Promise.prototype.finally = PromisePolyfill.prototype.finally;\n    module.exports = global.Promise;\n} else module.exports = PromisePolyfill;\n\n},{\"5a96f0df8de3693c\":\"b2FhZ\"}],\"b2FhZ\":[function(require,module,exports) {\n\"use strict\";\n/** @constructor */ var PromisePolyfill = function(executor) {\n    if (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with 'new'.\");\n    if (typeof executor !== \"function\") throw new TypeError(\"executor must be a function.\");\n    var self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false);\n    var instance = self._instance = {\n        resolvers: resolvers,\n        rejectors: rejectors\n    };\n    var callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout;\n    function handler(list, shouldAbsorb) {\n        return function execute(value) {\n            var then;\n            try {\n                if (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n                    if (value === self) throw new TypeError(\"Promise can't be resolved with itself.\");\n                    executeOnce(then.bind(value));\n                } else callAsync(function() {\n                    if (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value);\n                    for(var i = 0; i < list.length; i++)list[i](value);\n                    resolvers.length = 0, rejectors.length = 0;\n                    instance.state = shouldAbsorb;\n                    instance.retry = function() {\n                        execute(value);\n                    };\n                });\n            } catch (e) {\n                rejectCurrent(e);\n            }\n        };\n    }\n    function executeOnce(then) {\n        var runs = 0;\n        function run(fn) {\n            return function(value) {\n                if (runs++ > 0) return;\n                fn(value);\n            };\n        }\n        var onerror = run(rejectCurrent);\n        try {\n            then(run(resolveCurrent), onerror);\n        } catch (e) {\n            onerror(e);\n        }\n    }\n    executeOnce(executor);\n};\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n    var self = this, instance = self._instance;\n    function handle(callback, list, next, state) {\n        list.push(function(value) {\n            if (typeof callback !== \"function\") next(value);\n            else try {\n                resolveNext(callback(value));\n            } catch (e) {\n                if (rejectNext) rejectNext(e);\n            }\n        });\n        if (typeof instance.retry === \"function\" && state === instance.state) instance.retry();\n    }\n    var resolveNext, rejectNext;\n    var promise = new PromisePolyfill(function(resolve, reject) {\n        resolveNext = resolve, rejectNext = reject;\n    });\n    handle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false);\n    return promise;\n};\nPromisePolyfill.prototype.catch = function(onRejection) {\n    return this.then(null, onRejection);\n};\nPromisePolyfill.prototype.finally = function(callback) {\n    return this.then(function(value) {\n        return PromisePolyfill.resolve(callback()).then(function() {\n            return value;\n        });\n    }, function(reason) {\n        return PromisePolyfill.resolve(callback()).then(function() {\n            return PromisePolyfill.reject(reason);\n        });\n    });\n};\nPromisePolyfill.resolve = function(value) {\n    if (value instanceof PromisePolyfill) return value;\n    return new PromisePolyfill(function(resolve) {\n        resolve(value);\n    });\n};\nPromisePolyfill.reject = function(value) {\n    return new PromisePolyfill(function(resolve, reject) {\n        reject(value);\n    });\n};\nPromisePolyfill.all = function(list) {\n    return new PromisePolyfill(function(resolve, reject) {\n        var total = list.length, count = 0, values = [];\n        if (list.length === 0) resolve([]);\n        else for(var i = 0; i < list.length; i++)(function(i) {\n            function consume(value) {\n                count++;\n                values[i] = value;\n                if (count === total) resolve(values);\n            }\n            if (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") list[i].then(consume, reject);\n            else consume(list[i]);\n        })(i);\n    });\n};\nPromisePolyfill.race = function(list) {\n    return new PromisePolyfill(function(resolve, reject) {\n        for(var i = 0; i < list.length; i++)list[i].then(resolve, reject);\n    });\n};\nmodule.exports = PromisePolyfill;\n\n},{}],\"aBC6V\":[function(require,module,exports) {\n\"use strict\";\nvar render = require(\"e9eb48dd8cedc516\");\nmodule.exports = require(\"856b9fa9d93f38f3\")(render, typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : null, typeof console !== \"undefined\" ? console : null);\n\n},{\"e9eb48dd8cedc516\":\"b64hn\",\"856b9fa9d93f38f3\":\"a3OiH\"}],\"b64hn\":[function(require,module,exports) {\n\"use strict\";\nmodule.exports = require(\"5ce98d5aeb50f0a6\")(typeof window !== \"undefined\" ? window : null);\n\n},{\"5ce98d5aeb50f0a6\":\"eygmT\"}],\"eygmT\":[function(require,module,exports) {\n\"use strict\";\nvar Vnode = require(\"8c1a3af9d274e105\");\nmodule.exports = function($window) {\n    var $doc = $window && $window.document;\n    var currentRedraw;\n    var nameSpace = {\n        svg: \"http://www.w3.org/2000/svg\",\n        math: \"http://www.w3.org/1998/Math/MathML\"\n    };\n    function getNameSpace(vnode) {\n        return vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag];\n    }\n    //sanity check to discourage people from doing `vnode.state = ...`\n    function checkState(vnode, original) {\n        if (vnode.state !== original) throw new Error(\"'vnode.state' must not be modified.\");\n    }\n    //Note: the hook is passed as the `this` argument to allow proxying the\n    //arguments without requiring a full array allocation to do so. It also\n    //takes advantage of the fact the current `vnode` is the first argument in\n    //all lifecycle methods.\n    function callHook(vnode) {\n        var original = vnode.state;\n        try {\n            return this.apply(original, arguments);\n        } finally{\n            checkState(vnode, original);\n        }\n    }\n    // IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n    // inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n    function activeElement() {\n        try {\n            return $doc.activeElement;\n        } catch (e) {\n            return null;\n        }\n    }\n    //create\n    function createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n        for(var i = start; i < end; i++){\n            var vnode = vnodes[i];\n            if (vnode != null) createNode(parent, vnode, hooks, ns, nextSibling);\n        }\n    }\n    function createNode(parent, vnode, hooks, ns, nextSibling) {\n        var tag = vnode.tag;\n        if (typeof tag === \"string\") {\n            vnode.state = {};\n            if (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks);\n            switch(tag){\n                case \"#\":\n                    createText(parent, vnode, nextSibling);\n                    break;\n                case \"<\":\n                    createHTML(parent, vnode, ns, nextSibling);\n                    break;\n                case \"[\":\n                    createFragment(parent, vnode, hooks, ns, nextSibling);\n                    break;\n                default:\n                    createElement(parent, vnode, hooks, ns, nextSibling);\n            }\n        } else createComponent(parent, vnode, hooks, ns, nextSibling);\n    }\n    function createText(parent, vnode, nextSibling) {\n        vnode.dom = $doc.createTextNode(vnode.children);\n        insertNode(parent, vnode.dom, nextSibling);\n    }\n    var possibleParents = {\n        caption: \"table\",\n        thead: \"table\",\n        tbody: \"table\",\n        tfoot: \"table\",\n        tr: \"tbody\",\n        th: \"tr\",\n        td: \"tr\",\n        colgroup: \"table\",\n        col: \"colgroup\"\n    };\n    function createHTML(parent, vnode, ns, nextSibling) {\n        var match = vnode.children.match(/^\\s*?<(\\w+)/im) || [];\n        // not using the proper parent makes the child element(s) vanish.\n        //     var div = document.createElement(\"div\")\n        //     div.innerHTML = \"<td>i</td><td>j</td>\"\n        //     console.log(div.innerHTML)\n        // --> \"ij\", no <td> in sight.\n        var temp = $doc.createElement(possibleParents[match[1]] || \"div\");\n        if (ns === \"http://www.w3.org/2000/svg\") {\n            temp.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\">' + vnode.children + \"</svg>\";\n            temp = temp.firstChild;\n        } else temp.innerHTML = vnode.children;\n        vnode.dom = temp.firstChild;\n        vnode.domSize = temp.childNodes.length;\n        // Capture nodes to remove, so we don't confuse them.\n        vnode.instance = [];\n        var fragment = $doc.createDocumentFragment();\n        var child;\n        while(child = temp.firstChild){\n            vnode.instance.push(child);\n            fragment.appendChild(child);\n        }\n        insertNode(parent, fragment, nextSibling);\n    }\n    function createFragment(parent, vnode, hooks, ns, nextSibling) {\n        var fragment = $doc.createDocumentFragment();\n        if (vnode.children != null) {\n            var children = vnode.children;\n            createNodes(fragment, children, 0, children.length, hooks, null, ns);\n        }\n        vnode.dom = fragment.firstChild;\n        vnode.domSize = fragment.childNodes.length;\n        insertNode(parent, fragment, nextSibling);\n    }\n    function createElement(parent, vnode, hooks, ns, nextSibling) {\n        var tag = vnode.tag;\n        var attrs = vnode.attrs;\n        var is = attrs && attrs.is;\n        ns = getNameSpace(vnode) || ns;\n        var element = ns ? is ? $doc.createElementNS(ns, tag, {\n            is: is\n        }) : $doc.createElementNS(ns, tag) : is ? $doc.createElement(tag, {\n            is: is\n        }) : $doc.createElement(tag);\n        vnode.dom = element;\n        if (attrs != null) setAttrs(vnode, attrs, ns);\n        insertNode(parent, element, nextSibling);\n        if (!maybeSetContentEditable(vnode)) {\n            if (vnode.children != null) {\n                var children = vnode.children;\n                createNodes(element, children, 0, children.length, hooks, null, ns);\n                if (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs);\n            }\n        }\n    }\n    function initComponent(vnode, hooks) {\n        var sentinel;\n        if (typeof vnode.tag.view === \"function\") {\n            vnode.state = Object.create(vnode.tag);\n            sentinel = vnode.state.view;\n            if (sentinel.$$reentrantLock$$ != null) return;\n            sentinel.$$reentrantLock$$ = true;\n        } else {\n            vnode.state = void 0;\n            sentinel = vnode.tag;\n            if (sentinel.$$reentrantLock$$ != null) return;\n            sentinel.$$reentrantLock$$ = true;\n            vnode.state = vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\" ? new vnode.tag(vnode) : vnode.tag(vnode);\n        }\n        initLifecycle(vnode.state, vnode, hooks);\n        if (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks);\n        vnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode));\n        if (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\");\n        sentinel.$$reentrantLock$$ = null;\n    }\n    function createComponent(parent, vnode, hooks, ns, nextSibling) {\n        initComponent(vnode, hooks);\n        if (vnode.instance != null) {\n            createNode(parent, vnode.instance, hooks, ns, nextSibling);\n            vnode.dom = vnode.instance.dom;\n            vnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0;\n        } else vnode.domSize = 0;\n    }\n    //update\n    /**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */ // This function diffs and patches lists of vnodes, both keyed and unkeyed.\n    //\n    // We will:\n    //\n    // 1. describe its general structure\n    // 2. focus on the diff algorithm optimizations\n    // 3. discuss DOM node operations.\n    // ## Overview:\n    //\n    // The updateNodes() function:\n    // - deals with trivial cases\n    // - determines whether the lists are keyed or unkeyed based on the first non-null node\n    //   of each list.\n    // - diffs them and patches the DOM if needed (that's the brunt of the code)\n    // - manages the leftovers: after diffing, are there:\n    //   - old nodes left to remove?\n    // \t - new nodes to insert?\n    // \t deal with them!\n    //\n    // The lists are only iterated over once, with an exception for the nodes in `old` that\n    // are visited in the fourth part of the diff and in the `removeNodes` loop.\n    // ## Diffing\n    //\n    // Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n    // may be good for context on longest increasing subsequence-based logic for moving nodes.\n    //\n    // In order to diff keyed lists, one has to\n    //\n    // 1) match nodes in both lists, per key, and update them accordingly\n    // 2) create the nodes present in the new list, but absent in the old one\n    // 3) remove the nodes present in the old list, but absent in the new one\n    // 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n    //\n    // To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n    // over the new list and for each new vnode, find the corresponding vnode in the old list using\n    // the map.\n    // 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n    // and must be created.\n    // For the removals, we actually remove the nodes that have been updated from the old list.\n    // The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n    // The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n    // algorithm.\n    //\n    // the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n    // from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n    // corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n    //  match the above lists, for example).\n    //\n    // In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n    // can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n    //\n    // @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n    // the longest increasing subsequence *of old nodes still present in the new list*).\n    //\n    // It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n    // and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n    // the `LIS` and a temporary one to create the LIS).\n    //\n    // So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n    // the LIS and can be updated without moving them.\n    //\n    // If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n    // the exception of the last node if the list is fully reversed).\n    //\n    // ## Finding the next sibling.\n    //\n    // `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n    // When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n    // vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n    // list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n    //\n    // In the other scenarios (swaps, upwards traversal, map-based diff),\n    // the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n    // bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n    // as the next sibling (cached in the `nextSibling` variable).\n    // ## DOM node moves\n    //\n    // In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n    // this is not the case if the node moved (second and fourth part of the diff algo). We move\n    // the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n    // variable rather than fetching it using `getNextSibling()`.\n    //\n    // The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n    // like #1791 and #1999. We need to be smarter about those situations where adjascent old\n    // nodes remain together in the new list in a way that isn't covered by parts one and\n    // three of the diff algo.\n    function updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n        if (old === vnodes || old == null && vnodes == null) return;\n        else if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns);\n        else if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length);\n        else {\n            var isOldKeyed = old[0] != null && old[0].key != null;\n            var isKeyed = vnodes[0] != null && vnodes[0].key != null;\n            var start = 0, oldStart = 0;\n            if (!isOldKeyed) while(oldStart < old.length && old[oldStart] == null)oldStart++;\n            if (!isKeyed) while(start < vnodes.length && vnodes[start] == null)start++;\n            if (isOldKeyed !== isKeyed) {\n                removeNodes(parent, old, oldStart, old.length);\n                createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns);\n            } else if (!isKeyed) {\n                // Don't index past the end of either list (causes deopts).\n                var commonLength = old.length < vnodes.length ? old.length : vnodes.length;\n                // Rewind if necessary to the first non-null index on either side.\n                // We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n                // but that would be optimizing for sparse lists which are more rare than dense ones.\n                start = start < oldStart ? start : oldStart;\n                for(; start < commonLength; start++){\n                    o = old[start];\n                    v = vnodes[start];\n                    if (o === v || o == null && v == null) continue;\n                    else if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling));\n                    else if (v == null) removeNode(parent, o);\n                    else updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns);\n                }\n                if (old.length > commonLength) removeNodes(parent, old, start, old.length);\n                if (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns);\n            } else {\n                // keyed diff\n                var oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling;\n                // bottom-up\n                while(oldEnd >= oldStart && end >= start){\n                    oe = old[oldEnd];\n                    ve = vnodes[end];\n                    if (oe.key !== ve.key) break;\n                    if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);\n                    if (ve.dom != null) nextSibling = ve.dom;\n                    oldEnd--, end--;\n                }\n                // top-down\n                while(oldEnd >= oldStart && end >= start){\n                    o = old[oldStart];\n                    v = vnodes[start];\n                    if (o.key !== v.key) break;\n                    oldStart++, start++;\n                    if (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns);\n                }\n                // swaps and list reversals\n                while(oldEnd >= oldStart && end >= start){\n                    if (start === end) break;\n                    if (o.key !== ve.key || oe.key !== v.key) break;\n                    topSibling = getNextSibling(old, oldStart, nextSibling);\n                    moveNodes(parent, oe, topSibling);\n                    if (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns);\n                    if (++start <= --end) moveNodes(parent, o, nextSibling);\n                    if (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns);\n                    if (ve.dom != null) nextSibling = ve.dom;\n                    oldStart++;\n                    oldEnd--;\n                    oe = old[oldEnd];\n                    ve = vnodes[end];\n                    o = old[oldStart];\n                    v = vnodes[start];\n                }\n                // bottom up once again\n                while(oldEnd >= oldStart && end >= start){\n                    if (oe.key !== ve.key) break;\n                    if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);\n                    if (ve.dom != null) nextSibling = ve.dom;\n                    oldEnd--, end--;\n                    oe = old[oldEnd];\n                    ve = vnodes[end];\n                }\n                if (start > end) removeNodes(parent, old, oldStart, oldEnd + 1);\n                else if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns);\n                else {\n                    // inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n                    var originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li = 0, i = 0, pos = 2147483647, matched = 0, map, lisIndices;\n                    for(i = 0; i < vnodesLength; i++)oldIndices[i] = -1;\n                    for(i = end; i >= start; i--){\n                        if (map == null) map = getKeyMap(old, oldStart, oldEnd + 1);\n                        ve = vnodes[i];\n                        var oldIndex = map[ve.key];\n                        if (oldIndex != null) {\n                            pos = oldIndex < pos ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n                            ;\n                            oldIndices[i - start] = oldIndex;\n                            oe = old[oldIndex];\n                            old[oldIndex] = null;\n                            if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);\n                            if (ve.dom != null) nextSibling = ve.dom;\n                            matched++;\n                        }\n                    }\n                    nextSibling = originalNextSibling;\n                    if (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1);\n                    if (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns);\n                    else {\n                        if (pos === -1) {\n                            // the indices of the indices of the items that are part of the\n                            // longest increasing subsequence in the oldIndices list\n                            lisIndices = makeLisIndices(oldIndices);\n                            li = lisIndices.length - 1;\n                            for(i = end; i >= start; i--){\n                                v = vnodes[i];\n                                if (oldIndices[i - start] === -1) createNode(parent, v, hooks, ns, nextSibling);\n                                else if (lisIndices[li] === i - start) li--;\n                                else moveNodes(parent, v, nextSibling);\n                                if (v.dom != null) nextSibling = vnodes[i].dom;\n                            }\n                        } else for(i = end; i >= start; i--){\n                            v = vnodes[i];\n                            if (oldIndices[i - start] === -1) createNode(parent, v, hooks, ns, nextSibling);\n                            if (v.dom != null) nextSibling = vnodes[i].dom;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    function updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n        var oldTag = old.tag, tag = vnode.tag;\n        if (oldTag === tag) {\n            vnode.state = old.state;\n            vnode.events = old.events;\n            if (shouldNotUpdate(vnode, old)) return;\n            if (typeof oldTag === \"string\") {\n                if (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks);\n                switch(oldTag){\n                    case \"#\":\n                        updateText(old, vnode);\n                        break;\n                    case \"<\":\n                        updateHTML(parent, old, vnode, ns, nextSibling);\n                        break;\n                    case \"[\":\n                        updateFragment(parent, old, vnode, hooks, nextSibling, ns);\n                        break;\n                    default:\n                        updateElement(old, vnode, hooks, ns);\n                }\n            } else updateComponent(parent, old, vnode, hooks, nextSibling, ns);\n        } else {\n            removeNode(parent, old);\n            createNode(parent, vnode, hooks, ns, nextSibling);\n        }\n    }\n    function updateText(old, vnode) {\n        if (old.children.toString() !== vnode.children.toString()) old.dom.nodeValue = vnode.children;\n        vnode.dom = old.dom;\n    }\n    function updateHTML(parent, old, vnode, ns, nextSibling) {\n        if (old.children !== vnode.children) {\n            removeHTML(parent, old);\n            createHTML(parent, vnode, ns, nextSibling);\n        } else {\n            vnode.dom = old.dom;\n            vnode.domSize = old.domSize;\n            vnode.instance = old.instance;\n        }\n    }\n    function updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n        updateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns);\n        var domSize = 0, children = vnode.children;\n        vnode.dom = null;\n        if (children != null) {\n            for(var i = 0; i < children.length; i++){\n                var child = children[i];\n                if (child != null && child.dom != null) {\n                    if (vnode.dom == null) vnode.dom = child.dom;\n                    domSize += child.domSize || 1;\n                }\n            }\n            if (domSize !== 1) vnode.domSize = domSize;\n        }\n    }\n    function updateElement(old, vnode, hooks, ns) {\n        var element = vnode.dom = old.dom;\n        ns = getNameSpace(vnode) || ns;\n        if (vnode.tag === \"textarea\") {\n            if (vnode.attrs == null) vnode.attrs = {};\n        }\n        updateAttrs(vnode, old.attrs, vnode.attrs, ns);\n        if (!maybeSetContentEditable(vnode)) updateNodes(element, old.children, vnode.children, hooks, null, ns);\n    }\n    function updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n        vnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode));\n        if (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\");\n        updateLifecycle(vnode.state, vnode, hooks);\n        if (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks);\n        if (vnode.instance != null) {\n            if (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling);\n            else updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns);\n            vnode.dom = vnode.instance.dom;\n            vnode.domSize = vnode.instance.domSize;\n        } else if (old.instance != null) {\n            removeNode(parent, old.instance);\n            vnode.dom = undefined;\n            vnode.domSize = 0;\n        } else {\n            vnode.dom = old.dom;\n            vnode.domSize = old.domSize;\n        }\n    }\n    function getKeyMap(vnodes, start, end) {\n        var map = Object.create(null);\n        for(; start < end; start++){\n            var vnode = vnodes[start];\n            if (vnode != null) {\n                var key = vnode.key;\n                if (key != null) map[key] = start;\n            }\n        }\n        return map;\n    }\n    // Lifted from ivi https://github.com/ivijs/ivi/\n    // takes a list of unique numbers (-1 is special and can\n    // occur multiple times) and returns an array with the indices\n    // of the items that are part of the longest increasing\n    // subsequence\n    var lisTemp = [];\n    function makeLisIndices(a) {\n        var result = [\n            0\n        ];\n        var u = 0, v = 0, i = 0;\n        var il = lisTemp.length = a.length;\n        for(var i = 0; i < il; i++)lisTemp[i] = a[i];\n        for(var i = 0; i < il; ++i){\n            if (a[i] === -1) continue;\n            var j = result[result.length - 1];\n            if (a[j] < a[i]) {\n                lisTemp[i] = j;\n                result.push(i);\n                continue;\n            }\n            u = 0;\n            v = result.length - 1;\n            while(u < v){\n                // Fast integer average without overflow.\n                // eslint-disable-next-line no-bitwise\n                var c = (u >>> 1) + (v >>> 1) + (u & v & 1);\n                if (a[result[c]] < a[i]) u = c + 1;\n                else v = c;\n            }\n            if (a[i] < a[result[u]]) {\n                if (u > 0) lisTemp[i] = result[u - 1];\n                result[u] = i;\n            }\n        }\n        u = result.length;\n        v = result[u - 1];\n        while(u-- > 0){\n            result[u] = v;\n            v = lisTemp[v];\n        }\n        lisTemp.length = 0;\n        return result;\n    }\n    function getNextSibling(vnodes, i, nextSibling) {\n        for(; i < vnodes.length; i++){\n            if (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom;\n        }\n        return nextSibling;\n    }\n    // This covers a really specific edge case:\n    // - Parent node is keyed and contains child\n    // - Child is removed, returns unresolved promise in `onbeforeremove`\n    // - Parent node is moved in keyed diff\n    // - Remaining children still need moved appropriately\n    //\n    // Ideally, I'd track removed nodes as well, but that introduces a lot more\n    // complexity and I'm not exactly interested in doing that.\n    function moveNodes(parent, vnode, nextSibling) {\n        var frag = $doc.createDocumentFragment();\n        moveChildToFrag(parent, frag, vnode);\n        insertNode(parent, frag, nextSibling);\n    }\n    function moveChildToFrag(parent, frag, vnode) {\n        // Dodge the recursion overhead in a few of the most common cases.\n        while(vnode.dom != null && vnode.dom.parentNode === parent){\n            if (typeof vnode.tag !== \"string\") {\n                vnode = vnode.instance;\n                if (vnode != null) continue;\n            } else if (vnode.tag === \"<\") for(var i = 0; i < vnode.instance.length; i++)frag.appendChild(vnode.instance[i]);\n            else if (vnode.tag !== \"[\") // Don't recurse for text nodes *or* elements, just fragments\n            frag.appendChild(vnode.dom);\n            else if (vnode.children.length === 1) {\n                vnode = vnode.children[0];\n                if (vnode != null) continue;\n            } else for(var i = 0; i < vnode.children.length; i++){\n                var child = vnode.children[i];\n                if (child != null) moveChildToFrag(parent, frag, child);\n            }\n            break;\n        }\n    }\n    function insertNode(parent, dom, nextSibling) {\n        if (nextSibling != null) parent.insertBefore(dom, nextSibling);\n        else parent.appendChild(dom);\n    }\n    function maybeSetContentEditable(vnode) {\n        if (vnode.attrs == null || vnode.attrs.contenteditable == null && // attribute\n        vnode.attrs.contentEditable == null // property\n        ) return false;\n        var children = vnode.children;\n        if (children != null && children.length === 1 && children[0].tag === \"<\") {\n            var content = children[0].children;\n            if (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content;\n        } else if (children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted.\");\n        return true;\n    }\n    //remove\n    function removeNodes(parent, vnodes, start, end) {\n        for(var i = start; i < end; i++){\n            var vnode = vnodes[i];\n            if (vnode != null) removeNode(parent, vnode);\n        }\n    }\n    function removeNode(parent, vnode) {\n        var mask = 0;\n        var original = vnode.state;\n        var stateResult, attrsResult;\n        if (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") {\n            var result = callHook.call(vnode.state.onbeforeremove, vnode);\n            if (result != null && typeof result.then === \"function\") {\n                mask = 1;\n                stateResult = result;\n            }\n        }\n        if (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n            var result = callHook.call(vnode.attrs.onbeforeremove, vnode);\n            if (result != null && typeof result.then === \"function\") {\n                // eslint-disable-next-line no-bitwise\n                mask |= 2;\n                attrsResult = result;\n            }\n        }\n        checkState(vnode, original);\n        // If we can, try to fast-path it and avoid all the overhead of awaiting\n        if (!mask) {\n            onremove(vnode);\n            removeChild(parent, vnode);\n        } else {\n            if (stateResult != null) {\n                var next = function() {\n                    // eslint-disable-next-line no-bitwise\n                    if (mask & 1) {\n                        mask &= 2;\n                        if (!mask) reallyRemove();\n                    }\n                };\n                stateResult.then(next, next);\n            }\n            if (attrsResult != null) {\n                var next = function() {\n                    // eslint-disable-next-line no-bitwise\n                    if (mask & 2) {\n                        mask &= 1;\n                        if (!mask) reallyRemove();\n                    }\n                };\n                attrsResult.then(next, next);\n            }\n        }\n        function reallyRemove() {\n            checkState(vnode, original);\n            onremove(vnode);\n            removeChild(parent, vnode);\n        }\n    }\n    function removeHTML(parent, vnode) {\n        for(var i = 0; i < vnode.instance.length; i++)parent.removeChild(vnode.instance[i]);\n    }\n    function removeChild(parent, vnode) {\n        // Dodge the recursion overhead in a few of the most common cases.\n        while(vnode.dom != null && vnode.dom.parentNode === parent){\n            if (typeof vnode.tag !== \"string\") {\n                vnode = vnode.instance;\n                if (vnode != null) continue;\n            } else if (vnode.tag === \"<\") removeHTML(parent, vnode);\n            else {\n                if (vnode.tag !== \"[\") {\n                    parent.removeChild(vnode.dom);\n                    if (!Array.isArray(vnode.children)) break;\n                }\n                if (vnode.children.length === 1) {\n                    vnode = vnode.children[0];\n                    if (vnode != null) continue;\n                } else for(var i = 0; i < vnode.children.length; i++){\n                    var child = vnode.children[i];\n                    if (child != null) removeChild(parent, child);\n                }\n            }\n            break;\n        }\n    }\n    function onremove(vnode) {\n        if (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode);\n        if (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode);\n        if (typeof vnode.tag !== \"string\") {\n            if (vnode.instance != null) onremove(vnode.instance);\n        } else {\n            var children = vnode.children;\n            if (Array.isArray(children)) for(var i = 0; i < children.length; i++){\n                var child = children[i];\n                if (child != null) onremove(child);\n            }\n        }\n    }\n    //attrs\n    function setAttrs(vnode, attrs, ns) {\n        // If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n        //\n        // Also, the DOM does things to inputs based on the value, so it needs set first.\n        // See: https://github.com/MithrilJS/mithril.js/issues/2622\n        if (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type);\n        var isFileInput = attrs != null && vnode.tag === \"input\" && attrs.type === \"file\";\n        for(var key in attrs)setAttr(vnode, key, null, attrs[key], ns, isFileInput);\n    }\n    function setAttr(vnode, key, old, value, ns, isFileInput) {\n        if (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || old === value && !isFormAttribute(vnode, key) && typeof value !== \"object\" || key === \"type\" && vnode.tag === \"input\") return;\n        if (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value);\n        if (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value);\n        else if (key === \"style\") updateStyle(vnode.dom, old, value);\n        else if (hasPropertyKey(vnode, key, ns)) {\n            if (key === \"value\") {\n                // Only do the coercion if we're actually going to check the value.\n                /* eslint-disable no-implicit-coercion */ //setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n                //setting input[type=file][value] to same value causes an error to be generated if it's non-empty\n                if ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value && (isFileInput || vnode.dom === activeElement())) return;\n                //setting select[value] to same value while having select open blinks select dropdown in Chrome\n                if (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return;\n                //setting option[value] to same value while having select open blinks select dropdown in Chrome\n                if (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return;\n                //setting input[type=file][value] to different value is an error if it's non-empty\n                // Not ideal, but it at least works around the most common source of uncaught exceptions for now.\n                if (isFileInput && \"\" + value !== \"\") {\n                    console.error(\"`value` is read-only on file inputs!\");\n                    return;\n                }\n            /* eslint-enable no-implicit-coercion */ }\n            vnode.dom[key] = value;\n        } else if (typeof value === \"boolean\") {\n            if (value) vnode.dom.setAttribute(key, \"\");\n            else vnode.dom.removeAttribute(key);\n        } else vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value);\n    }\n    function removeAttr(vnode, key, old, ns) {\n        if (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return;\n        if (key[0] === \"o\" && key[1] === \"n\") updateEvent(vnode, key, undefined);\n        else if (key === \"style\") updateStyle(vnode.dom, old, null);\n        else if (hasPropertyKey(vnode, key, ns) && key !== \"className\" && key !== \"title\" // creates \"null\" as title\n         && !(key === \"value\" && (vnode.tag === \"option\" || vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement())) && !(vnode.tag === \"input\" && key === \"type\")) vnode.dom[key] = null;\n        else {\n            var nsLastIndex = key.indexOf(\":\");\n            if (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1);\n            if (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key);\n        }\n    }\n    function setLateSelectAttrs(vnode, attrs) {\n        if (\"value\" in attrs) {\n            if (attrs.value === null) {\n                if (vnode.dom.selectedIndex !== -1) vnode.dom.value = null;\n            } else {\n                var normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n                ;\n                if (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) vnode.dom.value = normalized;\n            }\n        }\n        if (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined);\n    }\n    function updateAttrs(vnode, old, attrs, ns) {\n        if (old && old === attrs) console.warn(\"Don't reuse attrs object, use new object for every redraw, this will throw in next major\");\n        if (attrs != null) {\n            // If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n            //\n            // Also, the DOM does things to inputs based on the value, so it needs set first.\n            // See: https://github.com/MithrilJS/mithril.js/issues/2622\n            if (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type);\n            var isFileInput = vnode.tag === \"input\" && attrs.type === \"file\";\n            for(var key in attrs)setAttr(vnode, key, old && old[key], attrs[key], ns, isFileInput);\n        }\n        var val;\n        if (old != null) {\n            for(var key in old)if ((val = old[key]) != null && (attrs == null || attrs[key] == null)) removeAttr(vnode, key, val, ns);\n        }\n    }\n    function isFormAttribute(vnode, attr) {\n        return attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === activeElement() || vnode.tag === \"option\" && vnode.dom.parentNode === $doc.activeElement;\n    }\n    function isLifecycleMethod(attr) {\n        return attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\";\n    }\n    function hasPropertyKey(vnode, key, ns) {\n        // Filter out namespaced keys\n        return ns === undefined && // If it's a custom element, just keep it.\n        (vnode.tag.indexOf(\"-\") > -1 || vnode.attrs != null && vnode.attrs.is || // If it's a normal element, let's try to avoid a few browser bugs.\n        key !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\" // && key !== \"type\"\n        ) && key in vnode.dom;\n    }\n    //style\n    var uppercaseRegex = /[A-Z]/g;\n    function toLowerCase(capital) {\n        return \"-\" + capital.toLowerCase();\n    }\n    function normalizeKey(key) {\n        return key[0] === \"-\" && key[1] === \"-\" ? key : key === \"cssFloat\" ? \"float\" : key.replace(uppercaseRegex, toLowerCase);\n    }\n    function updateStyle(element, old, style) {\n        if (old === style) ;\n        else if (style == null) // New style is missing, just clear it.\n        element.style.cssText = \"\";\n        else if (typeof style !== \"object\") // New style is a string, let engine deal with patching.\n        element.style.cssText = style;\n        else if (old == null || typeof old !== \"object\") {\n            // `old` is missing or a string, `style` is an object.\n            element.style.cssText = \"\";\n            // Add new style properties\n            for(var key in style){\n                var value = style[key];\n                if (value != null) element.style.setProperty(normalizeKey(key), String(value));\n            }\n        } else {\n            // Both old & new are (different) objects.\n            // Update style properties that have changed\n            for(var key in style){\n                var value = style[key];\n                if (value != null && (value = String(value)) !== String(old[key])) element.style.setProperty(normalizeKey(key), value);\n            }\n            // Remove style properties that no longer exist\n            for(var key in old)if (old[key] != null && style[key] == null) element.style.removeProperty(normalizeKey(key));\n        }\n    }\n    // Here's an explanation of how this works:\n    // 1. The event names are always (by design) prefixed by `on`.\n    // 2. The EventListener interface accepts either a function or an object\n    //    with a `handleEvent` method.\n    // 3. The object does not inherit from `Object.prototype`, to avoid\n    //    any potential interference with that (e.g. setters).\n    // 4. The event name is remapped to the handler before calling it.\n    // 5. In function-based event handlers, `ev.target === this`. We replicate\n    //    that below.\n    // 6. In function-based event handlers, `return false` prevents the default\n    //    action and stops event propagation. We replicate that below.\n    function EventDict() {\n        // Save this, so the current redraw is correctly tracked.\n        this._ = currentRedraw;\n    }\n    EventDict.prototype = Object.create(null);\n    EventDict.prototype.handleEvent = function(ev) {\n        var handler = this[\"on\" + ev.type];\n        var result;\n        if (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev);\n        else if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev);\n        if (this._ && ev.redraw !== false) (0, this._)();\n        if (result === false) {\n            ev.preventDefault();\n            ev.stopPropagation();\n        }\n    };\n    //event\n    function updateEvent(vnode, key, value) {\n        if (vnode.events != null) {\n            vnode.events._ = currentRedraw;\n            if (vnode.events[key] === value) return;\n            if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n                if (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false);\n                vnode.events[key] = value;\n            } else {\n                if (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false);\n                vnode.events[key] = undefined;\n            }\n        } else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n            vnode.events = new EventDict();\n            vnode.dom.addEventListener(key.slice(2), vnode.events, false);\n            vnode.events[key] = value;\n        }\n    }\n    //lifecycle\n    function initLifecycle(source, vnode, hooks) {\n        if (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode);\n        if (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode));\n    }\n    function updateLifecycle(source, vnode, hooks) {\n        if (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode));\n    }\n    function shouldNotUpdate(vnode, old) {\n        do {\n            if (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n                var force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old);\n                if (force !== undefined && !force) break;\n            }\n            if (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n                var force = callHook.call(vnode.state.onbeforeupdate, vnode, old);\n                if (force !== undefined && !force) break;\n            }\n            return false;\n        }while (false); // eslint-disable-line no-constant-condition\n        vnode.dom = old.dom;\n        vnode.domSize = old.domSize;\n        vnode.instance = old.instance;\n        // One would think having the actual latest attributes would be ideal,\n        // but it doesn't let us properly diff based on our current internal\n        // representation. We have to save not only the old DOM info, but also\n        // the attributes used to create it, as we diff *that*, not against the\n        // DOM directly (with a few exceptions in `setAttr`). And, of course, we\n        // need to save the children and text as they are conceptually not\n        // unlike special \"attributes\" internally.\n        vnode.attrs = old.attrs;\n        vnode.children = old.children;\n        vnode.text = old.text;\n        return true;\n    }\n    var currentDOM;\n    return function(dom, vnodes, redraw) {\n        if (!dom) throw new TypeError(\"DOM element being rendered to does not exist.\");\n        if (currentDOM != null && dom.contains(currentDOM)) throw new TypeError(\"Node is currently being rendered to and thus is locked.\");\n        var prevRedraw = currentRedraw;\n        var prevDOM = currentDOM;\n        var hooks = [];\n        var active = activeElement();\n        var namespace = dom.namespaceURI;\n        currentDOM = dom;\n        currentRedraw = typeof redraw === \"function\" ? redraw : undefined;\n        try {\n            // First time rendering into a node clears it out\n            if (dom.vnodes == null) dom.textContent = \"\";\n            vnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [\n                vnodes\n            ]);\n            updateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace);\n            dom.vnodes = vnodes;\n            // `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n            if (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus();\n            for(var i = 0; i < hooks.length; i++)hooks[i]();\n        } finally{\n            currentRedraw = prevRedraw;\n            currentDOM = prevDOM;\n        }\n    };\n};\n\n},{\"8c1a3af9d274e105\":\"3MB60\"}],\"a3OiH\":[function(require,module,exports) {\n\"use strict\";\nvar Vnode = require(\"467dc3c2fbf7fe6a\");\nmodule.exports = function(render, schedule, console) {\n    var subscriptions = [];\n    var pending = false;\n    var offset = -1;\n    function sync() {\n        for(offset = 0; offset < subscriptions.length; offset += 2)try {\n            render(subscriptions[offset], Vnode(subscriptions[offset + 1]), redraw);\n        } catch (e) {\n            console.error(e);\n        }\n        offset = -1;\n    }\n    function redraw() {\n        if (!pending) {\n            pending = true;\n            schedule(function() {\n                pending = false;\n                sync();\n            });\n        }\n    }\n    redraw.sync = sync;\n    function mount(root, component) {\n        if (component != null && component.view == null && typeof component !== \"function\") throw new TypeError(\"m.mount expects a component, not a vnode.\");\n        var index = subscriptions.indexOf(root);\n        if (index >= 0) {\n            subscriptions.splice(index, 2);\n            if (index <= offset) offset -= 2;\n            render(root, []);\n        }\n        if (component != null) {\n            subscriptions.push(root, component);\n            render(root, Vnode(component), redraw);\n        }\n    }\n    return {\n        mount: mount,\n        redraw: redraw\n    };\n};\n\n},{\"467dc3c2fbf7fe6a\":\"3MB60\"}],\"dWcdG\":[function(require,module,exports) {\n\"use strict\";\nvar buildPathname = require(\"8978bad752a3e24e\");\nvar hasOwn = require(\"68d5fe67225153a7\");\nmodule.exports = function($window, Promise, oncompletion) {\n    var callbackCount = 0;\n    function PromiseProxy(executor) {\n        return new Promise(executor);\n    }\n    // In case the global Promise is some userland library's where they rely on\n    // `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n    // similar. Let's *not* break them.\n    PromiseProxy.prototype = Promise.prototype;\n    PromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n    ;\n    function makeRequest(factory) {\n        return function(url, args) {\n            if (typeof url !== \"string\") {\n                args = url;\n                url = url.url;\n            } else if (args == null) args = {};\n            var promise = new Promise(function(resolve, reject) {\n                factory(buildPathname(url, args.params), args, function(data) {\n                    if (typeof args.type === \"function\") {\n                        if (Array.isArray(data)) for(var i = 0; i < data.length; i++)data[i] = new args.type(data[i]);\n                        else data = new args.type(data);\n                    }\n                    resolve(data);\n                }, reject);\n            });\n            if (args.background === true) return promise;\n            var count = 0;\n            function complete() {\n                if (--count === 0 && typeof oncompletion === \"function\") oncompletion();\n            }\n            return wrap(promise);\n            function wrap(promise) {\n                var then = promise.then;\n                // Set the constructor, so engines know to not await or resolve\n                // this as a native promise. At the time of writing, this is\n                // only necessary for V8, but their behavior is the correct\n                // behavior per spec. See this spec issue for more details:\n                // https://github.com/tc39/ecma262/issues/1577. Also, see the\n                // corresponding comment in `request/tests/test-request.js` for\n                // a bit more background on the issue at hand.\n                promise.constructor = PromiseProxy;\n                promise.then = function() {\n                    count++;\n                    var next = then.apply(promise, arguments);\n                    next.then(complete, function(e) {\n                        complete();\n                        if (count === 0) throw e;\n                    });\n                    return wrap(next);\n                };\n                return promise;\n            }\n        };\n    }\n    function hasHeader(args, name) {\n        for(var key in args.headers){\n            if (hasOwn.call(args.headers, key) && key.toLowerCase() === name) return true;\n        }\n        return false;\n    }\n    return {\n        request: makeRequest(function(url, args, resolve, reject) {\n            var method = args.method != null ? args.method.toUpperCase() : \"GET\";\n            var body = args.body;\n            var assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData || body instanceof $window.URLSearchParams);\n            var responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\");\n            var xhr = new $window.XMLHttpRequest(), aborted = false, isTimeout = false;\n            var original = xhr, replacedAbort;\n            var abort = xhr.abort;\n            xhr.abort = function() {\n                aborted = true;\n                abort.call(this);\n            };\n            xhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined);\n            if (assumeJSON && body != null && !hasHeader(args, \"content-type\")) xhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n            if (typeof args.deserialize !== \"function\" && !hasHeader(args, \"accept\")) xhr.setRequestHeader(\"Accept\", \"application/json, text/*\");\n            if (args.withCredentials) xhr.withCredentials = args.withCredentials;\n            if (args.timeout) xhr.timeout = args.timeout;\n            xhr.responseType = responseType;\n            for(var key in args.headers)if (hasOwn.call(args.headers, key)) xhr.setRequestHeader(key, args.headers[key]);\n            xhr.onreadystatechange = function(ev) {\n                // Don't throw errors on xhr.abort().\n                if (aborted) return;\n                if (ev.target.readyState === 4) try {\n                    var success = ev.target.status >= 200 && ev.target.status < 300 || ev.target.status === 304 || /^file:\\/\\//i.test(url);\n                    // When the response type isn't \"\" or \"text\",\n                    // `xhr.responseText` is the wrong thing to use.\n                    // Browsers do the right thing and throw here, and we\n                    // should honor that and do the right thing by\n                    // preferring `xhr.response` where possible/practical.\n                    var response = ev.target.response, message;\n                    if (responseType === \"json\") {\n                        // For IE and Edge, which don't implement\n                        // `responseType: \"json\"`.\n                        if (!ev.target.responseType && typeof args.extract !== \"function\") // Handle no-content which will not parse.\n                        try {\n                            response = JSON.parse(ev.target.responseText);\n                        } catch (e) {\n                            response = null;\n                        }\n                    } else if (!responseType || responseType === \"text\") // Only use this default if it's text. If a parsed\n                    // document is needed on old IE and friends (all\n                    // unsupported), the user should use a custom\n                    // `config` instead. They're already using this at\n                    // their own risk.\n                    {\n                        if (response == null) response = ev.target.responseText;\n                    }\n                    if (typeof args.extract === \"function\") {\n                        response = args.extract(ev.target, args);\n                        success = true;\n                    } else if (typeof args.deserialize === \"function\") response = args.deserialize(response);\n                    if (success) resolve(response);\n                    else {\n                        var completeErrorResponse = function() {\n                            try {\n                                message = ev.target.responseText;\n                            } catch (e) {\n                                message = response;\n                            }\n                            var error = new Error(message);\n                            error.code = ev.target.status;\n                            error.response = response;\n                            reject(error);\n                        };\n                        if (xhr.status === 0) // Use setTimeout to push this code block onto the event queue\n                        // This allows `xhr.ontimeout` to run in the case that there is a timeout\n                        // Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject\n                        // as `xhr.onreadystatechange` will run before it\n                        setTimeout(function() {\n                            if (isTimeout) return;\n                            completeErrorResponse();\n                        });\n                        else completeErrorResponse();\n                    }\n                } catch (e) {\n                    reject(e);\n                }\n            };\n            xhr.ontimeout = function(ev) {\n                isTimeout = true;\n                var error = new Error(\"Request timed out\");\n                error.code = ev.target.status;\n                reject(error);\n            };\n            if (typeof args.config === \"function\") {\n                xhr = args.config(xhr, args, url) || xhr;\n                // Propagate the `abort` to any replacement XHR as well.\n                if (xhr !== original) {\n                    replacedAbort = xhr.abort;\n                    xhr.abort = function() {\n                        aborted = true;\n                        replacedAbort.call(this);\n                    };\n                }\n            }\n            if (body == null) xhr.send();\n            else if (typeof args.serialize === \"function\") xhr.send(args.serialize(body));\n            else if (body instanceof $window.FormData || body instanceof $window.URLSearchParams) xhr.send(body);\n            else xhr.send(JSON.stringify(body));\n        }),\n        jsonp: makeRequest(function(url, args, resolve, reject) {\n            var callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++;\n            var script = $window.document.createElement(\"script\");\n            $window[callbackName] = function(data) {\n                delete $window[callbackName];\n                script.parentNode.removeChild(script);\n                resolve(data);\n            };\n            script.onerror = function() {\n                delete $window[callbackName];\n                script.parentNode.removeChild(script);\n                reject(new Error(\"JSONP request failed\"));\n            };\n            script.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + encodeURIComponent(args.callbackKey || \"callback\") + \"=\" + encodeURIComponent(callbackName);\n            $window.document.documentElement.appendChild(script);\n        })\n    };\n};\n\n},{\"8978bad752a3e24e\":\"6Sp6O\",\"68d5fe67225153a7\":\"1qiWM\"}],\"6Sp6O\":[function(require,module,exports) {\n\"use strict\";\nvar buildQueryString = require(\"70a4649d20f83b8a\");\nvar assign = require(\"888e60f1722c8b46\");\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n    if (/:([^\\/\\.-]+)(\\.{3})?:/.test(template)) throw new SyntaxError(\"Template parameter names must be separated by either a '/', '-', or '.'.\");\n    if (params == null) return template;\n    var queryIndex = template.indexOf(\"?\");\n    var hashIndex = template.indexOf(\"#\");\n    var queryEnd = hashIndex < 0 ? template.length : hashIndex;\n    var pathEnd = queryIndex < 0 ? queryEnd : queryIndex;\n    var path = template.slice(0, pathEnd);\n    var query = {};\n    assign(query, params);\n    var resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n        delete query[key];\n        // If no such parameter exists, don't interpolate it.\n        if (params[key] == null) return m;\n        // Escape normal parameters, but not variadic ones.\n        return variadic ? params[key] : encodeURIComponent(String(params[key]));\n    });\n    // In case the template substitution adds new query/hash parameters.\n    var newQueryIndex = resolved.indexOf(\"?\");\n    var newHashIndex = resolved.indexOf(\"#\");\n    var newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex;\n    var newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex;\n    var result = resolved.slice(0, newPathEnd);\n    if (queryIndex >= 0) result += template.slice(queryIndex, queryEnd);\n    if (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd);\n    var querystring = buildQueryString(query);\n    if (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring;\n    if (hashIndex >= 0) result += template.slice(hashIndex);\n    if (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex);\n    return result;\n};\n\n},{\"70a4649d20f83b8a\":\"i28pn\",\"888e60f1722c8b46\":\"jBAA8\"}],\"i28pn\":[function(require,module,exports) {\n\"use strict\";\nmodule.exports = function(object) {\n    if (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\";\n    var args = [];\n    for(var key in object)destructure(key, object[key]);\n    return args.join(\"&\");\n    function destructure(key, value) {\n        if (Array.isArray(value)) for(var i = 0; i < value.length; i++)destructure(key + \"[\" + i + \"]\", value[i]);\n        else if (Object.prototype.toString.call(value) === \"[object Object]\") for(var i in value)destructure(key + \"[\" + i + \"]\", value[i]);\n        else args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"));\n    }\n};\n\n},{}],\"jBAA8\":[function(require,module,exports) {\n// This exists so I'm only saving it once.\n\"use strict\";\nvar hasOwn = require(\"658fcf17ed001102\");\nmodule.exports = Object.assign || function(target, source) {\n    for(var key in source)if (hasOwn.call(source, key)) target[key] = source[key];\n};\n\n},{\"658fcf17ed001102\":\"1qiWM\"}],\"hiLSa\":[function(require,module,exports) {\n\"use strict\";\nvar mountRedraw = require(\"4fdedb338340a3f3\");\nmodule.exports = require(\"9c1b8b10412e09b2\")(typeof window !== \"undefined\" ? window : null, mountRedraw);\n\n},{\"4fdedb338340a3f3\":\"aBC6V\",\"9c1b8b10412e09b2\":\"2m6Wv\"}],\"2m6Wv\":[function(require,module,exports) {\n\"use strict\";\nvar Vnode = require(\"68465c675053e055\");\nvar m = require(\"adb1374fbd62ddb4\");\nvar Promise = require(\"dd5e4296bf8c58a8\");\nvar buildPathname = require(\"f15df7f3b1724444\");\nvar parsePathname = require(\"730e93a5d59ec1d9\");\nvar compileTemplate = require(\"829227ed273d4a02\");\nvar assign = require(\"bc482b3d75b86f47\");\nvar censor = require(\"ba0f83b8edd5bfe2\");\nvar sentinel = {};\nfunction decodeURIComponentSave(component) {\n    try {\n        return decodeURIComponent(component);\n    } catch (e) {\n        return component;\n    }\n}\nmodule.exports = function($window, mountRedraw) {\n    var callAsync = $window == null ? null : typeof $window.setImmediate === \"function\" ? $window.setImmediate : $window.setTimeout;\n    var p = Promise.resolve();\n    var scheduled = false;\n    // state === 0: init\n    // state === 1: scheduled\n    // state === 2: done\n    var ready = false;\n    var state = 0;\n    var compiled, fallbackRoute;\n    var currentResolver = sentinel, component, attrs, currentPath, lastUpdate;\n    var RouterRoot = {\n        onbeforeupdate: function() {\n            state = state ? 2 : 1;\n            return !(!state || sentinel === currentResolver);\n        },\n        onremove: function() {\n            $window.removeEventListener(\"popstate\", fireAsync, false);\n            $window.removeEventListener(\"hashchange\", resolveRoute, false);\n        },\n        view: function() {\n            if (!state || sentinel === currentResolver) return;\n            // Wrap in a fragment to preserve existing key semantics\n            var vnode = [\n                Vnode(component, attrs.key, attrs)\n            ];\n            if (currentResolver) vnode = currentResolver.render(vnode[0]);\n            return vnode;\n        }\n    };\n    var SKIP = route.SKIP = {};\n    function resolveRoute() {\n        scheduled = false;\n        // Consider the pathname holistically. The prefix might even be invalid,\n        // but that's not our problem.\n        var prefix = $window.location.hash;\n        if (route.prefix[0] !== \"#\") {\n            prefix = $window.location.search + prefix;\n            if (route.prefix[0] !== \"?\") {\n                prefix = $window.location.pathname + prefix;\n                if (prefix[0] !== \"/\") prefix = \"/\" + prefix;\n            }\n        }\n        // This seemingly useless `.concat()` speeds up the tests quite a bit,\n        // since the representation is consistently a relatively poorly\n        // optimized cons string.\n        var path = prefix.concat().replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponentSave).slice(route.prefix.length);\n        var data = parsePathname(path);\n        assign(data.params, $window.history.state);\n        function reject(e) {\n            console.error(e);\n            setPath(fallbackRoute, null, {\n                replace: true\n            });\n        }\n        loop(0);\n        function loop(i) {\n            // state === 0: init\n            // state === 1: scheduled\n            // state === 2: done\n            for(; i < compiled.length; i++)if (compiled[i].check(data)) {\n                var payload = compiled[i].component;\n                var matchedRoute = compiled[i].route;\n                var localComp = payload;\n                var update = lastUpdate = function(comp) {\n                    if (update !== lastUpdate) return;\n                    if (comp === SKIP) return loop(i + 1);\n                    component = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\") ? comp : \"div\";\n                    attrs = data.params, currentPath = path, lastUpdate = null;\n                    currentResolver = payload.render ? payload : null;\n                    if (state === 2) mountRedraw.redraw();\n                    else {\n                        state = 2;\n                        mountRedraw.redraw.sync();\n                    }\n                };\n                // There's no understating how much I *wish* I could\n                // use `async`/`await` here...\n                if (payload.view || typeof payload === \"function\") {\n                    payload = {};\n                    update(localComp);\n                } else if (payload.onmatch) p.then(function() {\n                    return payload.onmatch(data.params, path, matchedRoute);\n                }).then(update, path === fallbackRoute ? null : reject);\n                else update(\"div\");\n                return;\n            }\n            if (path === fallbackRoute) throw new Error(\"Could not resolve default route \" + fallbackRoute + \".\");\n            setPath(fallbackRoute, null, {\n                replace: true\n            });\n        }\n    }\n    // Set it unconditionally so `m.route.set` and `m.route.Link` both work,\n    // even if neither `pushState` nor `hashchange` are supported. It's\n    // cleared if `hashchange` is used, since that makes it automatically\n    // async.\n    function fireAsync() {\n        if (!scheduled) {\n            scheduled = true;\n            // TODO: just do `mountRedraw.redraw()` here and elide the timer\n            // dependency. Note that this will muck with tests a *lot*, so it's\n            // not as easy of a change as it sounds.\n            callAsync(resolveRoute);\n        }\n    }\n    function setPath(path, data, options) {\n        path = buildPathname(path, data);\n        if (ready) {\n            fireAsync();\n            var state = options ? options.state : null;\n            var title = options ? options.title : null;\n            if (options && options.replace) $window.history.replaceState(state, title, route.prefix + path);\n            else $window.history.pushState(state, title, route.prefix + path);\n        } else $window.location.href = route.prefix + path;\n    }\n    function route(root, defaultRoute, routes) {\n        if (!root) throw new TypeError(\"DOM element being rendered to does not exist.\");\n        compiled = Object.keys(routes).map(function(route) {\n            if (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a '/'.\");\n            if (/:([^\\/\\.-]+)(\\.{3})?:/.test(route)) throw new SyntaxError(\"Route parameter names must be separated with either '/', '.', or '-'.\");\n            return {\n                route: route,\n                component: routes[route],\n                check: compileTemplate(route)\n            };\n        });\n        fallbackRoute = defaultRoute;\n        if (defaultRoute != null) {\n            var defaultData = parsePathname(defaultRoute);\n            if (!compiled.some(function(i) {\n                return i.check(defaultData);\n            })) throw new ReferenceError(\"Default route doesn't match any known routes.\");\n        }\n        if (typeof $window.history.pushState === \"function\") $window.addEventListener(\"popstate\", fireAsync, false);\n        else if (route.prefix[0] === \"#\") $window.addEventListener(\"hashchange\", resolveRoute, false);\n        ready = true;\n        mountRedraw.mount(root, RouterRoot);\n        resolveRoute();\n    }\n    route.set = function(path, data, options) {\n        if (lastUpdate != null) {\n            options = options || {};\n            options.replace = true;\n        }\n        lastUpdate = null;\n        setPath(path, data, options);\n    };\n    route.get = function() {\n        return currentPath;\n    };\n    route.prefix = \"#!\";\n    route.Link = {\n        view: function(vnode) {\n            // Omit the used parameters from the rendered element - they are\n            // internal. Also, censor the various lifecycle methods.\n            //\n            // We don't strip the other parameters because for convenience we\n            // let them be specified in the selector as well.\n            var child = m(vnode.attrs.selector || \"a\", censor(vnode.attrs, [\n                \"options\",\n                \"params\",\n                \"selector\",\n                \"onclick\"\n            ]), vnode.children);\n            var options, onclick, href;\n            // Let's provide a *right* way to disable a route link, rather than\n            // letting people screw up accessibility on accident.\n            //\n            // The attribute is coerced so users don't get surprised over\n            // `disabled: 0` resulting in a button that's somehow routable\n            // despite being visibly disabled.\n            if (child.attrs.disabled = Boolean(child.attrs.disabled)) {\n                child.attrs.href = null;\n                child.attrs[\"aria-disabled\"] = \"true\";\n            // If you *really* do want add `onclick` on a disabled link, use\n            // an `oncreate` hook to add it.\n            } else {\n                options = vnode.attrs.options;\n                onclick = vnode.attrs.onclick;\n                // Easier to build it now to keep it isomorphic.\n                href = buildPathname(child.attrs.href, vnode.attrs.params);\n                child.attrs.href = route.prefix + href;\n                child.attrs.onclick = function(e) {\n                    var result;\n                    if (typeof onclick === \"function\") result = onclick.call(e.currentTarget, e);\n                    else if (onclick == null || typeof onclick !== \"object\") ;\n                    else if (typeof onclick.handleEvent === \"function\") onclick.handleEvent(e);\n                    // Adapted from React Router's implementation:\n                    // https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n                    //\n                    // Try to be flexible and intuitive in how we handle links.\n                    // Fun fact: links aren't as obvious to get right as you\n                    // would expect. There's a lot more valid ways to click a\n                    // link than this, and one might want to not simply click a\n                    // link, but right click or command-click it to copy the\n                    // link target, etc. Nope, this isn't just for blind people.\n                    if (// Skip if `onclick` prevented default\n                    result !== false && !e.defaultPrevented && // Ignore everything but left clicks\n                    (e.button === 0 || e.which === 0 || e.which === 1) && // Let the browser handle `target=_blank`, etc.\n                    (!e.currentTarget.target || e.currentTarget.target === \"_self\") && // No modifier keys\n                    !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey) {\n                        e.preventDefault();\n                        e.redraw = false;\n                        route.set(href, null, options);\n                    }\n                };\n            }\n            return child;\n        }\n    };\n    route.param = function(key) {\n        return attrs && key != null ? attrs[key] : attrs;\n    };\n    return route;\n};\n\n},{\"68465c675053e055\":\"3MB60\",\"adb1374fbd62ddb4\":\"5U6pe\",\"dd5e4296bf8c58a8\":\"9Z5xX\",\"f15df7f3b1724444\":\"6Sp6O\",\"730e93a5d59ec1d9\":\"5bNaX\",\"829227ed273d4a02\":\"3FUTG\",\"bc482b3d75b86f47\":\"jBAA8\",\"ba0f83b8edd5bfe2\":\"a4I0S\"}],\"5bNaX\":[function(require,module,exports) {\n\"use strict\";\nvar parseQueryString = require(\"8660a02beda9c833\");\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n    var queryIndex = url.indexOf(\"?\");\n    var hashIndex = url.indexOf(\"#\");\n    var queryEnd = hashIndex < 0 ? url.length : hashIndex;\n    var pathEnd = queryIndex < 0 ? queryEnd : queryIndex;\n    var path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\");\n    if (!path) path = \"/\";\n    else {\n        if (path[0] !== \"/\") path = \"/\" + path;\n        if (path.length > 1 && path[path.length - 1] === \"/\") path = path.slice(0, -1);\n    }\n    return {\n        path: path,\n        params: queryIndex < 0 ? {} : parseQueryString(url.slice(queryIndex + 1, queryEnd))\n    };\n};\n\n},{\"8660a02beda9c833\":\"juUuV\"}],\"juUuV\":[function(require,module,exports) {\n\"use strict\";\nfunction decodeURIComponentSave(str) {\n    try {\n        return decodeURIComponent(str);\n    } catch (err) {\n        return str;\n    }\n}\nmodule.exports = function(string) {\n    if (string === \"\" || string == null) return {};\n    if (string.charAt(0) === \"?\") string = string.slice(1);\n    var entries = string.split(\"&\"), counters = {}, data = {};\n    for(var i = 0; i < entries.length; i++){\n        var entry = entries[i].split(\"=\");\n        var key = decodeURIComponentSave(entry[0]);\n        var value = entry.length === 2 ? decodeURIComponentSave(entry[1]) : \"\";\n        if (value === \"true\") value = true;\n        else if (value === \"false\") value = false;\n        var levels = key.split(/\\]\\[?|\\[/);\n        var cursor = data;\n        if (key.indexOf(\"[\") > -1) levels.pop();\n        for(var j = 0; j < levels.length; j++){\n            var level = levels[j], nextLevel = levels[j + 1];\n            var isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10));\n            if (level === \"\") {\n                var key = levels.slice(0, j).join();\n                if (counters[key] == null) counters[key] = Array.isArray(cursor) ? cursor.length : 0;\n                level = counters[key]++;\n            } else if (level === \"__proto__\") break;\n            if (j === levels.length - 1) cursor[level] = value;\n            else {\n                // Read own properties exclusively to disallow indirect\n                // prototype pollution\n                var desc = Object.getOwnPropertyDescriptor(cursor, level);\n                if (desc != null) desc = desc.value;\n                if (desc == null) cursor[level] = desc = isNumber ? [] : {};\n                cursor = desc;\n            }\n        }\n    }\n    return data;\n};\n\n},{}],\"3FUTG\":[function(require,module,exports) {\n\"use strict\";\nvar parsePathname = require(\"738f895382d52b2b\");\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n    var templateData = parsePathname(template);\n    var templateKeys = Object.keys(templateData.params);\n    var keys = [];\n    var regexp = new RegExp(\"^\" + templateData.path.replace(// I escape literal text so people can use things like `:file.:ext` or\n    // `:lang-:locale` in routes. This is all merged into one pass so I\n    // don't also accidentally escape `-` and make it harder to detect it to\n    // ban it from template parameters.\n    /:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g, function(m, key, extra) {\n        if (key == null) return \"\\\\\" + m;\n        keys.push({\n            k: key,\n            r: extra === \"...\"\n        });\n        if (extra === \"...\") return \"(.*)\";\n        if (extra === \".\") return \"([^/]+)\\\\.\";\n        return \"([^/]+)\" + (extra || \"\");\n    }) + \"$\");\n    return function(data) {\n        // First, check the params. Usually, there isn't any, and it's just\n        // checking a static set.\n        for(var i = 0; i < templateKeys.length; i++){\n            if (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false;\n        }\n        // If no interpolations exist, let's skip all the ceremony\n        if (!keys.length) return regexp.test(data.path);\n        var values = regexp.exec(data.path);\n        if (values == null) return false;\n        for(var i = 0; i < keys.length; i++)data.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1]);\n        return true;\n    };\n};\n\n},{\"738f895382d52b2b\":\"5bNaX\"}],\"a4I0S\":[function(require,module,exports) {\n\"use strict\";\n// Note: this is mildly perf-sensitive.\n//\n// It does *not* use `delete` - dynamic `delete`s usually cause objects to bail\n// out into dictionary mode and just generally cause a bunch of optimization\n// issues within engines.\n//\n// Ideally, I would've preferred to do this, if it weren't for the optimization\n// issues:\n//\n// ```js\n// const hasOwn = require(\"./hasOwn\")\n// const magic = [\n//     \"key\", \"oninit\", \"oncreate\", \"onbeforeupdate\", \"onupdate\",\n//     \"onbeforeremove\", \"onremove\",\n// ]\n// module.exports = (attrs, extras) => {\n//     const result = Object.assign(Object.create(null), attrs)\n//     for (const key of magic) delete result[key]\n//     if (extras != null) for (const key of extras) delete result[key]\n//     return result\n// }\n// ```\nvar hasOwn = require(\"ea1ad0c0d427959\");\n// Words in RegExp literals are sometimes mangled incorrectly by the internal bundler, so use RegExp().\nvar magic = new RegExp(\"^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$\");\nmodule.exports = function(attrs, extras) {\n    var result = {};\n    if (extras != null) {\n        for(var key in attrs)if (hasOwn.call(attrs, key) && !magic.test(key) && extras.indexOf(key) < 0) result[key] = attrs[key];\n    } else {\n        for(var key in attrs)if (hasOwn.call(attrs, key) && !magic.test(key)) result[key] = attrs[key];\n    }\n    return result;\n};\n\n},{\"ea1ad0c0d427959\":\"1qiWM\"}],\"fepoz\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nvar _controlButtons = require(\"./ControlButtons\");\nvar _controlButtonsDefault = parcelHelpers.interopDefault(_controlButtons);\nvar _modal = require(\"./Modal\");\nvar _modalDefault = parcelHelpers.interopDefault(_modal);\nvar _gameEndContent = require(\"./GameEndContent\");\nvar _gameEndContentDefault = parcelHelpers.interopDefault(_gameEndContent);\nvar _helpContent = require(\"./HelpContent\");\nvar _helpContentDefault = parcelHelpers.interopDefault(_helpContent);\nvar _keyboard = require(\"./Keyboard\");\nvar _keyboardDefault = parcelHelpers.interopDefault(_keyboard);\nvar _row = require(\"./Row\");\nvar _rowDefault = parcelHelpers.interopDefault(_row);\nvar _util = require(\"../Util\");\nvar _utilDefault = parcelHelpers.interopDefault(_util);\nclass MainPage {\n    static #_ = this.MAX_ROWS = 6;\n    static #_1 = this.HELP_ICON = `<svg width=\"80px\" height=\"30px\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M0 10C0 4.478 4.478 0 10 0c5.523 0 10 4.478 10 10 0 5.523-4.477 10-10 10-5.522 0-10-4.477-10-10zm11.125 2.002H8.989v-.141c.01-1.966.492-2.254 1.374-2.782.093-.056.19-.114.293-.178.73-.459 1.292-1.038 1.292-1.883 0-.948-.743-1.564-1.666-1.564-.851 0-1.657.398-1.712 1.533H6.304C6.364 4.693 8.18 3.5 10.294 3.5c2.306 0 3.894 1.447 3.894 3.488 0 1.382-.695 2.288-1.805 2.952l-.238.144c-.79.475-1.009.607-1.02 1.777V12zm.17 3.012a1.344 1.344 0 01-1.327 1.328 1.32 1.32 0 01-1.328-1.328 1.318 1.318 0 011.328-1.316c.712 0 1.322.592 1.328 1.316z\" fill=\"#5C5F62\"/></svg>`;\n    constructor(){\n        // Init components\n        this.keyboard = new (0, _keyboardDefault.default)(this.setValue.bind(this));\n        this.controlButtons = new (0, _controlButtonsDefault.default)(this.onEnter.bind(this), this.onBackspace.bind(this));\n        const scaleNumber = Number((0, _mithrilDefault.default).route.param(\"id\"));\n        this.reset(Number.isInteger(scaleNumber) ? scaleNumber : null);\n        this.modal = new (0, _modalDefault.default)(this.closeModal.bind(this));\n        // Debug\n        window.M = this;\n    }\n    reset(scaleNumber = null) {\n        this.rows = new Array(MainPage.MAX_ROWS).fill().map(()=>new (0, _rowDefault.default)());\n        this.isFinished = false;\n        this.currentRowIndex = 0;\n        this.scaleNumber = scaleNumber === null ? (0, _utilDefault.default).getRandomScaleNumber() : scaleNumber;\n        this.answerScale = (0, _utilDefault.default).getScaleByNumber(this.scaleNumber);\n        this.modalContent = null;\n        (0, _mithrilDefault.default).redraw();\n    }\n    openHelpModal() {\n        this.modalContent = (0, _helpContentDefault.default);\n    }\n    openEndGameModal() {\n        // Add delay to show animation\n        window.setTimeout(()=>{\n            this.modalContent = new (0, _gameEndContentDefault.default)(this.reset.bind(this), this.answerScale.name, this.getShareable());\n            (0, _mithrilDefault.default).redraw();\n        }, 2500);\n    }\n    closeModal() {\n        this.modalContent = null;\n    }\n    onEnter() {\n        if (this.isFinished) return;\n        if (!this.currentRow().isFilled()) return;\n        this.submitGuess();\n    }\n    onBackspace() {\n        if (this.isFinished) return;\n        this.currentRow().clearLast();\n    }\n    currentRow() {\n        return this.rows[this.currentRowIndex];\n    }\n    getShareable() {\n        const rows = this.rows.slice(0, this.currentRowIndex);\n        const fullResults = rows.map((row)=>row.compareWithAnswer(this.answerScale));\n        return (0, _utilDefault.default).resultsToShareable(fullResults, this.scaleNumber);\n    }\n    submitGuess() {\n        const results = this.currentRow().compareWithAnswer(this.answerScale);\n        this.currentRow().displayResults(results);\n        this.currentRowIndex++;\n        (0, _mithrilDefault.default).redraw();\n        if (results.every((x)=>x === \"C\")) {\n            this.isFinished = true;\n            this.openEndGameModal();\n        } else if (this.currentRowIndex >= MainPage.MAX_ROWS) {\n            this.isFinished = true;\n            this.openEndGameModal();\n        }\n    }\n    setValue(value) {\n        if (this.isFinished) return;\n        this.currentRow().setValue(value);\n        (0, _mithrilDefault.default).redraw();\n    }\n    view() {\n        return [\n            (0, _mithrilDefault.default)(\"div#nav\", [\n                (0, _mithrilDefault.default)(\"h1\", \"Scale-dle\"),\n                (0, _mithrilDefault.default)(\"div#help\", {\n                    onclick: ()=>{\n                        this.openHelpModal();\n                    }\n                }, (0, _mithrilDefault.default).trust(MainPage.HELP_ICON))\n            ]),\n            this.modalContent ? (0, _mithrilDefault.default)(this.modal, (0, _mithrilDefault.default)(this.modalContent)) : null,\n            (0, _mithrilDefault.default)(\"div.grid\", this.rows.map((row)=>(0, _mithrilDefault.default)(row))),\n            (0, _mithrilDefault.default)(this.controlButtons),\n            (0, _mithrilDefault.default)(this.keyboard)\n        ];\n    }\n}\nexports.default = MainPage;\n\n},{\"mithril\":\"13PaA\",\"./ControlButtons\":\"9DvoC\",\"./Modal\":\"hw4GM\",\"./Keyboard\":\"iTjWi\",\"./Row\":\"agpaG\",\"../Util\":\"dMJ8U\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\",\"./GameEndContent\":\"f4MXy\",\"./HelpContent\":\"anOXe\"}],\"9DvoC\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nclass ControlButtons {\n    constructor(onEnter, onBackspace){\n        this.onEnter = onEnter;\n        this.onBackspace = onBackspace;\n    }\n    view() {\n        return (0, _mithrilDefault.default)(\"div#control\", [\n            (0, _mithrilDefault.default)(\"div.button\", {\n                onclick: this.onEnter\n            }, \"enter\"),\n            (0, _mithrilDefault.default)(\"div.button\", {\n                onclick: this.onBackspace\n            }, \"\\u232B\")\n        ]);\n    }\n}\nexports.default = ControlButtons;\n\n},{\"mithril\":\"13PaA\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"k3151\":[function(require,module,exports) {\nexports.interopDefault = function(a) {\n    return a && a.__esModule ? a : {\n        default: a\n    };\n};\nexports.defineInteropFlag = function(a) {\n    Object.defineProperty(a, \"__esModule\", {\n        value: true\n    });\n};\nexports.exportAll = function(source, dest) {\n    Object.keys(source).forEach(function(key) {\n        if (key === \"default\" || key === \"__esModule\" || dest.hasOwnProperty(key)) return;\n        Object.defineProperty(dest, key, {\n            enumerable: true,\n            get: function() {\n                return source[key];\n            }\n        });\n    });\n    return dest;\n};\nexports.export = function(dest, destName, get) {\n    Object.defineProperty(dest, destName, {\n        enumerable: true,\n        get: get\n    });\n};\n\n},{}],\"hw4GM\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nclass Modal {\n    constructor(onclose){\n        this.onclose = onclose;\n    }\n    view(vnode) {\n        return (0, _mithrilDefault.default)(\"div.modal\", [\n            (0, _mithrilDefault.default)(\"span.close\", {\n                onclick: this.onclose\n            }, \"X\"),\n            (0, _mithrilDefault.default)(\"div.content\", vnode.children)\n        ]);\n    }\n}\nexports.default = Modal;\n\n},{\"mithril\":\"13PaA\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"iTjWi\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nvar _util = require(\"../Util\");\nvar _utilDefault = parcelHelpers.interopDefault(_util);\nclass Keyboard {\n    constructor(callback){\n        this.callback = callback;\n    }\n    initShapes(ctx) {\n        const width = ctx.canvas.clientWidth;\n        const height = ctx.canvas.clientHeight;\n        const keyWidth = width / 7;\n        const offsets = [\n            2 / 3,\n            1 + 2 / 3,\n            3 + 2 / 3,\n            4 + 2 / 3,\n            5 + 2 / 3\n        ];\n        this.blackKeys = offsets.map((offset)=>[\n                offset * keyWidth,\n                0,\n                2 / 3 * keyWidth,\n                height / 2\n            ]);\n        this.whiteKeys = Array(7).fill().map((_, i)=>[\n                i * keyWidth,\n                0,\n                keyWidth,\n                height\n            ]);\n    }\n    _inBounds(px, py, x, y, w, h) {\n        return px >= x && py >= y && px <= x + w && py <= y + h;\n    }\n    onclick(e) {\n        const px = e.offsetX;\n        const py = e.offsetY;\n        let index = this.blackKeys.findIndex(([x, y, w, h])=>this._inBounds(px, py, x, y, w, h));\n        if (index !== -1) return this.callback((0, _utilDefault.default).BLACK_NOTES[index]);\n        index = this.whiteKeys.findIndex(([x, y, w, h])=>this._inBounds(px, py, x, y, w, h));\n        if (index !== -1) return this.callback((0, _utilDefault.default).WHITE_NOTES[index]);\n    }\n    drawKeyboard(ctx) {\n        this.initShapes(ctx);\n        ctx.fillStyle = \"white\";\n        ctx.textAlign = \"center\";\n        ctx.fillRect(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight);\n        // Draw white keys (only right edge)\n        ctx.fillStyle = \"black\";\n        this.whiteKeys.forEach(([x, y, w, h], i)=>{\n            // Draw right edge\n            ctx.beginPath();\n            ctx.moveTo(x + w, 0);\n            ctx.lineTo(x + w, y + h);\n            ctx.stroke();\n            // Draw letter\n            ctx.font = \"24px sans-serif\";\n            ctx.fillText((0, _utilDefault.default).WHITE_NOTES[i], x + w / 2, h - 30);\n        });\n        // Draw black keys\n        this.blackKeys.forEach(([x, y, w, h], i)=>{\n            ctx.fillStyle = \"black\";\n            ctx.fillRect(x, y, w, h);\n            // Draw letter\n            ctx.fillStyle = \"white\";\n            ctx.font = \"16px sans-serif\";\n            ctx.fillText((0, _utilDefault.default).BLACK_NOTES[i], x + w / 2, 30);\n            ctx.fillText((0, _utilDefault.default).BLACK_NOTES_FLAT[i], x + w / 2, 60);\n        });\n    }\n    view() {\n        const attrs = {\n            oncreate: (vnode)=>{\n                const ctx = vnode.dom.getContext(\"2d\");\n                this.drawKeyboard(ctx);\n                vnode.dom.addEventListener(\"click\", this.onclick.bind(this));\n            }\n        };\n        return (0, _mithrilDefault.default)(\"div#canvas-wrapper\", [\n            (0, _mithrilDefault.default)(\"canvas[width=400][height=180]\", attrs)\n        ]);\n    }\n}\nexports.default = Keyboard;\n\n},{\"mithril\":\"13PaA\",\"../Util\":\"dMJ8U\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"dMJ8U\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _tonal = require(\"tonal\");\nclass Util {\n    static #_ = this.SCALE_TYPES = [\n        \"major\",\n        \"minor\",\n        \"harmonic minor\",\n        \"melodic minor\",\n        \"dorian\",\n        \"phrygian\",\n        \"lydian\",\n        \"mixolydian\",\n        \"locrian\",\n        \"pentatonic\",\n        \"whole-half diminished\",\n        \"half-whole diminished\"\n    ];\n    static #_1 = this.ROOTS = [\n        \"A\",\n        \"Bb\",\n        \"B\",\n        \"C\",\n        \"C#\",\n        \"D\",\n        \"Eb\",\n        \"E\",\n        \"F\",\n        \"F#\",\n        \"G\",\n        \"Ab\"\n    ];\n    static #_2 = this.BLACK_NOTES = [\n        \"C#\",\n        \"D#\",\n        \"F#\",\n        \"G#\",\n        \"A#\"\n    ];\n    static #_3 = this.BLACK_NOTES_FLAT = [\n        \"Db\",\n        \"Eb\",\n        \"Gb\",\n        \"Ab\",\n        \"Bb\"\n    ];\n    static #_4 = this.WHITE_NOTES = [\n        \"C\",\n        \"D\",\n        \"E\",\n        \"F\",\n        \"G\",\n        \"A\",\n        \"B\"\n    ];\n    static getRandomScaleNumber() {\n        // TODO: use the proper algorithm rather than assuming 12 roots and scale types\n        return Math.floor(Math.random() * 144);\n    }\n    static getScaleByNumber(i) {\n        // TODO: use the proper algorithm rather than assuming 12 roots and scale types\n        const root = this.ROOTS[i % 12];\n        const scaleType = this.SCALE_TYPES[Math.floor(i / 12)];\n        const octave = 5; // Doesn't really matter\n        return (0, _tonal.Scale).get(`${root}${octave} ${scaleType}`);\n    }\n    // Get midi array\n    static toMidiArray(notes) {\n        return notes.map((noteName)=>(0, _tonal.Note).get(noteName).midi % 12);\n    }\n    // Returns an array of results:\n    // \"C\": correct,\n    // \"W\": wrong spot,\n    // \"X\": does not exist\n    static calculateGuess(guess, rawAnswer) {\n        // Normalize correct to be same length as guess\n        const answer = rawAnswer.concat(rawAnswer).slice(0, guess.length);\n        // Make map of answer to track note usage\n        const answerMap = {};\n        answer.forEach((note)=>{\n            if (!(note in answerMap)) answerMap[note] = 0;\n            answerMap[note]++;\n        });\n        const result = Array(guess.length);\n        // First pass to find correct notes\n        guess.forEach((note, i)=>{\n            if (note === answer[i]) {\n                result[i] = \"C\";\n                answerMap[note]--;\n            }\n        });\n        // Second pass to figure out the other results\n        guess.forEach((note, i)=>{\n            if (result[i] === \"C\") return;\n            if (answerMap[note]) {\n                result[i] = \"W\";\n                answerMap[note]--;\n            } else result[i] = \"X\";\n        });\n        return result;\n    }\n    static #_5 = this.EMOJI_MAP = {\n        \"C\": \"\\uD83D\\uDFE9\",\n        \"W\": \"\\uD83D\\uDFE8\",\n        \"X\": \"\\u2B1B\"\n    };\n    static #_6 = this.URL = \"seanyeh.github.io/scaledle\";\n    static resultsToShareable(resultsList, puzzleNumber) {\n        const tries = resultsList.length;\n        const resultsStr = resultsList.map((results)=>`${results.map((x)=>Util.EMOJI_MAP[x]).join(\"\")}\\n`).join(\"\");\n        return `Scale-dle #${puzzleNumber} ${tries}/6\\n${resultsStr}\\n${Util.URL}`;\n    }\n    static normalizeScaleName(scaleName) {\n        // Remove octave from name\n        let newName = scaleName.replace(/[0-9]/, \"\");\n        // Rename diminished scales to octatonic\n        if (newName.includes(\"half-whole diminished\")) newName = newName.replace(\"half-whole diminished\", \"octatonic (half-whole)\");\n        else if (newName.includes(\"diminished\")) newName = newName.replace(\"diminished\", \"octatonic (whole-half)\");\n        return newName;\n    }\n}\nexports.default = Util;\n\n},{\"tonal\":\"ekC5i\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"ekC5i\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"AbcNotation\", ()=>(0, _abcNotationDefault.default));\nparcelHelpers.export(exports, \"Array\", ()=>_array);\nparcelHelpers.export(exports, \"Chord\", ()=>(0, _chordDefault.default));\nparcelHelpers.export(exports, \"ChordDictionary\", ()=>ChordDictionary);\nparcelHelpers.export(exports, \"ChordType\", ()=>(0, _chordTypeDefault.default));\nparcelHelpers.export(exports, \"Collection\", ()=>(0, _collectionDefault.default));\nparcelHelpers.export(exports, \"Core\", ()=>_core);\nparcelHelpers.export(exports, \"DurationValue\", ()=>(0, _durationValueDefault.default));\nparcelHelpers.export(exports, \"Interval\", ()=>(0, _intervalDefault.default));\nparcelHelpers.export(exports, \"Key\", ()=>(0, _keyDefault.default));\nparcelHelpers.export(exports, \"Midi\", ()=>(0, _midiDefault.default));\nparcelHelpers.export(exports, \"Mode\", ()=>(0, _modeDefault.default));\nparcelHelpers.export(exports, \"Note\", ()=>(0, _noteDefault.default));\nparcelHelpers.export(exports, \"PcSet\", ()=>PcSet);\nparcelHelpers.export(exports, \"Pcset\", ()=>(0, _pcsetDefault.default));\nparcelHelpers.export(exports, \"Progression\", ()=>(0, _progressionDefault.default));\nparcelHelpers.export(exports, \"Range\", ()=>(0, _rangeDefault.default));\nparcelHelpers.export(exports, \"RomanNumeral\", ()=>(0, _romanNumeralDefault.default));\nparcelHelpers.export(exports, \"Scale\", ()=>(0, _scaleDefault.default));\nparcelHelpers.export(exports, \"ScaleDictionary\", ()=>ScaleDictionary);\nparcelHelpers.export(exports, \"ScaleType\", ()=>(0, _scaleTypeDefault.default));\nparcelHelpers.export(exports, \"TimeSignature\", ()=>(0, _timeSignatureDefault.default));\nparcelHelpers.export(exports, \"Tonal\", ()=>Tonal);\nvar _abcNotation = require(\"@tonaljs/abc-notation\");\nvar _abcNotationDefault = parcelHelpers.interopDefault(_abcNotation);\nvar _array = require(\"@tonaljs/array\");\nvar _chord = require(\"@tonaljs/chord\");\nvar _chordDefault = parcelHelpers.interopDefault(_chord);\nvar _chordType = require(\"@tonaljs/chord-type\");\nvar _chordTypeDefault = parcelHelpers.interopDefault(_chordType);\nvar _collection = require(\"@tonaljs/collection\");\nvar _collectionDefault = parcelHelpers.interopDefault(_collection);\nvar _core = require(\"@tonaljs/core\");\nvar _durationValue = require(\"@tonaljs/duration-value\");\nvar _durationValueDefault = parcelHelpers.interopDefault(_durationValue);\nvar _interval = require(\"@tonaljs/interval\");\nvar _intervalDefault = parcelHelpers.interopDefault(_interval);\nvar _key = require(\"@tonaljs/key\");\nvar _keyDefault = parcelHelpers.interopDefault(_key);\nvar _midi = require(\"@tonaljs/midi\");\nvar _midiDefault = parcelHelpers.interopDefault(_midi);\nvar _mode = require(\"@tonaljs/mode\");\nvar _modeDefault = parcelHelpers.interopDefault(_mode);\nvar _note = require(\"@tonaljs/note\");\nvar _noteDefault = parcelHelpers.interopDefault(_note);\nvar _pcset = require(\"@tonaljs/pcset\");\nvar _pcsetDefault = parcelHelpers.interopDefault(_pcset);\nvar _progression = require(\"@tonaljs/progression\");\nvar _progressionDefault = parcelHelpers.interopDefault(_progression);\nvar _range = require(\"@tonaljs/range\");\nvar _rangeDefault = parcelHelpers.interopDefault(_range);\nvar _romanNumeral = require(\"@tonaljs/roman-numeral\");\nvar _romanNumeralDefault = parcelHelpers.interopDefault(_romanNumeral);\nvar _scale = require(\"@tonaljs/scale\");\nvar _scaleDefault = parcelHelpers.interopDefault(_scale);\nvar _scaleType = require(\"@tonaljs/scale-type\");\nvar _scaleTypeDefault = parcelHelpers.interopDefault(_scaleType);\nvar _timeSignature = require(\"@tonaljs/time-signature\");\nvar _timeSignatureDefault = parcelHelpers.interopDefault(_timeSignature);\nparcelHelpers.exportAll(_core, exports);\nvar Tonal = _core;\nvar PcSet = (0, _pcsetDefault.default);\nvar ChordDictionary = (0, _chordTypeDefault.default);\nvar ScaleDictionary = (0, _scaleTypeDefault.default);\n\n},{\"@tonaljs/abc-notation\":\"6sQhe\",\"@tonaljs/array\":\"3Q6Mr\",\"@tonaljs/chord\":\"a8kbl\",\"@tonaljs/chord-type\":\"eTgcZ\",\"@tonaljs/collection\":\"1Wcp8\",\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/duration-value\":\"cN44L\",\"@tonaljs/interval\":\"4MaG0\",\"@tonaljs/key\":\"eKRUz\",\"@tonaljs/midi\":\"aFX9F\",\"@tonaljs/mode\":\"9UAbq\",\"@tonaljs/note\":\"7cXrC\",\"@tonaljs/pcset\":\"YAaan\",\"@tonaljs/progression\":\"awNwV\",\"@tonaljs/range\":\"clvSL\",\"@tonaljs/roman-numeral\":\"ajhQU\",\"@tonaljs/scale\":\"gaA4q\",\"@tonaljs/scale-type\":\"dBTmw\",\"@tonaljs/time-signature\":\"3z6jp\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"6sQhe\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"abcToScientificNotation\", ()=>abcToScientificNotation);\nparcelHelpers.export(exports, \"default\", ()=>abc_notation_default);\nparcelHelpers.export(exports, \"distance\", ()=>distance);\nparcelHelpers.export(exports, \"scientificToAbcNotation\", ()=>scientificToAbcNotation);\nparcelHelpers.export(exports, \"tokenize\", ()=>tokenize);\nparcelHelpers.export(exports, \"transpose\", ()=>transpose);\nvar _core = require(\"@tonaljs/core\");\nvar fillStr = (character, times)=>Array(times + 1).join(character);\nvar REGEX = /^(_{1,}|=|\\^{1,}|)([abcdefgABCDEFG])([,']*)$/;\nfunction tokenize(str) {\n    const m = REGEX.exec(str);\n    if (!m) return [\n        \"\",\n        \"\",\n        \"\"\n    ];\n    return [\n        m[1],\n        m[2],\n        m[3]\n    ];\n}\nfunction abcToScientificNotation(str) {\n    const [acc, letter, oct] = tokenize(str);\n    if (letter === \"\") return \"\";\n    let o = 4;\n    for(let i = 0; i < oct.length; i++)o += oct.charAt(i) === \",\" ? -1 : 1;\n    const a = acc[0] === \"_\" ? acc.replace(/_/g, \"b\") : acc[0] === \"^\" ? acc.replace(/\\^/g, \"#\") : \"\";\n    return letter.charCodeAt(0) > 96 ? letter.toUpperCase() + a + (o + 1) : letter + a + o;\n}\nfunction scientificToAbcNotation(str) {\n    const n = (0, _core.note)(str);\n    if (n.empty || !n.oct && n.oct !== 0) return \"\";\n    const { letter, acc, oct } = n;\n    const a = acc[0] === \"b\" ? acc.replace(/b/g, \"_\") : acc.replace(/#/g, \"^\");\n    const l = oct > 4 ? letter.toLowerCase() : letter;\n    const o = oct === 5 ? \"\" : oct > 4 ? fillStr(\"'\", oct - 5) : fillStr(\",\", 4 - oct);\n    return a + l + o;\n}\nfunction transpose(note2, interval) {\n    return scientificToAbcNotation((0, _core.transpose)(abcToScientificNotation(note2), interval));\n}\nfunction distance(from, to) {\n    return (0, _core.distance)(abcToScientificNotation(from), abcToScientificNotation(to));\n}\nvar abc_notation_default = {\n    abcToScientificNotation,\n    scientificToAbcNotation,\n    tokenize,\n    transpose,\n    distance\n};\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"bWVEi\":[function(require,module,exports) {\n// src/utils.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"accToAlt\", ()=>accToAlt);\nparcelHelpers.export(exports, \"altToAcc\", ()=>altToAcc);\nparcelHelpers.export(exports, \"coordToInterval\", ()=>coordToInterval);\nparcelHelpers.export(exports, \"coordToNote\", ()=>coordToNote);\nparcelHelpers.export(exports, \"decode\", ()=>decode);\nparcelHelpers.export(exports, \"deprecate\", ()=>deprecate);\nparcelHelpers.export(exports, \"distance\", ()=>distance);\nparcelHelpers.export(exports, \"encode\", ()=>encode);\nparcelHelpers.export(exports, \"fillStr\", ()=>fillStr);\nparcelHelpers.export(exports, \"interval\", ()=>interval);\nparcelHelpers.export(exports, \"isNamed\", ()=>isNamed);\nparcelHelpers.export(exports, \"isPitch\", ()=>isPitch);\nparcelHelpers.export(exports, \"note\", ()=>note);\nparcelHelpers.export(exports, \"stepToLetter\", ()=>stepToLetter);\nparcelHelpers.export(exports, \"tokenizeInterval\", ()=>tokenizeInterval);\nparcelHelpers.export(exports, \"tokenizeNote\", ()=>tokenizeNote);\nparcelHelpers.export(exports, \"tonicIntervalsTransposer\", ()=>tonicIntervalsTransposer);\nparcelHelpers.export(exports, \"transpose\", ()=>transpose);\nvar fillStr = (s, n)=>Array(Math.abs(n) + 1).join(s);\nfunction deprecate(original, alternative, fn) {\n    return function(...args) {\n        console.warn(`${original} is deprecated. Use ${alternative}.`);\n        return fn.apply(this, args);\n    };\n}\n// src/named.ts\nfunction isNamed(src) {\n    return src !== null && typeof src === \"object\" && typeof src.name === \"string\" ? true : false;\n}\n// src/pitch.ts\nfunction isPitch(pitch) {\n    return pitch !== null && typeof pitch === \"object\" && typeof pitch.step === \"number\" && typeof pitch.alt === \"number\" ? true : false;\n}\nvar FIFTHS = [\n    0,\n    2,\n    4,\n    -1,\n    1,\n    3,\n    5\n];\nvar STEPS_TO_OCTS = FIFTHS.map((fifths)=>Math.floor(fifths * 7 / 12));\nfunction encode(pitch) {\n    const { step, alt, oct, dir = 1 } = pitch;\n    const f = FIFTHS[step] + 7 * alt;\n    if (oct === void 0) return [\n        dir * f\n    ];\n    const o = oct - STEPS_TO_OCTS[step] - 4 * alt;\n    return [\n        dir * f,\n        dir * o\n    ];\n}\nvar FIFTHS_TO_STEPS = [\n    3,\n    0,\n    4,\n    1,\n    5,\n    2,\n    6\n];\nfunction decode(coord) {\n    const [f, o, dir] = coord;\n    const step = FIFTHS_TO_STEPS[unaltered(f)];\n    const alt = Math.floor((f + 1) / 7);\n    if (o === void 0) return {\n        step,\n        alt,\n        dir\n    };\n    const oct = o + 4 * alt + STEPS_TO_OCTS[step];\n    return {\n        step,\n        alt,\n        oct,\n        dir\n    };\n}\nfunction unaltered(f) {\n    const i = (f + 1) % 7;\n    return i < 0 ? 7 + i : i;\n}\n// src/note.ts\nvar NoNote = {\n    empty: true,\n    name: \"\",\n    pc: \"\",\n    acc: \"\"\n};\nvar cache = /* @__PURE__ */ new Map();\nvar stepToLetter = (step)=>\"CDEFGAB\".charAt(step);\nvar altToAcc = (alt)=>alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt);\nvar accToAlt = (acc)=>acc[0] === \"b\" ? -acc.length : acc.length;\nfunction note(src) {\n    const stringSrc = JSON.stringify(src);\n    const cached = cache.get(stringSrc);\n    if (cached) return cached;\n    const value = typeof src === \"string\" ? parse(src) : isPitch(src) ? note(pitchName(src)) : isNamed(src) ? note(src.name) : NoNote;\n    cache.set(stringSrc, value);\n    return value;\n}\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\nfunction tokenizeNote(str) {\n    const m = REGEX.exec(str);\n    return [\n        m[1].toUpperCase(),\n        m[2].replace(/x/g, \"##\"),\n        m[3],\n        m[4]\n    ];\n}\nfunction coordToNote(noteCoord) {\n    return note(decode(noteCoord));\n}\nvar mod = (n, m)=>(n % m + m) % m;\nvar SEMI = [\n    0,\n    2,\n    4,\n    5,\n    7,\n    9,\n    11\n];\nfunction parse(noteName) {\n    const tokens = tokenizeNote(noteName);\n    if (tokens[0] === \"\" || tokens[3] !== \"\") return NoNote;\n    const letter = tokens[0];\n    const acc = tokens[1];\n    const octStr = tokens[2];\n    const step = (letter.charCodeAt(0) + 3) % 7;\n    const alt = accToAlt(acc);\n    const oct = octStr.length ? +octStr : void 0;\n    const coord = encode({\n        step,\n        alt,\n        oct\n    });\n    const name = letter + acc + octStr;\n    const pc = letter + acc;\n    const chroma = (SEMI[step] + alt + 120) % 12;\n    const height = oct === void 0 ? mod(SEMI[step] + alt, 12) - 1188 : SEMI[step] + alt + 12 * (oct + 1);\n    const midi = height >= 0 && height <= 127 ? height : null;\n    const freq = oct === void 0 ? null : Math.pow(2, (height - 69) / 12) * 440;\n    return {\n        empty: false,\n        acc,\n        alt,\n        chroma,\n        coord,\n        freq,\n        height,\n        letter,\n        midi,\n        name,\n        oct,\n        pc,\n        step\n    };\n}\nfunction pitchName(props) {\n    const { step, alt, oct } = props;\n    const letter = stepToLetter(step);\n    if (!letter) return \"\";\n    const pc = letter + altToAcc(alt);\n    return oct || oct === 0 ? pc + oct : pc;\n}\n// src/interval.ts\nvar NoInterval = {\n    empty: true,\n    name: \"\",\n    acc: \"\"\n};\nvar INTERVAL_TONAL_REGEX = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\nvar INTERVAL_SHORTHAND_REGEX = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\nvar REGEX2 = new RegExp(\"^\" + INTERVAL_TONAL_REGEX + \"|\" + INTERVAL_SHORTHAND_REGEX + \"$\");\nfunction tokenizeInterval(str) {\n    const m = REGEX2.exec(`${str}`);\n    if (m === null) return [\n        \"\",\n        \"\"\n    ];\n    return m[1] ? [\n        m[1],\n        m[2]\n    ] : [\n        m[4],\n        m[3]\n    ];\n}\nvar cache2 = {};\nfunction interval(src) {\n    return typeof src === \"string\" ? cache2[src] || (cache2[src] = parse2(src)) : isPitch(src) ? interval(pitchName2(src)) : isNamed(src) ? interval(src.name) : NoInterval;\n}\nvar SIZES = [\n    0,\n    2,\n    4,\n    5,\n    7,\n    9,\n    11\n];\nvar TYPES = \"PMMPPMM\";\nfunction parse2(str) {\n    const tokens = tokenizeInterval(str);\n    if (tokens[0] === \"\") return NoInterval;\n    const num = +tokens[0];\n    const q = tokens[1];\n    const step = (Math.abs(num) - 1) % 7;\n    const t = TYPES[step];\n    if (t === \"M\" && q === \"P\") return NoInterval;\n    const type = t === \"M\" ? \"majorable\" : \"perfectable\";\n    const name = \"\" + num + q;\n    const dir = num < 0 ? -1 : 1;\n    const simple = num === 8 || num === -8 ? num : dir * (step + 1);\n    const alt = qToAlt(type, q);\n    const oct = Math.floor((Math.abs(num) - 1) / 7);\n    const semitones = dir * (SIZES[step] + alt + 12 * oct);\n    const chroma = (dir * (SIZES[step] + alt) % 12 + 12) % 12;\n    const coord = encode({\n        step,\n        alt,\n        oct,\n        dir\n    });\n    return {\n        empty: false,\n        name,\n        num,\n        q,\n        step,\n        alt,\n        dir,\n        type,\n        simple,\n        semitones,\n        chroma,\n        coord,\n        oct\n    };\n}\nfunction coordToInterval(coord, forceDescending) {\n    const [f, o = 0] = coord;\n    const isDescending = f * 7 + o * 12 < 0;\n    const ivl = forceDescending || isDescending ? [\n        -f,\n        -o,\n        -1\n    ] : [\n        f,\n        o,\n        1\n    ];\n    return interval(decode(ivl));\n}\nfunction qToAlt(type, q) {\n    return q === \"M\" && type === \"majorable\" || q === \"P\" && type === \"perfectable\" ? 0 : q === \"m\" && type === \"majorable\" ? -1 : /^A+$/.test(q) ? q.length : /^d+$/.test(q) ? -1 * (type === \"perfectable\" ? q.length : q.length + 1) : 0;\n}\nfunction pitchName2(props) {\n    const { step, alt, oct = 0, dir } = props;\n    if (!dir) return \"\";\n    const calcNum = step + 1 + 7 * oct;\n    const num = calcNum === 0 ? step + 1 : calcNum;\n    const d = dir < 0 ? \"-\" : \"\";\n    const type = TYPES[step] === \"M\" ? \"majorable\" : \"perfectable\";\n    const name = d + num + altToQ(type, alt);\n    return name;\n}\nfunction altToQ(type, alt) {\n    if (alt === 0) return type === \"majorable\" ? \"M\" : \"P\";\n    else if (alt === -1 && type === \"majorable\") return \"m\";\n    else if (alt > 0) return fillStr(\"A\", alt);\n    else return fillStr(\"d\", type === \"perfectable\" ? alt : alt + 1);\n}\n// src/distance.ts\nfunction transpose(noteName, intervalName) {\n    const note2 = note(noteName);\n    const intervalCoord = Array.isArray(intervalName) ? intervalName : interval(intervalName).coord;\n    if (note2.empty || !intervalCoord || intervalCoord.length < 2) return \"\";\n    const noteCoord = note2.coord;\n    const tr = noteCoord.length === 1 ? [\n        noteCoord[0] + intervalCoord[0]\n    ] : [\n        noteCoord[0] + intervalCoord[0],\n        noteCoord[1] + intervalCoord[1]\n    ];\n    return coordToNote(tr).name;\n}\nfunction tonicIntervalsTransposer(intervals, tonic) {\n    const len = intervals.length;\n    return (normalized)=>{\n        if (!tonic) return \"\";\n        const index = normalized < 0 ? (len - -normalized % len) % len : normalized % len;\n        const octaves = Math.floor(normalized / len);\n        const root = transpose(tonic, [\n            0,\n            octaves\n        ]);\n        return transpose(root, intervals[index]);\n    };\n}\nfunction distance(fromNote, toNote) {\n    const from = note(fromNote);\n    const to = note(toNote);\n    if (from.empty || to.empty) return \"\";\n    const fcoord = from.coord;\n    const tcoord = to.coord;\n    const fifths = tcoord[0] - fcoord[0];\n    const octs = fcoord.length === 2 && tcoord.length === 2 ? tcoord[1] - fcoord[1] : -Math.floor(fifths * 7 / 12);\n    const forceDescending = to.height === from.height && to.midi !== null && from.midi !== null && from.step > to.step;\n    return coordToInterval([\n        fifths,\n        octs\n    ], forceDescending).name;\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"3Q6Mr\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"compact\", ()=>compact);\nparcelHelpers.export(exports, \"permutations\", ()=>permutations);\nparcelHelpers.export(exports, \"range\", ()=>range);\nparcelHelpers.export(exports, \"rotate\", ()=>rotate);\nparcelHelpers.export(exports, \"shuffle\", ()=>shuffle);\nparcelHelpers.export(exports, \"sortedNoteNames\", ()=>sortedNoteNames);\nparcelHelpers.export(exports, \"sortedUniqNoteNames\", ()=>sortedUniqNoteNames);\nvar _core = require(\"@tonaljs/core\");\nvar isArray = Array.isArray;\nfunction ascR(b, n) {\n    const a = [];\n    for(; n--; a[n] = n + b);\n    return a;\n}\nfunction descR(b, n) {\n    const a = [];\n    for(; n--; a[n] = b - n);\n    return a;\n}\nfunction range(from, to) {\n    return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\n}\nfunction rotate(times, arr) {\n    const len = arr.length;\n    const n = (times % len + len) % len;\n    return arr.slice(n, len).concat(arr.slice(0, n));\n}\nfunction compact(arr) {\n    return arr.filter((n)=>n === 0 || n);\n}\nfunction sortedNoteNames(notes) {\n    const valid = notes.map((n)=>(0, _core.note)(n)).filter((n)=>!n.empty);\n    return valid.sort((a, b)=>a.height - b.height).map((n)=>n.name);\n}\nfunction sortedUniqNoteNames(arr) {\n    return sortedNoteNames(arr).filter((n, i, a)=>i === 0 || n !== a[i - 1]);\n}\nfunction shuffle(arr, rnd = Math.random) {\n    let i;\n    let t;\n    let m = arr.length;\n    while(m){\n        i = Math.floor(rnd() * m--);\n        t = arr[m];\n        arr[m] = arr[i];\n        arr[i] = t;\n    }\n    return arr;\n}\nfunction permutations(arr) {\n    if (arr.length === 0) return [\n        []\n    ];\n    return permutations(arr.slice(1)).reduce((acc, perm)=>{\n        return acc.concat(arr.map((e, pos)=>{\n            const newPerm = perm.slice();\n            newPerm.splice(pos, 0, arr[0]);\n            return newPerm;\n        }));\n    }, []);\n}\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"a8kbl\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"chord\", ()=>chord);\nparcelHelpers.export(exports, \"chordScales\", ()=>chordScales);\nparcelHelpers.export(exports, \"default\", ()=>chord_default);\nparcelHelpers.export(exports, \"degrees\", ()=>degrees);\nparcelHelpers.export(exports, \"detect\", ()=>(0, _chordDetect.detect));\nparcelHelpers.export(exports, \"extended\", ()=>extended);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"getChord\", ()=>getChord);\nparcelHelpers.export(exports, \"reduced\", ()=>reduced);\nparcelHelpers.export(exports, \"steps\", ()=>steps);\nparcelHelpers.export(exports, \"tokenize\", ()=>tokenize);\nparcelHelpers.export(exports, \"transpose\", ()=>transpose);\nvar _chordDetect = require(\"@tonaljs/chord-detect\");\nvar _chordType = require(\"@tonaljs/chord-type\");\nvar _core = require(\"@tonaljs/core\");\nvar _pcset = require(\"@tonaljs/pcset\");\nvar _scaleType = require(\"@tonaljs/scale-type\");\nvar NoChord = {\n    empty: true,\n    name: \"\",\n    symbol: \"\",\n    root: \"\",\n    rootDegree: 0,\n    type: \"\",\n    tonic: null,\n    setNum: NaN,\n    quality: \"Unknown\",\n    chroma: \"\",\n    normalized: \"\",\n    aliases: [],\n    notes: [],\n    intervals: []\n};\nfunction tokenize(name) {\n    const [letter, acc, oct, type] = (0, _core.tokenizeNote)(name);\n    if (letter === \"\") return [\n        \"\",\n        name\n    ];\n    if (letter === \"A\" && type === \"ug\") return [\n        \"\",\n        \"aug\"\n    ];\n    return [\n        letter + acc,\n        oct + type\n    ];\n}\nfunction get(src) {\n    if (src === \"\") return NoChord;\n    if (Array.isArray(src) && src.length === 2) return getChord(src[1], src[0]);\n    else {\n        const [tonic, type] = tokenize(src);\n        const chord2 = getChord(type, tonic);\n        return chord2.empty ? getChord(src) : chord2;\n    }\n}\nfunction getChord(typeName, optionalTonic, optionalRoot) {\n    const type = (0, _chordType.get)(typeName);\n    const tonic = (0, _core.note)(optionalTonic || \"\");\n    const root = (0, _core.note)(optionalRoot || \"\");\n    if (type.empty || optionalTonic && tonic.empty || optionalRoot && root.empty) return NoChord;\n    const rootInterval = (0, _core.distance)(tonic.pc, root.pc);\n    const rootDegree = type.intervals.indexOf(rootInterval) + 1;\n    if (!root.empty && !rootDegree) return NoChord;\n    const intervals = Array.from(type.intervals);\n    for(let i = 1; i < rootDegree; i++){\n        const num = intervals[0][0];\n        const quality = intervals[0][1];\n        const newNum = parseInt(num, 10) + 7;\n        intervals.push(`${newNum}${quality}`);\n        intervals.shift();\n    }\n    const notes = tonic.empty ? [] : intervals.map((i)=>(0, _core.transpose)(tonic, i));\n    typeName = type.aliases.indexOf(typeName) !== -1 ? typeName : type.aliases[0];\n    const symbol = `${tonic.empty ? \"\" : tonic.pc}${typeName}${root.empty || rootDegree <= 1 ? \"\" : \"/\" + root.pc}`;\n    const name = `${optionalTonic ? tonic.pc + \" \" : \"\"}${type.name}${rootDegree > 1 && optionalRoot ? \" over \" + root.pc : \"\"}`;\n    return {\n        ...type,\n        name,\n        symbol,\n        type: type.name,\n        root: root.name,\n        intervals,\n        rootDegree,\n        tonic: tonic.name,\n        notes\n    };\n}\nvar chord = (0, _core.deprecate)(\"Chord.chord\", \"Chord.get\", get);\nfunction transpose(chordName, interval) {\n    const [tonic, type] = tokenize(chordName);\n    if (!tonic) return chordName;\n    return (0, _core.transpose)(tonic, interval) + type;\n}\nfunction chordScales(name) {\n    const s = get(name);\n    const isChordIncluded = (0, _pcset.isSupersetOf)(s.chroma);\n    return (0, _scaleType.all)().filter((scale)=>isChordIncluded(scale.chroma)).map((scale)=>scale.name);\n}\nfunction extended(chordName) {\n    const s = get(chordName);\n    const isSuperset = (0, _pcset.isSupersetOf)(s.chroma);\n    return (0, _chordType.all)().filter((chord2)=>isSuperset(chord2.chroma)).map((chord2)=>s.tonic + chord2.aliases[0]);\n}\nfunction reduced(chordName) {\n    const s = get(chordName);\n    const isSubset = (0, _pcset.isSubsetOf)(s.chroma);\n    return (0, _chordType.all)().filter((chord2)=>isSubset(chord2.chroma)).map((chord2)=>s.tonic + chord2.aliases[0]);\n}\nfunction degrees(chordName) {\n    const { intervals, tonic } = get(chordName);\n    const transpose2 = (0, _core.tonicIntervalsTransposer)(intervals, tonic);\n    return (degree)=>degree ? transpose2(degree > 0 ? degree - 1 : degree) : \"\";\n}\nfunction steps(chordName) {\n    const { intervals, tonic } = get(chordName);\n    return (0, _core.tonicIntervalsTransposer)(intervals, tonic);\n}\nvar chord_default = {\n    getChord,\n    get,\n    detect: (0, _chordDetect.detect),\n    chordScales,\n    extended,\n    reduced,\n    tokenize,\n    transpose,\n    degrees,\n    steps,\n    // deprecate\n    chord\n};\n\n},{\"@tonaljs/chord-detect\":\"8596r\",\"@tonaljs/chord-type\":\"eTgcZ\",\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/pcset\":\"YAaan\",\"@tonaljs/scale-type\":\"dBTmw\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"8596r\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"default\", ()=>chord_detect_default);\nparcelHelpers.export(exports, \"detect\", ()=>detect);\nvar _chordType = require(\"@tonaljs/chord-type\");\nvar _core = require(\"@tonaljs/core\");\nvar _pcset = require(\"@tonaljs/pcset\");\nvar namedSet = (notes)=>{\n    const pcToName = notes.reduce((record, n)=>{\n        const chroma = (0, _core.note)(n).chroma;\n        if (chroma !== void 0) record[chroma] = record[chroma] || (0, _core.note)(n).name;\n        return record;\n    }, {});\n    return (chroma)=>pcToName[chroma];\n};\nfunction detect(source, options = {}) {\n    const notes = source.map((n)=>(0, _core.note)(n).pc).filter((x)=>x);\n    if ((0, _core.note).length === 0) return [];\n    const found = findMatches(notes, 1, options);\n    return found.filter((chord)=>chord.weight).sort((a, b)=>b.weight - a.weight).map((chord)=>chord.name);\n}\nvar BITMASK = {\n    // 3m 000100000000\n    // 3M 000010000000\n    anyThirds: 384,\n    // 5P 000000010000\n    perfectFifth: 16,\n    // 5d 000000100000\n    // 5A 000000001000\n    nonPerfectFifths: 40,\n    anySeventh: 3\n};\nvar testChromaNumber = (bitmask)=>(chromaNumber)=>Boolean(chromaNumber & bitmask);\nvar hasAnyThird = testChromaNumber(BITMASK.anyThirds);\nvar hasPerfectFifth = testChromaNumber(BITMASK.perfectFifth);\nvar hasAnySeventh = testChromaNumber(BITMASK.anySeventh);\nvar hasNonPerfectFifth = testChromaNumber(BITMASK.nonPerfectFifths);\nfunction hasAnyThirdAndPerfectFifthAndAnySeventh(chordType) {\n    const chromaNumber = parseInt(chordType.chroma, 2);\n    return hasAnyThird(chromaNumber) && hasPerfectFifth(chromaNumber) && hasAnySeventh(chromaNumber);\n}\nfunction withPerfectFifth(chroma) {\n    const chromaNumber = parseInt(chroma, 2);\n    return hasNonPerfectFifth(chromaNumber) ? chroma : (chromaNumber | 16).toString(2);\n}\nfunction findMatches(notes, weight, options) {\n    const tonic = notes[0];\n    const tonicChroma = (0, _core.note)(tonic).chroma;\n    const noteName = namedSet(notes);\n    const allModes = (0, _pcset.modes)(notes, false);\n    const found = [];\n    allModes.forEach((mode, index)=>{\n        const modeWithPerfectFifth = options.assumePerfectFifth && withPerfectFifth(mode);\n        const chordTypes = (0, _chordType.all)().filter((chordType)=>{\n            if (options.assumePerfectFifth && hasAnyThirdAndPerfectFifthAndAnySeventh(chordType)) return chordType.chroma === modeWithPerfectFifth;\n            return chordType.chroma === mode;\n        });\n        chordTypes.forEach((chordType)=>{\n            const chordName = chordType.aliases[0];\n            const baseNote = noteName(index);\n            const isInversion = index !== tonicChroma;\n            if (isInversion) found.push({\n                weight: 0.5 * weight,\n                name: `${baseNote}${chordName}/${tonic}`\n            });\n            else found.push({\n                weight: 1 * weight,\n                name: `${baseNote}${chordName}`\n            });\n        });\n    });\n    return found;\n}\nvar chord_detect_default = {\n    detect\n};\n\n},{\"@tonaljs/chord-type\":\"eTgcZ\",\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/pcset\":\"YAaan\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"eTgcZ\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"add\", ()=>add);\nparcelHelpers.export(exports, \"addAlias\", ()=>addAlias);\nparcelHelpers.export(exports, \"all\", ()=>all);\nparcelHelpers.export(exports, \"chordType\", ()=>chordType);\nparcelHelpers.export(exports, \"default\", ()=>chord_type_default);\nparcelHelpers.export(exports, \"entries\", ()=>entries);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"keys\", ()=>keys);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"removeAll\", ()=>removeAll);\nparcelHelpers.export(exports, \"symbols\", ()=>symbols);\nvar _core = require(\"@tonaljs/core\");\nvar _pcset = require(\"@tonaljs/pcset\");\n// data.ts\nvar CHORDS = [\n    // ==Major==\n    [\n        \"1P 3M 5P\",\n        \"major\",\n        \"M ^  maj\"\n    ],\n    [\n        \"1P 3M 5P 7M\",\n        \"major seventh\",\n        \"maj7 \\u0394 ma7 M7 Maj7 ^7\"\n    ],\n    [\n        \"1P 3M 5P 7M 9M\",\n        \"major ninth\",\n        \"maj9 \\u03949 ^9\"\n    ],\n    [\n        \"1P 3M 5P 7M 9M 13M\",\n        \"major thirteenth\",\n        \"maj13 Maj13 ^13\"\n    ],\n    [\n        \"1P 3M 5P 6M\",\n        \"sixth\",\n        \"6 add6 add13 M6\"\n    ],\n    [\n        \"1P 3M 5P 6M 9M\",\n        \"sixth added ninth\",\n        \"6add9 6/9 69 M69\"\n    ],\n    [\n        \"1P 3M 6m 7M\",\n        \"major seventh flat sixth\",\n        \"M7b6 ^7b6\"\n    ],\n    [\n        \"1P 3M 5P 7M 11A\",\n        \"major seventh sharp eleventh\",\n        \"maj#4 \\u0394#4 \\u0394#11 M7#11 ^7#11 maj7#11\"\n    ],\n    // ==Minor==\n    // '''Normal'''\n    [\n        \"1P 3m 5P\",\n        \"minor\",\n        \"m min -\"\n    ],\n    [\n        \"1P 3m 5P 7m\",\n        \"minor seventh\",\n        \"m7 min7 mi7 -7\"\n    ],\n    [\n        \"1P 3m 5P 7M\",\n        \"minor/major seventh\",\n        \"m/ma7 m/maj7 mM7 mMaj7 m/M7 -\\u03947 m\\u0394 -^7\"\n    ],\n    [\n        \"1P 3m 5P 6M\",\n        \"minor sixth\",\n        \"m6 -6\"\n    ],\n    [\n        \"1P 3m 5P 7m 9M\",\n        \"minor ninth\",\n        \"m9 -9\"\n    ],\n    [\n        \"1P 3m 5P 7M 9M\",\n        \"minor/major ninth\",\n        \"mM9 mMaj9 -^9\"\n    ],\n    [\n        \"1P 3m 5P 7m 9M 11P\",\n        \"minor eleventh\",\n        \"m11 -11\"\n    ],\n    [\n        \"1P 3m 5P 7m 9M 13M\",\n        \"minor thirteenth\",\n        \"m13 -13\"\n    ],\n    // '''Diminished'''\n    [\n        \"1P 3m 5d\",\n        \"diminished\",\n        \"dim \\xb0 o\"\n    ],\n    [\n        \"1P 3m 5d 7d\",\n        \"diminished seventh\",\n        \"dim7 \\xb07 o7\"\n    ],\n    [\n        \"1P 3m 5d 7m\",\n        \"half-diminished\",\n        \"m7b5 \\xf8 -7b5 h7 h\"\n    ],\n    // ==Dominant/Seventh==\n    // '''Normal'''\n    [\n        \"1P 3M 5P 7m\",\n        \"dominant seventh\",\n        \"7 dom\"\n    ],\n    [\n        \"1P 3M 5P 7m 9M\",\n        \"dominant ninth\",\n        \"9\"\n    ],\n    [\n        \"1P 3M 5P 7m 9M 13M\",\n        \"dominant thirteenth\",\n        \"13\"\n    ],\n    [\n        \"1P 3M 5P 7m 11A\",\n        \"lydian dominant seventh\",\n        \"7#11 7#4\"\n    ],\n    // '''Altered'''\n    [\n        \"1P 3M 5P 7m 9m\",\n        \"dominant flat ninth\",\n        \"7b9\"\n    ],\n    [\n        \"1P 3M 5P 7m 9A\",\n        \"dominant sharp ninth\",\n        \"7#9\"\n    ],\n    [\n        \"1P 3M 7m 9m\",\n        \"altered\",\n        \"alt7\"\n    ],\n    // '''Suspended'''\n    [\n        \"1P 4P 5P\",\n        \"suspended fourth\",\n        \"sus4 sus\"\n    ],\n    [\n        \"1P 2M 5P\",\n        \"suspended second\",\n        \"sus2\"\n    ],\n    [\n        \"1P 4P 5P 7m\",\n        \"suspended fourth seventh\",\n        \"7sus4 7sus\"\n    ],\n    [\n        \"1P 5P 7m 9M 11P\",\n        \"eleventh\",\n        \"11\"\n    ],\n    [\n        \"1P 4P 5P 7m 9m\",\n        \"suspended fourth flat ninth\",\n        \"b9sus phryg 7b9sus 7b9sus4\"\n    ],\n    // ==Other==\n    [\n        \"1P 5P\",\n        \"fifth\",\n        \"5\"\n    ],\n    [\n        \"1P 3M 5A\",\n        \"augmented\",\n        \"aug + +5 ^#5\"\n    ],\n    [\n        \"1P 3m 5A\",\n        \"minor augmented\",\n        \"m#5 -#5 m+\"\n    ],\n    [\n        \"1P 3M 5A 7M\",\n        \"augmented seventh\",\n        \"maj7#5 maj7+5 +maj7 ^7#5\"\n    ],\n    [\n        \"1P 3M 5P 7M 9M 11A\",\n        \"major sharp eleventh (lydian)\",\n        \"maj9#11 \\u03949#11 ^9#11\"\n    ],\n    // ==Legacy==\n    [\n        \"1P 2M 4P 5P\",\n        \"\",\n        \"sus24 sus4add9\"\n    ],\n    [\n        \"1P 3M 5A 7M 9M\",\n        \"\",\n        \"maj9#5 Maj9#5\"\n    ],\n    [\n        \"1P 3M 5A 7m\",\n        \"\",\n        \"7#5 +7 7+ 7aug aug7\"\n    ],\n    [\n        \"1P 3M 5A 7m 9A\",\n        \"\",\n        \"7#5#9 7#9#5 7alt\"\n    ],\n    [\n        \"1P 3M 5A 7m 9M\",\n        \"\",\n        \"9#5 9+\"\n    ],\n    [\n        \"1P 3M 5A 7m 9M 11A\",\n        \"\",\n        \"9#5#11\"\n    ],\n    [\n        \"1P 3M 5A 7m 9m\",\n        \"\",\n        \"7#5b9 7b9#5\"\n    ],\n    [\n        \"1P 3M 5A 7m 9m 11A\",\n        \"\",\n        \"7#5b9#11\"\n    ],\n    [\n        \"1P 3M 5A 9A\",\n        \"\",\n        \"+add#9\"\n    ],\n    [\n        \"1P 3M 5A 9M\",\n        \"\",\n        \"M#5add9 +add9\"\n    ],\n    [\n        \"1P 3M 5P 6M 11A\",\n        \"\",\n        \"M6#11 M6b5 6#11 6b5\"\n    ],\n    [\n        \"1P 3M 5P 6M 7M 9M\",\n        \"\",\n        \"M7add13\"\n    ],\n    [\n        \"1P 3M 5P 6M 9M 11A\",\n        \"\",\n        \"69#11\"\n    ],\n    [\n        \"1P 3m 5P 6M 9M\",\n        \"\",\n        \"m69 -69\"\n    ],\n    [\n        \"1P 3M 5P 6m 7m\",\n        \"\",\n        \"7b6\"\n    ],\n    [\n        \"1P 3M 5P 7M 9A 11A\",\n        \"\",\n        \"maj7#9#11\"\n    ],\n    [\n        \"1P 3M 5P 7M 9M 11A 13M\",\n        \"\",\n        \"M13#11 maj13#11 M13+4 M13#4\"\n    ],\n    [\n        \"1P 3M 5P 7M 9m\",\n        \"\",\n        \"M7b9\"\n    ],\n    [\n        \"1P 3M 5P 7m 11A 13m\",\n        \"\",\n        \"7#11b13 7b5b13\"\n    ],\n    [\n        \"1P 3M 5P 7m 13M\",\n        \"\",\n        \"7add6 67 7add13\"\n    ],\n    [\n        \"1P 3M 5P 7m 9A 11A\",\n        \"\",\n        \"7#9#11 7b5#9 7#9b5\"\n    ],\n    [\n        \"1P 3M 5P 7m 9A 11A 13M\",\n        \"\",\n        \"13#9#11\"\n    ],\n    [\n        \"1P 3M 5P 7m 9A 11A 13m\",\n        \"\",\n        \"7#9#11b13\"\n    ],\n    [\n        \"1P 3M 5P 7m 9A 13M\",\n        \"\",\n        \"13#9\"\n    ],\n    [\n        \"1P 3M 5P 7m 9A 13m\",\n        \"\",\n        \"7#9b13\"\n    ],\n    [\n        \"1P 3M 5P 7m 9M 11A\",\n        \"\",\n        \"9#11 9+4 9#4\"\n    ],\n    [\n        \"1P 3M 5P 7m 9M 11A 13M\",\n        \"\",\n        \"13#11 13+4 13#4\"\n    ],\n    [\n        \"1P 3M 5P 7m 9M 11A 13m\",\n        \"\",\n        \"9#11b13 9b5b13\"\n    ],\n    [\n        \"1P 3M 5P 7m 9m 11A\",\n        \"\",\n        \"7b9#11 7b5b9 7b9b5\"\n    ],\n    [\n        \"1P 3M 5P 7m 9m 11A 13M\",\n        \"\",\n        \"13b9#11\"\n    ],\n    [\n        \"1P 3M 5P 7m 9m 11A 13m\",\n        \"\",\n        \"7b9b13#11 7b9#11b13 7b5b9b13\"\n    ],\n    [\n        \"1P 3M 5P 7m 9m 13M\",\n        \"\",\n        \"13b9\"\n    ],\n    [\n        \"1P 3M 5P 7m 9m 13m\",\n        \"\",\n        \"7b9b13\"\n    ],\n    [\n        \"1P 3M 5P 7m 9m 9A\",\n        \"\",\n        \"7b9#9\"\n    ],\n    [\n        \"1P 3M 5P 9M\",\n        \"\",\n        \"Madd9 2 add9 add2\"\n    ],\n    [\n        \"1P 3M 5P 9m\",\n        \"\",\n        \"Maddb9\"\n    ],\n    [\n        \"1P 3M 5d\",\n        \"\",\n        \"Mb5\"\n    ],\n    [\n        \"1P 3M 5d 6M 7m 9M\",\n        \"\",\n        \"13b5\"\n    ],\n    [\n        \"1P 3M 5d 7M\",\n        \"\",\n        \"M7b5\"\n    ],\n    [\n        \"1P 3M 5d 7M 9M\",\n        \"\",\n        \"M9b5\"\n    ],\n    [\n        \"1P 3M 5d 7m\",\n        \"\",\n        \"7b5\"\n    ],\n    [\n        \"1P 3M 5d 7m 9M\",\n        \"\",\n        \"9b5\"\n    ],\n    [\n        \"1P 3M 7m\",\n        \"\",\n        \"7no5\"\n    ],\n    [\n        \"1P 3M 7m 13m\",\n        \"\",\n        \"7b13\"\n    ],\n    [\n        \"1P 3M 7m 9M\",\n        \"\",\n        \"9no5\"\n    ],\n    [\n        \"1P 3M 7m 9M 13M\",\n        \"\",\n        \"13no5\"\n    ],\n    [\n        \"1P 3M 7m 9M 13m\",\n        \"\",\n        \"9b13\"\n    ],\n    [\n        \"1P 3m 4P 5P\",\n        \"\",\n        \"madd4\"\n    ],\n    [\n        \"1P 3m 5P 6m 7M\",\n        \"\",\n        \"mMaj7b6\"\n    ],\n    [\n        \"1P 3m 5P 6m 7M 9M\",\n        \"\",\n        \"mMaj9b6\"\n    ],\n    [\n        \"1P 3m 5P 7m 11P\",\n        \"\",\n        \"m7add11 m7add4\"\n    ],\n    [\n        \"1P 3m 5P 9M\",\n        \"\",\n        \"madd9\"\n    ],\n    [\n        \"1P 3m 5d 6M 7M\",\n        \"\",\n        \"o7M7\"\n    ],\n    [\n        \"1P 3m 5d 7M\",\n        \"\",\n        \"oM7\"\n    ],\n    [\n        \"1P 3m 6m 7M\",\n        \"\",\n        \"mb6M7\"\n    ],\n    [\n        \"1P 3m 6m 7m\",\n        \"\",\n        \"m7#5\"\n    ],\n    [\n        \"1P 3m 6m 7m 9M\",\n        \"\",\n        \"m9#5\"\n    ],\n    [\n        \"1P 3m 5A 7m 9M 11P\",\n        \"\",\n        \"m11A\"\n    ],\n    [\n        \"1P 3m 6m 9m\",\n        \"\",\n        \"mb6b9\"\n    ],\n    [\n        \"1P 2M 3m 5d 7m\",\n        \"\",\n        \"m9b5\"\n    ],\n    [\n        \"1P 4P 5A 7M\",\n        \"\",\n        \"M7#5sus4\"\n    ],\n    [\n        \"1P 4P 5A 7M 9M\",\n        \"\",\n        \"M9#5sus4\"\n    ],\n    [\n        \"1P 4P 5A 7m\",\n        \"\",\n        \"7#5sus4\"\n    ],\n    [\n        \"1P 4P 5P 7M\",\n        \"\",\n        \"M7sus4\"\n    ],\n    [\n        \"1P 4P 5P 7M 9M\",\n        \"\",\n        \"M9sus4\"\n    ],\n    [\n        \"1P 4P 5P 7m 9M\",\n        \"\",\n        \"9sus4 9sus\"\n    ],\n    [\n        \"1P 4P 5P 7m 9M 13M\",\n        \"\",\n        \"13sus4 13sus\"\n    ],\n    [\n        \"1P 4P 5P 7m 9m 13m\",\n        \"\",\n        \"7sus4b9b13 7b9b13sus4\"\n    ],\n    [\n        \"1P 4P 7m 10m\",\n        \"\",\n        \"4 quartal\"\n    ],\n    [\n        \"1P 5P 7m 9m 11P\",\n        \"\",\n        \"11b9\"\n    ]\n];\nvar data_default = CHORDS;\n// index.ts\nvar NoChordType = {\n    ...(0, _pcset.EmptyPcset),\n    name: \"\",\n    quality: \"Unknown\",\n    intervals: [],\n    aliases: []\n};\nvar dictionary = [];\nvar index = {};\nfunction get(type) {\n    return index[type] || NoChordType;\n}\nvar chordType = (0, _core.deprecate)(\"ChordType.chordType\", \"ChordType.get\", get);\nfunction names() {\n    return dictionary.map((chord)=>chord.name).filter((x)=>x);\n}\nfunction symbols() {\n    return dictionary.map((chord)=>chord.aliases[0]).filter((x)=>x);\n}\nfunction keys() {\n    return Object.keys(index);\n}\nfunction all() {\n    return dictionary.slice();\n}\nvar entries = (0, _core.deprecate)(\"ChordType.entries\", \"ChordType.all\", all);\nfunction removeAll() {\n    dictionary = [];\n    index = {};\n}\nfunction add(intervals, aliases, fullName) {\n    const quality = getQuality(intervals);\n    const chord = {\n        ...(0, _pcset.get)(intervals),\n        name: fullName || \"\",\n        quality,\n        intervals,\n        aliases\n    };\n    dictionary.push(chord);\n    if (chord.name) index[chord.name] = chord;\n    index[chord.setNum] = chord;\n    index[chord.chroma] = chord;\n    chord.aliases.forEach((alias)=>addAlias(chord, alias));\n}\nfunction addAlias(chord, alias) {\n    index[alias] = chord;\n}\nfunction getQuality(intervals) {\n    const has = (interval)=>intervals.indexOf(interval) !== -1;\n    return has(\"5A\") ? \"Augmented\" : has(\"3M\") ? \"Major\" : has(\"5d\") ? \"Diminished\" : has(\"3m\") ? \"Minor\" : \"Unknown\";\n}\ndata_default.forEach(([ivls, fullName, names2])=>add(ivls.split(\" \"), names2.split(\" \"), fullName));\ndictionary.sort((a, b)=>a.setNum - b.setNum);\nvar chord_type_default = {\n    names,\n    symbols,\n    get,\n    all,\n    add,\n    removeAll,\n    keys,\n    // deprecated\n    entries,\n    chordType\n};\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/pcset\":\"YAaan\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"YAaan\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"EmptyPcset\", ()=>EmptyPcset);\nparcelHelpers.export(exports, \"chroma\", ()=>chroma);\nparcelHelpers.export(exports, \"chromaToIntervals\", ()=>chromaToIntervals);\nparcelHelpers.export(exports, \"chromas\", ()=>chromas);\nparcelHelpers.export(exports, \"default\", ()=>pcset_default);\nparcelHelpers.export(exports, \"filter\", ()=>filter);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"includes\", ()=>includes);\nparcelHelpers.export(exports, \"isChroma\", ()=>isChroma);\nparcelHelpers.export(exports, \"isEqual\", ()=>isEqual);\nparcelHelpers.export(exports, \"isNoteIncludedIn\", ()=>isNoteIncludedIn);\nparcelHelpers.export(exports, \"isSubsetOf\", ()=>isSubsetOf);\nparcelHelpers.export(exports, \"isSupersetOf\", ()=>isSupersetOf);\nparcelHelpers.export(exports, \"modes\", ()=>modes);\nparcelHelpers.export(exports, \"pcset\", ()=>pcset);\nvar _collection = require(\"@tonaljs/collection\");\nvar _core = require(\"@tonaljs/core\");\nvar EmptyPcset = {\n    empty: true,\n    name: \"\",\n    setNum: 0,\n    chroma: \"000000000000\",\n    normalized: \"000000000000\",\n    intervals: []\n};\nvar setNumToChroma = (num2)=>Number(num2).toString(2);\nvar chromaToNumber = (chroma2)=>parseInt(chroma2, 2);\nvar REGEX = /^[01]{12}$/;\nfunction isChroma(set) {\n    return REGEX.test(set);\n}\nvar isPcsetNum = (set)=>typeof set === \"number\" && set >= 0 && set <= 4095;\nvar isPcset = (set)=>set && isChroma(set.chroma);\nvar cache = {\n    [EmptyPcset.chroma]: EmptyPcset\n};\nfunction get(src) {\n    const chroma2 = isChroma(src) ? src : isPcsetNum(src) ? setNumToChroma(src) : Array.isArray(src) ? listToChroma(src) : isPcset(src) ? src.chroma : EmptyPcset.chroma;\n    return cache[chroma2] = cache[chroma2] || chromaToPcset(chroma2);\n}\nvar pcset = (0, _core.deprecate)(\"Pcset.pcset\", \"Pcset.get\", get);\nvar chroma = (set)=>get(set).chroma;\nvar intervals = (set)=>get(set).intervals;\nvar num = (set)=>get(set).setNum;\nvar IVLS = [\n    \"1P\",\n    \"2m\",\n    \"2M\",\n    \"3m\",\n    \"3M\",\n    \"4P\",\n    \"5d\",\n    \"5P\",\n    \"6m\",\n    \"6M\",\n    \"7m\",\n    \"7M\"\n];\nfunction chromaToIntervals(chroma2) {\n    const intervals2 = [];\n    for(let i = 0; i < 12; i++)if (chroma2.charAt(i) === \"1\") intervals2.push(IVLS[i]);\n    return intervals2;\n}\nfunction chromas() {\n    return (0, _collection.range)(2048, 4095).map(setNumToChroma);\n}\nfunction modes(set, normalize = true) {\n    const pcs = get(set);\n    const binary = pcs.chroma.split(\"\");\n    return (0, _collection.compact)(binary.map((_, i)=>{\n        const r = (0, _collection.rotate)(i, binary);\n        return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    }));\n}\nfunction isEqual(s1, s2) {\n    return get(s1).setNum === get(s2).setNum;\n}\nfunction isSubsetOf(set) {\n    const s = get(set).setNum;\n    return (notes)=>{\n        const o = get(notes).setNum;\n        return s && s !== o && (o & s) === o;\n    };\n}\nfunction isSupersetOf(set) {\n    const s = get(set).setNum;\n    return (notes)=>{\n        const o = get(notes).setNum;\n        return s && s !== o && (o | s) === o;\n    };\n}\nfunction isNoteIncludedIn(set) {\n    const s = get(set);\n    return (noteName)=>{\n        const n = (0, _core.note)(noteName);\n        return s && !n.empty && s.chroma.charAt(n.chroma) === \"1\";\n    };\n}\nvar includes = isNoteIncludedIn;\nfunction filter(set) {\n    const isIncluded = isNoteIncludedIn(set);\n    return (notes)=>{\n        return notes.filter(isIncluded);\n    };\n}\nvar pcset_default = {\n    get,\n    chroma,\n    num,\n    intervals,\n    chromas,\n    isSupersetOf,\n    isSubsetOf,\n    isNoteIncludedIn,\n    isEqual,\n    filter,\n    modes,\n    pcset\n};\nfunction chromaRotations(chroma2) {\n    const binary = chroma2.split(\"\");\n    return binary.map((_, i)=>(0, _collection.rotate)(i, binary).join(\"\"));\n}\nfunction chromaToPcset(chroma2) {\n    const setNum = chromaToNumber(chroma2);\n    const normalizedNum = chromaRotations(chroma2).map(chromaToNumber).filter((n)=>n >= 2048).sort()[0];\n    const normalized = setNumToChroma(normalizedNum);\n    const intervals2 = chromaToIntervals(chroma2);\n    return {\n        empty: false,\n        name: \"\",\n        setNum,\n        chroma: chroma2,\n        normalized,\n        intervals: intervals2\n    };\n}\nfunction listToChroma(set) {\n    if (set.length === 0) return EmptyPcset.chroma;\n    let pitch;\n    const binary = [\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0\n    ];\n    for(let i = 0; i < set.length; i++){\n        pitch = (0, _core.note)(set[i]);\n        if (pitch.empty) pitch = (0, _core.interval)(set[i]);\n        if (!pitch.empty) binary[pitch.chroma] = 1;\n    }\n    return binary.join(\"\");\n}\n\n},{\"@tonaljs/collection\":\"1Wcp8\",\"@tonaljs/core\":\"bWVEi\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"1Wcp8\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"compact\", ()=>compact);\nparcelHelpers.export(exports, \"default\", ()=>collection_default);\nparcelHelpers.export(exports, \"permutations\", ()=>permutations);\nparcelHelpers.export(exports, \"range\", ()=>range);\nparcelHelpers.export(exports, \"rotate\", ()=>rotate);\nparcelHelpers.export(exports, \"shuffle\", ()=>shuffle);\nfunction ascR(b, n) {\n    const a = [];\n    for(; n--; a[n] = n + b);\n    return a;\n}\nfunction descR(b, n) {\n    const a = [];\n    for(; n--; a[n] = b - n);\n    return a;\n}\nfunction range(from, to) {\n    return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\n}\nfunction rotate(times, arr) {\n    const len = arr.length;\n    const n = (times % len + len) % len;\n    return arr.slice(n, len).concat(arr.slice(0, n));\n}\nfunction compact(arr) {\n    return arr.filter((n)=>n === 0 || n);\n}\nfunction shuffle(arr, rnd = Math.random) {\n    let i;\n    let t;\n    let m = arr.length;\n    while(m){\n        i = Math.floor(rnd() * m--);\n        t = arr[m];\n        arr[m] = arr[i];\n        arr[i] = t;\n    }\n    return arr;\n}\nfunction permutations(arr) {\n    if (arr.length === 0) return [\n        []\n    ];\n    return permutations(arr.slice(1)).reduce((acc, perm)=>{\n        return acc.concat(arr.map((e, pos)=>{\n            const newPerm = perm.slice();\n            newPerm.splice(pos, 0, arr[0]);\n            return newPerm;\n        }));\n    }, []);\n}\nvar collection_default = {\n    compact,\n    permutations,\n    range,\n    rotate,\n    shuffle\n};\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"dBTmw\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"NoScaleType\", ()=>NoScaleType);\nparcelHelpers.export(exports, \"add\", ()=>add);\nparcelHelpers.export(exports, \"addAlias\", ()=>addAlias);\nparcelHelpers.export(exports, \"all\", ()=>all);\nparcelHelpers.export(exports, \"default\", ()=>scale_type_default);\nparcelHelpers.export(exports, \"entries\", ()=>entries);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"keys\", ()=>keys);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"removeAll\", ()=>removeAll);\nparcelHelpers.export(exports, \"scaleType\", ()=>scaleType);\nvar _core = require(\"@tonaljs/core\");\nvar _pcset = require(\"@tonaljs/pcset\");\n// data.ts\nvar SCALES = [\n    [\n        \"1P 2M 3M 5P 6M\",\n        \"major pentatonic\",\n        \"pentatonic\"\n    ],\n    [\n        \"1P 2M 3M 4P 5P 6M 7M\",\n        \"major\",\n        \"ionian\"\n    ],\n    [\n        \"1P 2M 3m 4P 5P 6m 7m\",\n        \"minor\",\n        \"aeolian\"\n    ],\n    [\n        \"1P 2M 3m 3M 5P 6M\",\n        \"major blues\"\n    ],\n    [\n        \"1P 3m 4P 5d 5P 7m\",\n        \"minor blues\",\n        \"blues\"\n    ],\n    [\n        \"1P 2M 3m 4P 5P 6M 7M\",\n        \"melodic minor\"\n    ],\n    [\n        \"1P 2M 3m 4P 5P 6m 7M\",\n        \"harmonic minor\"\n    ],\n    [\n        \"1P 2M 3M 4P 5P 6M 7m 7M\",\n        \"bebop\"\n    ],\n    [\n        \"1P 2M 3m 4P 5d 6m 6M 7M\",\n        \"diminished\",\n        \"whole-half diminished\"\n    ],\n    [\n        \"1P 2M 3m 4P 5P 6M 7m\",\n        \"dorian\"\n    ],\n    [\n        \"1P 2M 3M 4A 5P 6M 7M\",\n        \"lydian\"\n    ],\n    [\n        \"1P 2M 3M 4P 5P 6M 7m\",\n        \"mixolydian\",\n        \"dominant\"\n    ],\n    [\n        \"1P 2m 3m 4P 5P 6m 7m\",\n        \"phrygian\"\n    ],\n    [\n        \"1P 2m 3m 4P 5d 6m 7m\",\n        \"locrian\"\n    ],\n    [\n        \"1P 3M 4P 5P 7M\",\n        \"ionian pentatonic\"\n    ],\n    [\n        \"1P 3M 4P 5P 7m\",\n        \"mixolydian pentatonic\",\n        \"indian\"\n    ],\n    [\n        \"1P 2M 4P 5P 6M\",\n        \"ritusen\"\n    ],\n    [\n        \"1P 2M 4P 5P 7m\",\n        \"egyptian\"\n    ],\n    [\n        \"1P 3M 4P 5d 7m\",\n        \"neopolitan major pentatonic\"\n    ],\n    [\n        \"1P 3m 4P 5P 6m\",\n        \"vietnamese 1\"\n    ],\n    [\n        \"1P 2m 3m 5P 6m\",\n        \"pelog\"\n    ],\n    [\n        \"1P 2m 4P 5P 6m\",\n        \"kumoijoshi\"\n    ],\n    [\n        \"1P 2M 3m 5P 6m\",\n        \"hirajoshi\"\n    ],\n    [\n        \"1P 2m 4P 5d 7m\",\n        \"iwato\"\n    ],\n    [\n        \"1P 2m 4P 5P 7m\",\n        \"in-sen\"\n    ],\n    [\n        \"1P 3M 4A 5P 7M\",\n        \"lydian pentatonic\",\n        \"chinese\"\n    ],\n    [\n        \"1P 3m 4P 6m 7m\",\n        \"malkos raga\"\n    ],\n    [\n        \"1P 3m 4P 5d 7m\",\n        \"locrian pentatonic\",\n        \"minor seven flat five pentatonic\"\n    ],\n    [\n        \"1P 3m 4P 5P 7m\",\n        \"minor pentatonic\",\n        \"vietnamese 2\"\n    ],\n    [\n        \"1P 3m 4P 5P 6M\",\n        \"minor six pentatonic\"\n    ],\n    [\n        \"1P 2M 3m 5P 6M\",\n        \"flat three pentatonic\",\n        \"kumoi\"\n    ],\n    [\n        \"1P 2M 3M 5P 6m\",\n        \"flat six pentatonic\"\n    ],\n    [\n        \"1P 2m 3M 5P 6M\",\n        \"scriabin\"\n    ],\n    [\n        \"1P 3M 5d 6m 7m\",\n        \"whole tone pentatonic\"\n    ],\n    [\n        \"1P 3M 4A 5A 7M\",\n        \"lydian #5P pentatonic\"\n    ],\n    [\n        \"1P 3M 4A 5P 7m\",\n        \"lydian dominant pentatonic\"\n    ],\n    [\n        \"1P 3m 4P 5P 7M\",\n        \"minor #7M pentatonic\"\n    ],\n    [\n        \"1P 3m 4d 5d 7m\",\n        \"super locrian pentatonic\"\n    ],\n    [\n        \"1P 2M 3m 4P 5P 7M\",\n        \"minor hexatonic\"\n    ],\n    [\n        \"1P 2A 3M 5P 5A 7M\",\n        \"augmented\"\n    ],\n    [\n        \"1P 2M 4P 5P 6M 7m\",\n        \"piongio\"\n    ],\n    [\n        \"1P 2m 3M 4A 6M 7m\",\n        \"prometheus neopolitan\"\n    ],\n    [\n        \"1P 2M 3M 4A 6M 7m\",\n        \"prometheus\"\n    ],\n    [\n        \"1P 2m 3M 5d 6m 7m\",\n        \"mystery #1\"\n    ],\n    [\n        \"1P 2m 3M 4P 5A 6M\",\n        \"six tone symmetric\"\n    ],\n    [\n        \"1P 2M 3M 4A 5A 6A\",\n        \"whole tone\",\n        \"messiaen's mode #1\"\n    ],\n    [\n        \"1P 2m 4P 4A 5P 7M\",\n        \"messiaen's mode #5\"\n    ],\n    [\n        \"1P 2M 3M 4P 5d 6m 7m\",\n        \"locrian major\",\n        \"arabian\"\n    ],\n    [\n        \"1P 2m 3M 4A 5P 6m 7M\",\n        \"double harmonic lydian\"\n    ],\n    [\n        \"1P 2m 2A 3M 4A 6m 7m\",\n        \"altered\",\n        \"super locrian\",\n        \"diminished whole tone\",\n        \"pomeroy\"\n    ],\n    [\n        \"1P 2M 3m 4P 5d 6m 7m\",\n        \"locrian #2\",\n        \"half-diminished\",\n        \"aeolian b5\"\n    ],\n    [\n        \"1P 2M 3M 4P 5P 6m 7m\",\n        \"mixolydian b6\",\n        \"melodic minor fifth mode\",\n        \"hindu\"\n    ],\n    [\n        \"1P 2M 3M 4A 5P 6M 7m\",\n        \"lydian dominant\",\n        \"lydian b7\",\n        \"overtone\"\n    ],\n    [\n        \"1P 2M 3M 4A 5A 6M 7M\",\n        \"lydian augmented\"\n    ],\n    [\n        \"1P 2m 3m 4P 5P 6M 7m\",\n        \"dorian b2\",\n        \"phrygian #6\",\n        \"melodic minor second mode\"\n    ],\n    [\n        \"1P 2m 3m 4d 5d 6m 7d\",\n        \"ultralocrian\",\n        \"superlocrian bb7\",\n        \"superlocrian diminished\"\n    ],\n    [\n        \"1P 2m 3m 4P 5d 6M 7m\",\n        \"locrian 6\",\n        \"locrian natural 6\",\n        \"locrian sharp 6\"\n    ],\n    [\n        \"1P 2A 3M 4P 5P 5A 7M\",\n        \"augmented heptatonic\"\n    ],\n    [\n        \"1P 2M 3m 4A 5P 6M 7m\",\n        \"dorian #4\",\n        \"ukrainian dorian\",\n        \"romanian minor\",\n        \"altered dorian\"\n    ],\n    [\n        \"1P 2M 3m 4A 5P 6M 7M\",\n        \"lydian diminished\"\n    ],\n    [\n        \"1P 2M 3M 4A 5A 7m 7M\",\n        \"leading whole tone\"\n    ],\n    [\n        \"1P 2M 3M 4A 5P 6m 7m\",\n        \"lydian minor\"\n    ],\n    [\n        \"1P 2m 3M 4P 5P 6m 7m\",\n        \"phrygian dominant\",\n        \"spanish\",\n        \"phrygian major\"\n    ],\n    [\n        \"1P 2m 3m 4P 5P 6m 7M\",\n        \"balinese\"\n    ],\n    [\n        \"1P 2m 3m 4P 5P 6M 7M\",\n        \"neopolitan major\"\n    ],\n    [\n        \"1P 2M 3M 4P 5P 6m 7M\",\n        \"harmonic major\"\n    ],\n    [\n        \"1P 2m 3M 4P 5P 6m 7M\",\n        \"double harmonic major\",\n        \"gypsy\"\n    ],\n    [\n        \"1P 2M 3m 4A 5P 6m 7M\",\n        \"hungarian minor\"\n    ],\n    [\n        \"1P 2A 3M 4A 5P 6M 7m\",\n        \"hungarian major\"\n    ],\n    [\n        \"1P 2m 3M 4P 5d 6M 7m\",\n        \"oriental\"\n    ],\n    [\n        \"1P 2m 3m 3M 4A 5P 7m\",\n        \"flamenco\"\n    ],\n    [\n        \"1P 2m 3m 4A 5P 6m 7M\",\n        \"todi raga\"\n    ],\n    [\n        \"1P 2m 3M 4P 5d 6m 7M\",\n        \"persian\"\n    ],\n    [\n        \"1P 2m 3M 5d 6m 7m 7M\",\n        \"enigmatic\"\n    ],\n    [\n        \"1P 2M 3M 4P 5A 6M 7M\",\n        \"major augmented\",\n        \"major #5\",\n        \"ionian augmented\",\n        \"ionian #5\"\n    ],\n    [\n        \"1P 2A 3M 4A 5P 6M 7M\",\n        \"lydian #9\"\n    ],\n    [\n        \"1P 2m 2M 4P 4A 5P 6m 7M\",\n        \"messiaen's mode #4\"\n    ],\n    [\n        \"1P 2m 3M 4P 4A 5P 6m 7M\",\n        \"purvi raga\"\n    ],\n    [\n        \"1P 2m 3m 3M 4P 5P 6m 7m\",\n        \"spanish heptatonic\"\n    ],\n    [\n        \"1P 2M 3m 3M 4P 5P 6M 7m\",\n        \"bebop minor\"\n    ],\n    [\n        \"1P 2M 3M 4P 5P 5A 6M 7M\",\n        \"bebop major\"\n    ],\n    [\n        \"1P 2m 3m 4P 5d 5P 6m 7m\",\n        \"bebop locrian\"\n    ],\n    [\n        \"1P 2M 3m 4P 5P 6m 7m 7M\",\n        \"minor bebop\"\n    ],\n    [\n        \"1P 2M 3M 4P 5d 5P 6M 7M\",\n        \"ichikosucho\"\n    ],\n    [\n        \"1P 2M 3m 4P 5P 6m 6M 7M\",\n        \"minor six diminished\"\n    ],\n    [\n        \"1P 2m 3m 3M 4A 5P 6M 7m\",\n        \"half-whole diminished\",\n        \"dominant diminished\",\n        \"messiaen's mode #2\"\n    ],\n    [\n        \"1P 3m 3M 4P 5P 6M 7m 7M\",\n        \"kafi raga\"\n    ],\n    [\n        \"1P 2M 3M 4P 4A 5A 6A 7M\",\n        \"messiaen's mode #6\"\n    ],\n    [\n        \"1P 2M 3m 3M 4P 5d 5P 6M 7m\",\n        \"composite blues\"\n    ],\n    [\n        \"1P 2M 3m 3M 4A 5P 6m 7m 7M\",\n        \"messiaen's mode #3\"\n    ],\n    [\n        \"1P 2m 2M 3m 4P 4A 5P 6m 6M 7M\",\n        \"messiaen's mode #7\"\n    ],\n    [\n        \"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\",\n        \"chromatic\"\n    ]\n];\nvar data_default = SCALES;\n// index.ts\nvar NoScaleType = {\n    ...(0, _pcset.EmptyPcset),\n    intervals: [],\n    aliases: []\n};\nvar dictionary = [];\nvar index = {};\nfunction names() {\n    return dictionary.map((scale)=>scale.name);\n}\nfunction get(type) {\n    return index[type] || NoScaleType;\n}\nvar scaleType = (0, _core.deprecate)(\"ScaleDictionary.scaleType\", \"ScaleType.get\", get);\nfunction all() {\n    return dictionary.slice();\n}\nvar entries = (0, _core.deprecate)(\"ScaleDictionary.entries\", \"ScaleType.all\", all);\nfunction keys() {\n    return Object.keys(index);\n}\nfunction removeAll() {\n    dictionary = [];\n    index = {};\n}\nfunction add(intervals, name, aliases = []) {\n    const scale = {\n        ...(0, _pcset.get)(intervals),\n        name,\n        intervals,\n        aliases\n    };\n    dictionary.push(scale);\n    index[scale.name] = scale;\n    index[scale.setNum] = scale;\n    index[scale.chroma] = scale;\n    scale.aliases.forEach((alias)=>addAlias(scale, alias));\n    return scale;\n}\nfunction addAlias(scale, alias) {\n    index[alias] = scale;\n}\ndata_default.forEach(([ivls, name, ...aliases])=>add(ivls.split(\" \"), name, aliases));\nvar scale_type_default = {\n    names,\n    get,\n    all,\n    add,\n    removeAll,\n    keys,\n    entries,\n    scaleType\n};\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/pcset\":\"YAaan\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"cN44L\":[function(require,module,exports) {\n// data.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"default\", ()=>duration_value_default);\nparcelHelpers.export(exports, \"fraction\", ()=>fraction);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"shorthands\", ()=>shorthands);\nparcelHelpers.export(exports, \"value\", ()=>value);\nvar DATA = [\n    [\n        0.125,\n        \"dl\",\n        [\n            \"large\",\n            \"duplex longa\",\n            \"maxima\",\n            \"octuple\",\n            \"octuple whole\"\n        ]\n    ],\n    [\n        0.25,\n        \"l\",\n        [\n            \"long\",\n            \"longa\"\n        ]\n    ],\n    [\n        0.5,\n        \"d\",\n        [\n            \"double whole\",\n            \"double\",\n            \"breve\"\n        ]\n    ],\n    [\n        1,\n        \"w\",\n        [\n            \"whole\",\n            \"semibreve\"\n        ]\n    ],\n    [\n        2,\n        \"h\",\n        [\n            \"half\",\n            \"minim\"\n        ]\n    ],\n    [\n        4,\n        \"q\",\n        [\n            \"quarter\",\n            \"crotchet\"\n        ]\n    ],\n    [\n        8,\n        \"e\",\n        [\n            \"eighth\",\n            \"quaver\"\n        ]\n    ],\n    [\n        16,\n        \"s\",\n        [\n            \"sixteenth\",\n            \"semiquaver\"\n        ]\n    ],\n    [\n        32,\n        \"t\",\n        [\n            \"thirty-second\",\n            \"demisemiquaver\"\n        ]\n    ],\n    [\n        64,\n        \"sf\",\n        [\n            \"sixty-fourth\",\n            \"hemidemisemiquaver\"\n        ]\n    ],\n    [\n        128,\n        \"h\",\n        [\n            \"hundred twenty-eighth\"\n        ]\n    ],\n    [\n        256,\n        \"th\",\n        [\n            \"two hundred fifty-sixth\"\n        ]\n    ]\n];\nvar data_default = DATA;\n// index.ts\nvar VALUES = [];\ndata_default.forEach(([denominator, shorthand, names2])=>add(denominator, shorthand, names2));\nvar NoDuration = {\n    empty: true,\n    name: \"\",\n    value: 0,\n    fraction: [\n        0,\n        0\n    ],\n    shorthand: \"\",\n    dots: \"\",\n    names: []\n};\nfunction names() {\n    return VALUES.reduce((names2, duration)=>{\n        duration.names.forEach((name)=>names2.push(name));\n        return names2;\n    }, []);\n}\nfunction shorthands() {\n    return VALUES.map((dur)=>dur.shorthand);\n}\nvar REGEX = /^([^.]+)(\\.*)$/;\nfunction get(name) {\n    const [_, simple, dots] = REGEX.exec(name) || [];\n    const base = VALUES.find((dur)=>dur.shorthand === simple || dur.names.includes(simple));\n    if (!base) return NoDuration;\n    const fraction2 = calcDots(base.fraction, dots.length);\n    const value2 = fraction2[0] / fraction2[1];\n    return {\n        ...base,\n        name,\n        dots,\n        value: value2,\n        fraction: fraction2\n    };\n}\nvar value = (name)=>get(name).value;\nvar fraction = (name)=>get(name).fraction;\nvar duration_value_default = {\n    names,\n    shorthands,\n    get,\n    value,\n    fraction\n};\nfunction add(denominator, shorthand, names2) {\n    VALUES.push({\n        empty: false,\n        dots: \"\",\n        name: \"\",\n        value: 1 / denominator,\n        fraction: denominator < 1 ? [\n            1 / denominator,\n            1\n        ] : [\n            1,\n            denominator\n        ],\n        shorthand,\n        names: names2\n    });\n}\nfunction calcDots(fraction2, dots) {\n    const pow = Math.pow(2, dots);\n    let numerator = fraction2[0] * pow;\n    let denominator = fraction2[1] * pow;\n    const base = numerator;\n    for(let i = 0; i < dots; i++)numerator += base / Math.pow(2, i + 1);\n    while(numerator % 2 === 0 && denominator % 2 === 0){\n        numerator /= 2;\n        denominator /= 2;\n    }\n    return [\n        numerator,\n        denominator\n    ];\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"4MaG0\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"add\", ()=>add);\nparcelHelpers.export(exports, \"addTo\", ()=>addTo);\nparcelHelpers.export(exports, \"default\", ()=>interval_default);\nparcelHelpers.export(exports, \"distance\", ()=>distance);\nparcelHelpers.export(exports, \"fromSemitones\", ()=>fromSemitones);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"invert\", ()=>invert);\nparcelHelpers.export(exports, \"name\", ()=>name);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"num\", ()=>num);\nparcelHelpers.export(exports, \"quality\", ()=>quality);\nparcelHelpers.export(exports, \"semitones\", ()=>semitones);\nparcelHelpers.export(exports, \"simplify\", ()=>simplify);\nparcelHelpers.export(exports, \"substract\", ()=>substract);\nparcelHelpers.export(exports, \"transposeFifths\", ()=>transposeFifths);\nvar _core = require(\"@tonaljs/core\");\nfunction names() {\n    return \"1P 2M 3M 4P 5P 6m 7m\".split(\" \");\n}\nvar get = (0, _core.interval);\nvar name = (name2)=>(0, _core.interval)(name2).name;\nvar semitones = (name2)=>(0, _core.interval)(name2).semitones;\nvar quality = (name2)=>(0, _core.interval)(name2).q;\nvar num = (name2)=>(0, _core.interval)(name2).num;\nfunction simplify(name2) {\n    const i = (0, _core.interval)(name2);\n    return i.empty ? \"\" : i.simple + i.q;\n}\nfunction invert(name2) {\n    const i = (0, _core.interval)(name2);\n    if (i.empty) return \"\";\n    const step = (7 - i.step) % 7;\n    const alt = i.type === \"perfectable\" ? -i.alt : -(i.alt + 1);\n    return (0, _core.interval)({\n        step,\n        alt,\n        oct: i.oct,\n        dir: i.dir\n    }).name;\n}\nvar IN = [\n    1,\n    2,\n    2,\n    3,\n    3,\n    4,\n    5,\n    5,\n    6,\n    6,\n    7,\n    7\n];\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\nfunction fromSemitones(semitones2) {\n    const d = semitones2 < 0 ? -1 : 1;\n    const n = Math.abs(semitones2);\n    const c = n % 12;\n    const o = Math.floor(n / 12);\n    return d * (IN[c] + 7 * o) + IQ[c];\n}\nvar distance = (0, _core.distance);\nvar add = combinator((a, b)=>[\n        a[0] + b[0],\n        a[1] + b[1]\n    ]);\nvar addTo = (interval)=>(other)=>add(interval, other);\nvar substract = combinator((a, b)=>[\n        a[0] - b[0],\n        a[1] - b[1]\n    ]);\nfunction transposeFifths(interval, fifths) {\n    const ivl = get(interval);\n    if (ivl.empty) return \"\";\n    const [nFifths, nOcts, dir] = ivl.coord;\n    return (0, _core.coordToInterval)([\n        nFifths + fifths,\n        nOcts,\n        dir\n    ]).name;\n}\nvar interval_default = {\n    names,\n    get,\n    name,\n    num,\n    semitones,\n    quality,\n    fromSemitones,\n    distance,\n    invert,\n    simplify,\n    add,\n    addTo,\n    substract,\n    transposeFifths\n};\nfunction combinator(fn) {\n    return (a, b)=>{\n        const coordA = (0, _core.interval)(a).coord;\n        const coordB = (0, _core.interval)(b).coord;\n        if (coordA && coordB) {\n            const coord = fn(coordA, coordB);\n            return (0, _core.coordToInterval)(coord).name;\n        }\n    };\n}\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"eKRUz\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"default\", ()=>key_default);\nparcelHelpers.export(exports, \"majorKey\", ()=>majorKey);\nparcelHelpers.export(exports, \"majorTonicFromKeySignature\", ()=>majorTonicFromKeySignature);\nparcelHelpers.export(exports, \"minorKey\", ()=>minorKey);\nvar _core = require(\"@tonaljs/core\");\nvar _note = require(\"@tonaljs/note\");\nvar _romanNumeral = require(\"@tonaljs/roman-numeral\");\nvar Empty = Object.freeze([]);\nvar NoKey = {\n    type: \"major\",\n    tonic: \"\",\n    alteration: 0,\n    keySignature: \"\"\n};\nvar NoKeyScale = {\n    tonic: \"\",\n    grades: Empty,\n    intervals: Empty,\n    scale: Empty,\n    triads: Empty,\n    chords: Empty,\n    chordsHarmonicFunction: Empty,\n    chordScales: Empty\n};\nvar NoMajorKey = {\n    ...NoKey,\n    ...NoKeyScale,\n    type: \"major\",\n    minorRelative: \"\",\n    scale: Empty,\n    secondaryDominants: Empty,\n    secondaryDominantsMinorRelative: Empty,\n    substituteDominants: Empty,\n    substituteDominantsMinorRelative: Empty\n};\nvar NoMinorKey = {\n    ...NoKey,\n    type: \"minor\",\n    relativeMajor: \"\",\n    natural: NoKeyScale,\n    harmonic: NoKeyScale,\n    melodic: NoKeyScale\n};\nvar mapScaleToType = (scale, list, sep = \"\")=>list.map((type, i)=>`${scale[i]}${sep}${type}`);\nfunction keyScale(grades, triads, chords, harmonicFunctions, chordScales) {\n    return (tonic)=>{\n        const intervals = grades.map((gr)=>(0, _romanNumeral.get)(gr).interval || \"\");\n        const scale = intervals.map((interval)=>(0, _core.transpose)(tonic, interval));\n        return {\n            tonic,\n            grades,\n            intervals,\n            scale,\n            triads: mapScaleToType(scale, triads),\n            chords: mapScaleToType(scale, chords),\n            chordsHarmonicFunction: harmonicFunctions.slice(),\n            chordScales: mapScaleToType(scale, chordScales, \" \")\n        };\n    };\n}\nvar distInFifths = (from, to)=>{\n    const f = (0, _core.note)(from);\n    const t = (0, _core.note)(to);\n    return f.empty || t.empty ? 0 : t.coord[0] - f.coord[0];\n};\nvar MajorScale = keyScale(\"I II III IV V VI VII\".split(\" \"), \" m m   m dim\".split(\" \"), \"maj7 m7 m7 maj7 7 m7 m7b5\".split(\" \"), \"T SD T SD D T D\".split(\" \"), \"major,dorian,phrygian,lydian,mixolydian,minor,locrian\".split(\",\"));\nvar NaturalScale = keyScale(\"I II bIII IV V bVI bVII\".split(\" \"), \"m dim  m m  \".split(\" \"), \"m7 m7b5 maj7 m7 m7 maj7 7\".split(\" \"), \"T SD T SD D SD SD\".split(\" \"), \"minor,locrian,major,dorian,phrygian,lydian,mixolydian\".split(\",\"));\nvar HarmonicScale = keyScale(\"I II bIII IV V bVI VII\".split(\" \"), \"m dim aug m   dim\".split(\" \"), \"mMaj7 m7b5 +maj7 m7 7 maj7 o7\".split(\" \"), \"T SD T SD D SD D\".split(\" \"), \"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian\".split(\",\"));\nvar MelodicScale = keyScale(\"I II bIII IV V VI VII\".split(\" \"), \"m m aug   dim dim\".split(\" \"), \"m6 m7 +maj7 7 7 m7b5 m7b5\".split(\" \"), \"T SD T SD D  \".split(\" \"), \"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered\".split(\",\"));\nfunction majorKey(tonic) {\n    const pc = (0, _core.note)(tonic).pc;\n    if (!pc) return NoMajorKey;\n    const keyScale2 = MajorScale(pc);\n    const alteration = distInFifths(\"C\", pc);\n    const romanInTonic = (src)=>{\n        const r = (0, _romanNumeral.get)(src);\n        if (r.empty) return \"\";\n        return (0, _core.transpose)(tonic, r.interval) + r.chordType;\n    };\n    return {\n        ...keyScale2,\n        type: \"major\",\n        minorRelative: (0, _core.transpose)(pc, \"-3m\"),\n        alteration,\n        keySignature: (0, _core.altToAcc)(alteration),\n        secondaryDominants: \"- VI7 VII7 I7 II7 III7 -\".split(\" \").map(romanInTonic),\n        secondaryDominantsMinorRelative: \"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -\".split(\" \").map(romanInTonic),\n        substituteDominants: \"- bIII7 IV7 bV7 bVI7 bVII7 -\".split(\" \").map(romanInTonic),\n        substituteDominantsMinorRelative: \"- IIIm7 Im7 IIbm7 VIm7 IVm7 -\".split(\" \").map(romanInTonic)\n    };\n}\nfunction minorKey(tnc) {\n    const pc = (0, _core.note)(tnc).pc;\n    if (!pc) return NoMinorKey;\n    const alteration = distInFifths(\"C\", pc) - 3;\n    return {\n        type: \"minor\",\n        tonic: pc,\n        relativeMajor: (0, _core.transpose)(pc, \"3m\"),\n        alteration,\n        keySignature: (0, _core.altToAcc)(alteration),\n        natural: NaturalScale(pc),\n        harmonic: HarmonicScale(pc),\n        melodic: MelodicScale(pc)\n    };\n}\nfunction majorTonicFromKeySignature(sig) {\n    if (typeof sig === \"number\") return (0, _note.transposeFifths)(\"C\", sig);\n    else if (typeof sig === \"string\" && /^b+|#+$/.test(sig)) return (0, _note.transposeFifths)(\"C\", (0, _core.accToAlt)(sig));\n    return null;\n}\nvar key_default = {\n    majorKey,\n    majorTonicFromKeySignature,\n    minorKey\n};\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/note\":\"7cXrC\",\"@tonaljs/roman-numeral\":\"ajhQU\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"7cXrC\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"accidentals\", ()=>accidentals);\nparcelHelpers.export(exports, \"ascending\", ()=>ascending);\nparcelHelpers.export(exports, \"chroma\", ()=>chroma);\nparcelHelpers.export(exports, \"default\", ()=>note_default);\nparcelHelpers.export(exports, \"descending\", ()=>descending);\nparcelHelpers.export(exports, \"enharmonic\", ()=>enharmonic);\nparcelHelpers.export(exports, \"freq\", ()=>freq);\nparcelHelpers.export(exports, \"fromFreq\", ()=>fromFreq);\nparcelHelpers.export(exports, \"fromFreqSharps\", ()=>fromFreqSharps);\nparcelHelpers.export(exports, \"fromMidi\", ()=>fromMidi);\nparcelHelpers.export(exports, \"fromMidiSharps\", ()=>fromMidiSharps);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"midi\", ()=>midi);\nparcelHelpers.export(exports, \"name\", ()=>name);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"octave\", ()=>octave);\nparcelHelpers.export(exports, \"pitchClass\", ()=>pitchClass);\nparcelHelpers.export(exports, \"simplify\", ()=>simplify);\nparcelHelpers.export(exports, \"sortedNames\", ()=>sortedNames);\nparcelHelpers.export(exports, \"sortedUniqNames\", ()=>sortedUniqNames);\nparcelHelpers.export(exports, \"tr\", ()=>tr);\nparcelHelpers.export(exports, \"trBy\", ()=>trBy);\nparcelHelpers.export(exports, \"trFifths\", ()=>trFifths);\nparcelHelpers.export(exports, \"trFrom\", ()=>trFrom);\nparcelHelpers.export(exports, \"transpose\", ()=>transpose);\nparcelHelpers.export(exports, \"transposeBy\", ()=>transposeBy);\nparcelHelpers.export(exports, \"transposeFifths\", ()=>transposeFifths);\nparcelHelpers.export(exports, \"transposeFrom\", ()=>transposeFrom);\nparcelHelpers.export(exports, \"transposeOctaves\", ()=>transposeOctaves);\nvar _core = require(\"@tonaljs/core\");\nvar _midi = require(\"@tonaljs/midi\");\nvar NAMES = [\n    \"C\",\n    \"D\",\n    \"E\",\n    \"F\",\n    \"G\",\n    \"A\",\n    \"B\"\n];\nvar toName = (n)=>n.name;\nvar onlyNotes = (array)=>array.map((0, _core.note)).filter((n)=>!n.empty);\nfunction names(array) {\n    if (array === void 0) return NAMES.slice();\n    else if (!Array.isArray(array)) return [];\n    else return onlyNotes(array).map(toName);\n}\nvar get = (0, _core.note);\nvar name = (note)=>get(note).name;\nvar pitchClass = (note)=>get(note).pc;\nvar accidentals = (note)=>get(note).acc;\nvar octave = (note)=>get(note).oct;\nvar midi = (note)=>get(note).midi;\nvar freq = (note)=>get(note).freq;\nvar chroma = (note)=>get(note).chroma;\nfunction fromMidi(midi2) {\n    return (0, _midi.midiToNoteName)(midi2);\n}\nfunction fromFreq(freq2) {\n    return (0, _midi.midiToNoteName)((0, _midi.freqToMidi)(freq2));\n}\nfunction fromFreqSharps(freq2) {\n    return (0, _midi.midiToNoteName)((0, _midi.freqToMidi)(freq2), {\n        sharps: true\n    });\n}\nfunction fromMidiSharps(midi2) {\n    return (0, _midi.midiToNoteName)(midi2, {\n        sharps: true\n    });\n}\nvar transpose = (0, _core.transpose);\nvar tr = (0, _core.transpose);\nvar transposeBy = (interval)=>(note)=>transpose(note, interval);\nvar trBy = transposeBy;\nvar transposeFrom = (note)=>(interval)=>transpose(note, interval);\nvar trFrom = transposeFrom;\nfunction transposeFifths(noteName, fifths) {\n    return transpose(noteName, [\n        fifths,\n        0\n    ]);\n}\nvar trFifths = transposeFifths;\nfunction transposeOctaves(noteName, octaves) {\n    return transpose(noteName, [\n        0,\n        octaves\n    ]);\n}\nvar ascending = (a, b)=>a.height - b.height;\nvar descending = (a, b)=>b.height - a.height;\nfunction sortedNames(notes, comparator) {\n    comparator = comparator || ascending;\n    return onlyNotes(notes).sort(comparator).map(toName);\n}\nfunction sortedUniqNames(notes) {\n    return sortedNames(notes, ascending).filter((n, i, a)=>i === 0 || n !== a[i - 1]);\n}\nvar simplify = (noteName)=>{\n    const note = get(noteName);\n    if (note.empty) return \"\";\n    return (0, _midi.midiToNoteName)(note.midi || note.chroma, {\n        sharps: note.alt > 0,\n        pitchClass: note.midi === null\n    });\n};\nfunction enharmonic(noteName, destName) {\n    const src = get(noteName);\n    if (src.empty) return \"\";\n    const dest = get(destName || (0, _midi.midiToNoteName)(src.midi || src.chroma, {\n        sharps: src.alt < 0,\n        pitchClass: true\n    }));\n    if (dest.empty || dest.chroma !== src.chroma) return \"\";\n    if (src.oct === void 0) return dest.pc;\n    const srcChroma = src.chroma - src.alt;\n    const destChroma = dest.chroma - dest.alt;\n    const destOctOffset = srcChroma > 11 || destChroma < 0 ? -1 : srcChroma < 0 || destChroma > 11 ? 1 : 0;\n    const destOct = src.oct + destOctOffset;\n    return dest.pc + destOct;\n}\nvar note_default = {\n    names,\n    get,\n    name,\n    pitchClass,\n    accidentals,\n    octave,\n    midi,\n    ascending,\n    descending,\n    sortedNames,\n    sortedUniqNames,\n    fromMidi,\n    fromMidiSharps,\n    freq,\n    fromFreq,\n    fromFreqSharps,\n    chroma,\n    transpose,\n    tr,\n    transposeBy,\n    trBy,\n    transposeFrom,\n    trFrom,\n    transposeFifths,\n    transposeOctaves,\n    trFifths,\n    simplify,\n    enharmonic\n};\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/midi\":\"aFX9F\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"aFX9F\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"chroma\", ()=>chroma);\nparcelHelpers.export(exports, \"default\", ()=>midi_default);\nparcelHelpers.export(exports, \"freqToMidi\", ()=>freqToMidi);\nparcelHelpers.export(exports, \"isMidi\", ()=>isMidi);\nparcelHelpers.export(exports, \"midiToFreq\", ()=>midiToFreq);\nparcelHelpers.export(exports, \"midiToNoteName\", ()=>midiToNoteName);\nparcelHelpers.export(exports, \"pcset\", ()=>pcset);\nparcelHelpers.export(exports, \"pcsetDegrees\", ()=>pcsetDegrees);\nparcelHelpers.export(exports, \"pcsetNearest\", ()=>pcsetNearest);\nparcelHelpers.export(exports, \"pcsetSteps\", ()=>pcsetSteps);\nparcelHelpers.export(exports, \"toMidi\", ()=>toMidi);\nvar _core = require(\"@tonaljs/core\");\nfunction isMidi(arg) {\n    return +arg >= 0 && +arg <= 127;\n}\nfunction toMidi(note) {\n    if (isMidi(note)) return +note;\n    const n = (0, _core.note)(note);\n    return n.empty ? null : n.midi;\n}\nfunction midiToFreq(midi, tuning = 440) {\n    return Math.pow(2, (midi - 69) / 12) * tuning;\n}\nvar L2 = Math.log(2);\nvar L440 = Math.log(440);\nfunction freqToMidi(freq) {\n    const v = 12 * (Math.log(freq) - L440) / L2 + 69;\n    return Math.round(v * 100) / 100;\n}\nvar SHARPS = \"C C# D D# E F F# G G# A A# B\".split(\" \");\nvar FLATS = \"C Db D Eb E F Gb G Ab A Bb B\".split(\" \");\nfunction midiToNoteName(midi, options = {}) {\n    if (isNaN(midi) || midi === -Infinity || midi === Infinity) return \"\";\n    midi = Math.round(midi);\n    const pcs = options.sharps === true ? SHARPS : FLATS;\n    const pc = pcs[midi % 12];\n    if (options.pitchClass) return pc;\n    const o = Math.floor(midi / 12) - 1;\n    return pc + o;\n}\nfunction chroma(midi) {\n    return midi % 12;\n}\nfunction pcsetFromChroma(chroma2) {\n    return chroma2.split(\"\").reduce((pcset2, val, index)=>{\n        if (index < 12 && val === \"1\") pcset2.push(index);\n        return pcset2;\n    }, []);\n}\nfunction pcsetFromMidi(midi) {\n    return midi.map(chroma).sort((a, b)=>a - b).filter((n, i, a)=>i === 0 || n !== a[i - 1]);\n}\nfunction pcset(notes) {\n    return Array.isArray(notes) ? pcsetFromMidi(notes) : pcsetFromChroma(notes);\n}\nfunction pcsetNearest(notes) {\n    const set = pcset(notes);\n    return (midi)=>{\n        const ch = chroma(midi);\n        for(let i = 0; i < 12; i++){\n            if (set.includes(ch + i)) return midi + i;\n            if (set.includes(ch - i)) return midi - i;\n        }\n        return void 0;\n    };\n}\nfunction pcsetSteps(notes, tonic) {\n    const set = pcset(notes);\n    const len = set.length;\n    return (step)=>{\n        const index = step < 0 ? (len - -step % len) % len : step % len;\n        const octaves = Math.floor(step / len);\n        return set[index] + octaves * 12 + tonic;\n    };\n}\nfunction pcsetDegrees(notes, tonic) {\n    const steps = pcsetSteps(notes, tonic);\n    return (degree)=>{\n        if (degree === 0) return void 0;\n        return steps(degree > 0 ? degree - 1 : degree);\n    };\n}\nvar midi_default = {\n    chroma,\n    freqToMidi,\n    isMidi,\n    midiToFreq,\n    midiToNoteName,\n    pcsetNearest,\n    pcset,\n    pcsetDegrees,\n    pcsetSteps,\n    toMidi\n};\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"ajhQU\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"default\", ()=>roman_numeral_default);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"tokenize\", ()=>tokenize);\nvar _core = require(\"@tonaljs/core\");\nvar NoRomanNumeral = {\n    empty: true,\n    name: \"\",\n    chordType: \"\"\n};\nvar cache = {};\nfunction get(src) {\n    return typeof src === \"string\" ? cache[src] || (cache[src] = parse(src)) : typeof src === \"number\" ? get(NAMES[src] || \"\") : (0, _core.isPitch)(src) ? fromPitch(src) : (0, _core.isNamed)(src) ? get(src.name) : NoRomanNumeral;\n}\nvar romanNumeral = (0, _core.deprecate)(\"RomanNumeral.romanNumeral\", \"RomanNumeral.get\", get);\nfunction names(major = true) {\n    return (major ? NAMES : NAMES_MINOR).slice();\n}\nfunction fromPitch(pitch) {\n    return get((0, _core.altToAcc)(pitch.alt) + NAMES[pitch.step]);\n}\nvar REGEX = /^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;\nfunction tokenize(str) {\n    return REGEX.exec(str) || [\n        \"\",\n        \"\",\n        \"\",\n        \"\"\n    ];\n}\nvar ROMANS = \"I II III IV V VI VII\";\nvar NAMES = ROMANS.split(\" \");\nvar NAMES_MINOR = ROMANS.toLowerCase().split(\" \");\nfunction parse(src) {\n    const [name, acc, roman, chordType] = tokenize(src);\n    if (!roman) return NoRomanNumeral;\n    const upperRoman = roman.toUpperCase();\n    const step = NAMES.indexOf(upperRoman);\n    const alt = (0, _core.accToAlt)(acc);\n    const dir = 1;\n    return {\n        empty: false,\n        name,\n        roman,\n        interval: (0, _core.interval)({\n            step,\n            alt,\n            dir\n        }).name,\n        acc,\n        chordType,\n        alt,\n        step,\n        major: roman === upperRoman,\n        oct: 0,\n        dir\n    };\n}\nvar roman_numeral_default = {\n    names,\n    get,\n    romanNumeral\n};\n\n},{\"@tonaljs/core\":\"bWVEi\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"9UAbq\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"all\", ()=>all);\nparcelHelpers.export(exports, \"default\", ()=>mode_default);\nparcelHelpers.export(exports, \"distance\", ()=>distance);\nparcelHelpers.export(exports, \"entries\", ()=>entries);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"mode\", ()=>mode);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"notes\", ()=>notes);\nparcelHelpers.export(exports, \"relativeTonic\", ()=>relativeTonic);\nparcelHelpers.export(exports, \"seventhChords\", ()=>seventhChords);\nparcelHelpers.export(exports, \"triads\", ()=>triads);\nvar _collection = require(\"@tonaljs/collection\");\nvar _core = require(\"@tonaljs/core\");\nvar _interval = require(\"@tonaljs/interval\");\nvar _pcset = require(\"@tonaljs/pcset\");\nvar _scaleType = require(\"@tonaljs/scale-type\");\nvar MODES = [\n    [\n        0,\n        2773,\n        0,\n        \"ionian\",\n        \"\",\n        \"Maj7\",\n        \"major\"\n    ],\n    [\n        1,\n        2902,\n        2,\n        \"dorian\",\n        \"m\",\n        \"m7\"\n    ],\n    [\n        2,\n        3418,\n        4,\n        \"phrygian\",\n        \"m\",\n        \"m7\"\n    ],\n    [\n        3,\n        2741,\n        -1,\n        \"lydian\",\n        \"\",\n        \"Maj7\"\n    ],\n    [\n        4,\n        2774,\n        1,\n        \"mixolydian\",\n        \"\",\n        \"7\"\n    ],\n    [\n        5,\n        2906,\n        3,\n        \"aeolian\",\n        \"m\",\n        \"m7\",\n        \"minor\"\n    ],\n    [\n        6,\n        3434,\n        5,\n        \"locrian\",\n        \"dim\",\n        \"m7b5\"\n    ]\n];\nvar NoMode = {\n    ...(0, _pcset.EmptyPcset),\n    name: \"\",\n    alt: 0,\n    modeNum: NaN,\n    triad: \"\",\n    seventh: \"\",\n    aliases: []\n};\nvar modes = MODES.map(toMode);\nvar index = {};\nmodes.forEach((mode2)=>{\n    index[mode2.name] = mode2;\n    mode2.aliases.forEach((alias)=>{\n        index[alias] = mode2;\n    });\n});\nfunction get(name) {\n    return typeof name === \"string\" ? index[name.toLowerCase()] || NoMode : name && name.name ? get(name.name) : NoMode;\n}\nvar mode = (0, _core.deprecate)(\"Mode.mode\", \"Mode.get\", get);\nfunction all() {\n    return modes.slice();\n}\nvar entries = (0, _core.deprecate)(\"Mode.mode\", \"Mode.all\", all);\nfunction names() {\n    return modes.map((mode2)=>mode2.name);\n}\nfunction toMode(mode2) {\n    const [modeNum, setNum, alt, name, triad, seventh, alias] = mode2;\n    const aliases = alias ? [\n        alias\n    ] : [];\n    const chroma = Number(setNum).toString(2);\n    const intervals = (0, _scaleType.get)(name).intervals;\n    return {\n        empty: false,\n        intervals,\n        modeNum,\n        chroma,\n        normalized: chroma,\n        name,\n        setNum,\n        alt,\n        triad,\n        seventh,\n        aliases\n    };\n}\nfunction notes(modeName, tonic) {\n    return get(modeName).intervals.map((ivl)=>(0, _core.transpose)(tonic, ivl));\n}\nfunction chords(chords2) {\n    return (modeName, tonic)=>{\n        const mode2 = get(modeName);\n        if (mode2.empty) return [];\n        const triads2 = (0, _collection.rotate)(mode2.modeNum, chords2);\n        const tonics = mode2.intervals.map((i)=>(0, _core.transpose)(tonic, i));\n        return triads2.map((triad, i)=>tonics[i] + triad);\n    };\n}\nvar triads = chords(MODES.map((x)=>x[4]));\nvar seventhChords = chords(MODES.map((x)=>x[5]));\nfunction distance(destination, source) {\n    const from = get(source);\n    const to = get(destination);\n    if (from.empty || to.empty) return \"\";\n    return (0, _interval.simplify)((0, _interval.transposeFifths)(\"1P\", to.alt - from.alt));\n}\nfunction relativeTonic(destination, source, tonic) {\n    return (0, _core.transpose)(tonic, distance(destination, source));\n}\nvar mode_default = {\n    get,\n    names,\n    all,\n    distance,\n    relativeTonic,\n    notes,\n    triads,\n    seventhChords,\n    entries,\n    mode\n};\n\n},{\"@tonaljs/collection\":\"1Wcp8\",\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/interval\":\"4MaG0\",\"@tonaljs/pcset\":\"YAaan\",\"@tonaljs/scale-type\":\"dBTmw\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"awNwV\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"default\", ()=>progression_default);\nparcelHelpers.export(exports, \"fromRomanNumerals\", ()=>fromRomanNumerals);\nparcelHelpers.export(exports, \"toRomanNumerals\", ()=>toRomanNumerals);\nvar _chord = require(\"@tonaljs/chord\");\nvar _core = require(\"@tonaljs/core\");\nvar _romanNumeral = require(\"@tonaljs/roman-numeral\");\nfunction fromRomanNumerals(tonic, chords) {\n    const romanNumerals = chords.map((0, _romanNumeral.get));\n    return romanNumerals.map((rn)=>(0, _core.transpose)(tonic, (0, _core.interval)(rn)) + rn.chordType);\n}\nfunction toRomanNumerals(tonic, chords) {\n    return chords.map((chord)=>{\n        const [note, chordType] = (0, _chord.tokenize)(chord);\n        const intervalName = (0, _core.distance)(tonic, note);\n        const roman = (0, _romanNumeral.get)((0, _core.interval)(intervalName));\n        return roman.name + chordType;\n    });\n}\nvar progression_default = {\n    fromRomanNumerals,\n    toRomanNumerals\n};\n\n},{\"@tonaljs/chord\":\"a8kbl\",\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/roman-numeral\":\"ajhQU\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"clvSL\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"chromatic\", ()=>chromatic);\nparcelHelpers.export(exports, \"default\", ()=>range_default);\nparcelHelpers.export(exports, \"numeric\", ()=>numeric);\nvar _collection = require(\"@tonaljs/collection\");\nvar _midi = require(\"@tonaljs/midi\");\nfunction numeric(notes) {\n    const midi = (0, _collection.compact)(notes.map((note)=>typeof note === \"number\" ? note : (0, _midi.toMidi)(note)));\n    if (!notes.length || midi.length !== notes.length) return [];\n    return midi.reduce((result, note)=>{\n        const last = result[result.length - 1];\n        return result.concat((0, _collection.range)(last, note).slice(1));\n    }, [\n        midi[0]\n    ]);\n}\nfunction chromatic(notes, options) {\n    return numeric(notes).map((midi)=>(0, _midi.midiToNoteName)(midi, options));\n}\nvar range_default = {\n    numeric,\n    chromatic\n};\n\n},{\"@tonaljs/collection\":\"1Wcp8\",\"@tonaljs/midi\":\"aFX9F\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"gaA4q\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"default\", ()=>scale_default);\nparcelHelpers.export(exports, \"degrees\", ()=>degrees);\nparcelHelpers.export(exports, \"detect\", ()=>detect);\nparcelHelpers.export(exports, \"extended\", ()=>extended);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"modeNames\", ()=>modeNames);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"rangeOf\", ()=>rangeOf);\nparcelHelpers.export(exports, \"reduced\", ()=>reduced);\nparcelHelpers.export(exports, \"scale\", ()=>scale);\nparcelHelpers.export(exports, \"scaleChords\", ()=>scaleChords);\nparcelHelpers.export(exports, \"scaleNotes\", ()=>scaleNotes);\nparcelHelpers.export(exports, \"steps\", ()=>steps);\nparcelHelpers.export(exports, \"tokenize\", ()=>tokenize);\nvar _chordType = require(\"@tonaljs/chord-type\");\nvar _collection = require(\"@tonaljs/collection\");\nvar _core = require(\"@tonaljs/core\");\nvar _note = require(\"@tonaljs/note\");\nvar _pcset = require(\"@tonaljs/pcset\");\nvar _scaleType = require(\"@tonaljs/scale-type\");\nvar NoScale = {\n    empty: true,\n    name: \"\",\n    type: \"\",\n    tonic: null,\n    setNum: NaN,\n    chroma: \"\",\n    normalized: \"\",\n    aliases: [],\n    notes: [],\n    intervals: []\n};\nfunction tokenize(name) {\n    if (typeof name !== \"string\") return [\n        \"\",\n        \"\"\n    ];\n    const i = name.indexOf(\" \");\n    const tonic = (0, _core.note)(name.substring(0, i));\n    if (tonic.empty) {\n        const n = (0, _core.note)(name);\n        return n.empty ? [\n            \"\",\n            name\n        ] : [\n            n.name,\n            \"\"\n        ];\n    }\n    const type = name.substring(tonic.name.length + 1);\n    return [\n        tonic.name,\n        type.length ? type : \"\"\n    ];\n}\nvar names = (0, _scaleType.names);\nfunction get(src) {\n    const tokens = Array.isArray(src) ? src : tokenize(src);\n    const tonic = (0, _core.note)(tokens[0]).name;\n    const st = (0, _scaleType.get)(tokens[1]);\n    if (st.empty) return NoScale;\n    const type = st.name;\n    const notes = tonic ? st.intervals.map((i)=>(0, _core.transpose)(tonic, i)) : [];\n    const name = tonic ? tonic + \" \" + type : type;\n    return {\n        ...st,\n        name,\n        type,\n        tonic,\n        notes\n    };\n}\nvar scale = (0, _core.deprecate)(\"Scale.scale\", \"Scale.get\", get);\nfunction detect(notes, options = {}) {\n    const notesChroma = (0, _pcset.chroma)(notes);\n    const tonic = (0, _core.note)(options.tonic ?? notes[0] ?? \"\");\n    const tonicChroma = tonic.chroma;\n    if (tonicChroma === void 0) return [];\n    const pitchClasses = notesChroma.split(\"\");\n    pitchClasses[tonicChroma] = \"1\";\n    const scaleChroma = (0, _collection.rotate)(tonicChroma, pitchClasses).join(\"\");\n    const match = (0, _scaleType.all)().find((scaleType)=>scaleType.chroma === scaleChroma);\n    const results = [];\n    if (match) results.push(tonic.name + \" \" + match.name);\n    if (options.match === \"exact\") return results;\n    extended(scaleChroma).forEach((scaleName)=>{\n        results.push(tonic.name + \" \" + scaleName);\n    });\n    return results;\n}\nfunction scaleChords(name) {\n    const s = get(name);\n    const inScale = (0, _pcset.isSubsetOf)(s.chroma);\n    return (0, _chordType.all)().filter((chord)=>inScale(chord.chroma)).map((chord)=>chord.aliases[0]);\n}\nfunction extended(name) {\n    const chroma2 = (0, _pcset.isChroma)(name) ? name : get(name).chroma;\n    const isSuperset = (0, _pcset.isSupersetOf)(chroma2);\n    return (0, _scaleType.all)().filter((scale2)=>isSuperset(scale2.chroma)).map((scale2)=>scale2.name);\n}\nfunction reduced(name) {\n    const isSubset = (0, _pcset.isSubsetOf)(get(name).chroma);\n    return (0, _scaleType.all)().filter((scale2)=>isSubset(scale2.chroma)).map((scale2)=>scale2.name);\n}\nfunction scaleNotes(notes) {\n    const pcset = notes.map((n)=>(0, _core.note)(n).pc).filter((x)=>x);\n    const tonic = pcset[0];\n    const scale2 = (0, _note.sortedUniqNames)(pcset);\n    return (0, _collection.rotate)(scale2.indexOf(tonic), scale2);\n}\nfunction modeNames(name) {\n    const s = get(name);\n    if (s.empty) return [];\n    const tonics = s.tonic ? s.notes : s.intervals;\n    return (0, _pcset.modes)(s.chroma).map((chroma2, i)=>{\n        const modeName = get(chroma2).name;\n        return modeName ? [\n            tonics[i],\n            modeName\n        ] : [\n            \"\",\n            \"\"\n        ];\n    }).filter((x)=>x[0]);\n}\nfunction getNoteNameOf(scale2) {\n    const names2 = Array.isArray(scale2) ? scaleNotes(scale2) : get(scale2).notes;\n    const chromas = names2.map((name)=>(0, _core.note)(name).chroma);\n    return (noteOrMidi)=>{\n        const currNote = typeof noteOrMidi === \"number\" ? (0, _core.note)((0, _note.fromMidi)(noteOrMidi)) : (0, _core.note)(noteOrMidi);\n        const height = currNote.height;\n        if (height === void 0) return void 0;\n        const chroma2 = height % 12;\n        const position = chromas.indexOf(chroma2);\n        if (position === -1) return void 0;\n        return (0, _note.enharmonic)(currNote.name, names2[position]);\n    };\n}\nfunction rangeOf(scale2) {\n    const getName = getNoteNameOf(scale2);\n    return (fromNote, toNote)=>{\n        const from = (0, _core.note)(fromNote).height;\n        const to = (0, _core.note)(toNote).height;\n        if (from === void 0 || to === void 0) return [];\n        return (0, _collection.range)(from, to).map(getName).filter((x)=>x);\n    };\n}\nfunction degrees(scaleName) {\n    const { intervals, tonic } = get(scaleName);\n    const transpose2 = (0, _core.tonicIntervalsTransposer)(intervals, tonic);\n    return (degree)=>degree ? transpose2(degree > 0 ? degree - 1 : degree) : \"\";\n}\nfunction steps(scaleName) {\n    const { intervals, tonic } = get(scaleName);\n    return (0, _core.tonicIntervalsTransposer)(intervals, tonic);\n}\nvar scale_default = {\n    degrees,\n    detect,\n    extended,\n    get,\n    modeNames,\n    names,\n    rangeOf,\n    reduced,\n    scaleChords,\n    scaleNotes,\n    steps,\n    tokenize,\n    // deprecated\n    scale\n};\n\n},{\"@tonaljs/chord-type\":\"eTgcZ\",\"@tonaljs/collection\":\"1Wcp8\",\"@tonaljs/core\":\"bWVEi\",\"@tonaljs/note\":\"7cXrC\",\"@tonaljs/pcset\":\"YAaan\",\"@tonaljs/scale-type\":\"dBTmw\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"3z6jp\":[function(require,module,exports) {\n// index.ts\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nparcelHelpers.export(exports, \"default\", ()=>time_signature_default);\nparcelHelpers.export(exports, \"get\", ()=>get);\nparcelHelpers.export(exports, \"names\", ()=>names);\nparcelHelpers.export(exports, \"parse\", ()=>parse);\nvar NONE = {\n    empty: true,\n    name: \"\",\n    upper: void 0,\n    lower: void 0,\n    type: void 0,\n    additive: []\n};\nvar NAMES = [\n    \"4/4\",\n    \"3/4\",\n    \"2/4\",\n    \"2/2\",\n    \"12/8\",\n    \"9/8\",\n    \"6/8\",\n    \"3/8\"\n];\nfunction names() {\n    return NAMES.slice();\n}\nvar REGEX = /^(\\d*\\d(?:\\+\\d)*)\\/(\\d+)$/;\nvar CACHE = /* @__PURE__ */ new Map();\nfunction get(literal) {\n    const stringifiedLiteral = JSON.stringify(literal);\n    const cached = CACHE.get(stringifiedLiteral);\n    if (cached) return cached;\n    const ts = build(parse(literal));\n    CACHE.set(stringifiedLiteral, ts);\n    return ts;\n}\nfunction parse(literal) {\n    if (typeof literal === \"string\") {\n        const [_, up2, low] = REGEX.exec(literal) || [];\n        return parse([\n            up2,\n            low\n        ]);\n    }\n    const [up, down] = literal;\n    const denominator = +down;\n    if (typeof up === \"number\") return [\n        up,\n        denominator\n    ];\n    const list = up.split(\"+\").map((n)=>+n);\n    return list.length === 1 ? [\n        list[0],\n        denominator\n    ] : [\n        list,\n        denominator\n    ];\n}\nvar time_signature_default = {\n    names,\n    parse,\n    get\n};\nvar isPowerOfTwo = (x)=>Math.log(x) / Math.log(2) % 1 === 0;\nfunction build([up, down]) {\n    const upper = Array.isArray(up) ? up.reduce((a, b)=>a + b, 0) : up;\n    const lower = down;\n    if (upper === 0 || lower === 0) return NONE;\n    const name = Array.isArray(up) ? `${up.join(\"+\")}/${down}` : `${up}/${down}`;\n    const additive = Array.isArray(up) ? up : [];\n    const type = lower === 4 || lower === 2 ? \"simple\" : lower === 8 && upper % 3 === 0 ? \"compound\" : isPowerOfTwo(lower) ? \"irregular\" : \"irrational\";\n    return {\n        empty: false,\n        name,\n        type,\n        upper,\n        lower,\n        additive\n    };\n}\n\n},{\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"agpaG\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nvar _tonal = require(\"tonal\");\nvar _util = require(\"../Util\");\nvar _utilDefault = parcelHelpers.interopDefault(_util);\nclass Row {\n    constructor(){\n        this.cells = new Array(7).fill().map((_, i)=>new Cell(i));\n    }\n    compareWithAnswer(answerScale) {\n        const answerMidis = (0, _utilDefault.default).toMidiArray(answerScale.notes);\n        const guessMidis = (0, _utilDefault.default).toMidiArray(this.getNotes());\n        return (0, _utilDefault.default).calculateGuess(guessMidis, answerMidis);\n    }\n    getNotes() {\n        const octave = 5; // Doesn't matter\n        const notes = this.cells.map((cell)=>(0, _tonal.Note).get(`${cell.value}${octave}`));\n        return notes;\n    }\n    setValue(value) {\n        const cell = this.nextEmptyCell();\n        if (cell) cell.setValue(value);\n    }\n    displayResults(results) {\n        this.cells.forEach((cell, i)=>cell.setStatus(results[i]));\n    }\n    clearLast() {\n        const cell = this.lastCell();\n        if (cell) cell.setValue(null);\n    }\n    getNextCellIndex() {\n        for(let i = 0; i < this.cells.length; i++){\n            if (this.cells[i].isEmpty()) return i;\n        }\n        return -1;\n    }\n    // Returns last filled cell\n    lastCell() {\n        const i = this.getNextCellIndex();\n        if (i === -1) // All cells filled, so return last\n        return this.cells[this.cells.length - 1];\n        else if (i === 0) // All cells empty\n        return;\n        return this.cells[i - 1];\n    }\n    nextEmptyCell() {\n        const i = this.getNextCellIndex();\n        if (i === -1) return null;\n        return this.cells[i];\n    }\n    isFilled() {\n        return !this.nextEmptyCell();\n    }\n    view() {\n        return (0, _mithrilDefault.default)(\"div.row\", this.cells.map((box)=>(0, _mithrilDefault.default)(box)));\n    }\n}\nexports.default = Row;\nclass Cell {\n    static #_ = // Corresponding CSS classes\n    this.STATUS_CLASSES = {\n        \"C\": \"correct\",\n        \"W\": \"wrong-position\",\n        \"X\": \"wrong\",\n        \" \": \"none\"\n    };\n    constructor(column){\n        this.column = column; // Used for css delay\n        this.value = null;\n        this.status = \" \";\n        this.flipped = false;\n    }\n    setValue(value) {\n        this.value = value;\n    }\n    setStatus(status) {\n        this.status = status;\n        this.flipped = true;\n    }\n    isEmpty() {\n        return this.value === null;\n    }\n    view() {\n        return (0, _mithrilDefault.default)(\"div.cell\", [\n            (0, _mithrilDefault.default)(`div.delay${this.column}`, {\n                class: this.flipped ? \"inner-flipped\" : \"inner\"\n            }, [\n                (0, _mithrilDefault.default)(\"div.front\", this.value),\n                (0, _mithrilDefault.default)(\"div.back\", {\n                    class: Cell.STATUS_CLASSES[this.status]\n                }, this.value)\n            ])\n        ]);\n    }\n}\n\n},{\"mithril\":\"13PaA\",\"tonal\":\"ekC5i\",\"../Util\":\"dMJ8U\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"f4MXy\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nvar _util = require(\"../Util\");\nvar _utilDefault = parcelHelpers.interopDefault(_util);\nclass GameEndContent {\n    static #_ = this.SHARE_ICON = `<svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"20\" height=\"30\" viewBox=\"0 0 30 30\"> <path d=\"M 23 3 A 4 4 0 0 0 19 7 A 4 4 0 0 0 19.09375 7.8359375 L 10.011719 12.376953 A 4 4 0 0 0 7 11 A 4 4 0 0 0 3 15 A 4 4 0 0 0 7 19 A 4 4 0 0 0 10.013672 17.625 L 19.089844 22.164062 A 4 4 0 0 0 19 23 A 4 4 0 0 0 23 27 A 4 4 0 0 0 27 23 A 4 4 0 0 0 23 19 A 4 4 0 0 0 19.986328 20.375 L 10.910156 15.835938 A 4 4 0 0 0 11 15 A 4 4 0 0 0 10.90625 14.166016 L 19.988281 9.625 A 4 4 0 0 0 23 11 A 4 4 0 0 0 27 7 A 4 4 0 0 0 23 3 z\"></path></svg>`;\n    constructor(onreset, answerScaleName, shareable){\n        this.onreset = onreset;\n        this.answerScaleName = answerScaleName;\n        this.shareable = shareable;\n    }\n    async onshare() {\n        await navigator.clipboard.writeText(this.shareable);\n    }\n    view() {\n        return [\n            (0, _mithrilDefault.default)(\"h1\", (0, _utilDefault.default).normalizeScaleName(this.answerScaleName)),\n            (0, _mithrilDefault.default)(\"div.button\", {\n                onclick: this.onshare.bind(this)\n            }, [\n                (0, _mithrilDefault.default)(\"span.share\", \"Share\"),\n                (0, _mithrilDefault.default).trust(GameEndContent.SHARE_ICON)\n            ]),\n            (0, _mithrilDefault.default)(\"div.button\", {\n                onclick: ()=>{\n                    this.onreset();\n                }\n            }, \"Next Scale-dle!\")\n        ];\n    }\n}\nexports.default = GameEndContent;\n\n},{\"mithril\":\"13PaA\",\"../Util\":\"dMJ8U\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}],\"anOXe\":[function(require,module,exports) {\nvar parcelHelpers = require(\"@parcel/transformer-js/src/esmodule-helpers.js\");\nparcelHelpers.defineInteropFlag(exports);\nvar _mithril = require(\"mithril\");\nvar _mithrilDefault = parcelHelpers.interopDefault(_mithril);\nclass HelpContent {\n    static #_ = this.CONTENT = `\n  <h1>How to Play</h1>\n  <p>\n  Guess the Scale-dle in 6 tries.\n  </p>\n\n  <p>\n  Possible scale types are:\n  <a href=\"https://en.wikipedia.org/wiki/Major_scale\" target=\"_blank\">major</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Minor_scale\" target=\"_blank\">minor</a> (natural),\n  <a href=\"https://en.wikipedia.org/wiki/Harmonic_minor_scale\" target=\"_blank\">harmonic minor</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Minor_scale#Melodic_minor_scale\" target=\"_blank\">melodic minor</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Dorian_mode#Renaissance_Dorian_anchor\" target=\"_blank\">dorian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Phrygian_mode\" target=\"_blank\">phrygian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Lydian_mode\" target=\"_blank\">lydian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Mixolydian_mode\" target=\"_blank\">mixolydian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Locrian_mode\" target=\"_blank\">locrian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Pentatonic_scale#Major_pentatonic_scale\" target=\"_blank\">pentatonic</a>, and\n  <a href=\"https://en.wikipedia.org/wiki/Octatonic_scale\" target=\"_blank\">octatonic</a> (whole-half and half-whole).\n  </p>\n\n  <p>\n  In this game, all scales are 7 notes and ascending. For the octatonic scale, only the first 7 notes are used, and for the pentatonic scale, the 6th and 7th notes repeat the 1st and 2nd notes.\n  </p>\n\n  <p>\n  Scale-dle was inspired by\n  <a href=\"https://www.nytimes.com/games/wordle/\">Wordle</a>\n  and was created for the 2023 GitHub Game Off.\n  </p>\n\n  <p>\n  Check out the code on <a href=\"https://github.com/seanyeh/scaledle\">GitHub!</a>\n  </p>\n  `;\n    view() {\n        return (0, _mithrilDefault.default).trust(HelpContent.CONTENT);\n    }\n}\nexports.default = HelpContent;\n\n},{\"mithril\":\"13PaA\",\"@parcel/transformer-js/src/esmodule-helpers.js\":\"k3151\"}]},[\"bn6ru\"], \"bn6ru\", \"parcelRequire94c2\")\n\n//# sourceMappingURL=index.14c6f0a4.js.map\n","import m from \"mithril\";\nimport MainPage from \"./components/MainPage\";\n\n// Set up routing by connecting components to routes\nm.route(document.body, \"/\", {\n  \"/\": MainPage,\n});\n\n","\"use strict\"\n\nvar hyperscript = require(\"./hyperscript\")\nvar request = require(\"./request\")\nvar mountRedraw = require(\"./mount-redraw\")\n\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.Fragment = \"[\"\nm.mount = mountRedraw.mount\nm.route = require(\"./route\")\nm.render = require(\"./render\")\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.jsonp = request.jsonp\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.parsePathname = require(\"./pathname/parse\")\nm.buildPathname = require(\"./pathname/build\")\nm.vnode = require(\"./render/vnode\")\nm.PromisePolyfill = require(\"./promise/polyfill\")\nm.censor = require(\"./util/censor\")\n\nmodule.exports = m\n","\"use strict\"\n\nvar hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\n\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\n\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\n\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\n\tvnode.tag = state.tag\n\tvnode.attrs = {}\n\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\n\t\tattrs = newAttrs\n\t}\n\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\n\tif (hasClass) attrs.class = null\n\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn vnode\n}\n\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\n\tvnode.tag = selector\n\treturn vnode\n}\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nfunction Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\n\t\t\t\t\tisKeyed && (input[i] != null || typeof input[i] === \"boolean\")\n\t\t\t\t\t\t? \"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.\"\n\t\t\t\t\t\t: \"In fragments, vnodes must either all have keys or none have keys.\"\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\n// Call via `hyperscriptVnode.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript` and `fragment` factories and define this as\n// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril.js requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// module.exports = function(attrs, ...children) {\n//     if (attrs == null || typeof attrs === \"object\" && attrs.tag == null && !Array.isArray(attrs)) {\n//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]\n//     } else {\n//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]\n//         attrs = undefined\n//     }\n//\n//     if (attrs == null) attrs = {}\n//     return Vnode(\"\", attrs.key, attrs, children)\n// }\nmodule.exports = function() {\n\tvar attrs = arguments[this], start = this + 1, children\n\n\tif (attrs == null) {\n\t\tattrs = {}\n\t} else if (typeof attrs !== \"object\" || attrs.tag != null || Array.isArray(attrs)) {\n\t\tattrs = {}\n\t\tstart = this\n\t}\n\n\tif (arguments.length === start + 1) {\n\t\tchildren = arguments[start]\n\t\tif (!Array.isArray(children)) children = [children]\n\t} else {\n\t\tchildren = []\n\t\twhile (start < arguments.length) children.push(arguments[start++])\n\t}\n\n\treturn Vnode(\"\", attrs.key, attrs, children)\n}\n","// This exists so I'm only saving it once.\n\"use strict\"\n\nmodule.exports = {}.hasOwnProperty\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar hyperscriptVnode = require(\"./hyperscriptVnode\")\n\nmodule.exports = function() {\n\tvar vnode = hyperscriptVnode.apply(0, arguments)\n\n\tvnode.tag = \"[\"\n\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\treturn vnode\n}\n","\"use strict\"\n\nvar PromisePolyfill = require(\"./promise/promise\")\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./request/request\")(typeof window !== \"undefined\" ? window : null, PromisePolyfill, mountRedraw.redraw)\n","/* global window */\n\"use strict\"\n\nvar PromisePolyfill = require(\"./polyfill\")\n\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") {\n\t\twindow.Promise = PromisePolyfill\n\t} else if (!window.Promise.prototype.finally) {\n\t\twindow.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tmodule.exports = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") {\n\t\tglobal.Promise = PromisePolyfill\n\t} else if (!global.Promise.prototype.finally) {\n\t\tglobal.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tmodule.exports = global.Promise\n} else {\n\tmodule.exports = PromisePolyfill\n}\n","\"use strict\"\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with 'new'.\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function.\")\n\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved with itself.\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.prototype.finally = function(callback) {\n\treturn this.then(\n\t\tfunction(value) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn value\n\t\t\t})\n\t\t},\n\t\tfunction(reason) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn PromisePolyfill.reject(reason);\n\t\t\t})\n\t\t}\n\t)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\n\nmodule.exports = PromisePolyfill\n","\"use strict\"\n\nvar render = require(\"./render\")\n\nmodule.exports = require(\"./api/mount-redraw\")(render, typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : null, typeof console !== \"undefined\" ? console : null)\n","\"use strict\"\n\nmodule.exports = require(\"./render/render\")(typeof window !== \"undefined\" ? window : null)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function($window) {\n\tvar $doc = $window && $window.document\n\tvar currentRedraw\n\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\n\tfunction getNameSpace(vnode) {\n\t\treturn vnode.attrs && vnode.attrs.xmlns || nameSpace[vnode.tag]\n\t}\n\n\t//sanity check to discourage people from doing `vnode.state = ...`\n\tfunction checkState(vnode, original) {\n\t\tif (vnode.state !== original) throw new Error(\"'vnode.state' must not be modified.\")\n\t}\n\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode) {\n\t\tvar original = vnode.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode, original)\n\t\t}\n\t}\n\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode.state = {}\n\t\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode, nextSibling) {\n\t\tvnode.dom = $doc.createTextNode(vnode.children)\n\t\tinsertNode(parent, vnode.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode, ns, nextSibling) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode.children\n\t\t}\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvnode.instance = []\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tvnode.instance.push(child)\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode, hooks, ns, nextSibling) {\n\t\tvar tag = vnode.tag\n\t\tvar attrs = vnode.attrs\n\t\tvar is = attrs && attrs.is\n\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tinsertNode(parent, element, nextSibling)\n\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tif (vnode.tag === \"select\" && attrs != null) setLateSelectAttrs(vnode, attrs)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode.tag.view === \"function\") {\n\t\t\tvnode.state = Object.create(vnode.tag)\n\t\t\tsentinel = vnode.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode.state = void 0\n\t\t\tsentinel = vnode.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode.state = (vnode.tag.prototype != null && typeof vnode.tag.prototype.view === \"function\") ? new vnode.tag(vnode) : vnode.tag(vnode)\n\t\t}\n\t\tinitLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tcreateNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t}\n\t}\n\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate\n\t// over the new list and for each new vnode, find the corresponding vnode in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\n\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\t//\n\t// The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n\t// like #1791 and #1999. We need to be smarter about those situations where adjascent old\n\t// nodes remain together in the new list in a way that isn't covered by parts one and\n\t// three of the diff algo.\n\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isOldKeyed !== isKeyed) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveNodes(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveNodes(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveNodes(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldNotUpdate(vnode, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, ns, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\tremoveHTML(parent, old)\n\t\t\tcreateHTML(parent, vnode, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tns = getNameSpace(vnode) || ns\n\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode)) {\n\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tvnode.instance = Vnode.normalize(callHook.call(vnode.state.view, vnode))\n\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode.state, vnode, hooks)\n\t\tif (vnode.attrs != null) updateLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode = vnodes[start]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequence\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\t// This covers a really specific edge case:\n\t// - Parent node is keyed and contains child\n\t// - Child is removed, returns unresolved promise in `onbeforeremove`\n\t// - Parent node is moved in keyed diff\n\t// - Remaining children still need moved appropriately\n\t//\n\t// Ideally, I'd track removed nodes as well, but that introduces a lot more\n\t// complexity and I'm not exactly interested in doing that.\n\tfunction moveNodes(parent, vnode, nextSibling) {\n\t\tvar frag = $doc.createDocumentFragment()\n\t\tmoveChildToFrag(parent, frag, vnode)\n\t\tinsertNode(parent, frag, nextSibling)\n\t}\n\tfunction moveChildToFrag(parent, frag, vnode) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode.dom != null && vnode.dom.parentNode === parent) {\n\t\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\t\tvnode = vnode.instance\n\t\t\t\tif (vnode != null) continue\n\t\t\t} else if (vnode.tag === \"<\") {\n\t\t\t\tfor (var i = 0; i < vnode.instance.length; i++) {\n\t\t\t\t\tfrag.appendChild(vnode.instance[i])\n\t\t\t\t}\n\t\t\t} else if (vnode.tag !== \"[\") {\n\t\t\t\t// Don't recurse for text nodes *or* elements, just fragments\n\t\t\t\tfrag.appendChild(vnode.dom)\n\t\t\t} else if (vnode.children.length === 1) {\n\t\t\t\tvnode = vnode.children[0]\n\t\t\t\tif (vnode != null) continue\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < vnode.children.length; i++) {\n\t\t\t\t\tvar child = vnode.children[i]\n\t\t\t\t\tif (child != null) moveChildToFrag(parent, frag, child)\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction maybeSetContentEditable(vnode) {\n\t\tif (vnode.attrs == null || (\n\t\t\tvnode.attrs.contenteditable == null && // attribute\n\t\t\tvnode.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted.\")\n\t\treturn true\n\t}\n\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) removeNode(parent, vnode)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode) {\n\t\tvar mask = 0\n\t\tvar original = vnode.state\n\t\tvar stateResult, attrsResult\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.state.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tmask = 1\n\t\t\t\tstateResult = result\n\t\t\t}\n\t\t}\n\t\tif (vnode.attrs && typeof vnode.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode.attrs.onbeforeremove, vnode)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tmask |= 2\n\t\t\t\tattrsResult = result\n\t\t\t}\n\t\t}\n\t\tcheckState(vnode, original)\n\n\t\t// If we can, try to fast-path it and avoid all the overhead of awaiting\n\t\tif (!mask) {\n\t\t\tonremove(vnode)\n\t\t\tremoveChild(parent, vnode)\n\t\t} else {\n\t\t\tif (stateResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 1) { mask &= 2; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tstateResult.then(next, next)\n\t\t\t}\n\t\t\tif (attrsResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 2) { mask &= 1; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tattrsResult.then(next, next)\n\t\t\t}\n\t\t}\n\n\t\tfunction reallyRemove() {\n\t\t\tcheckState(vnode, original)\n\t\t\tonremove(vnode)\n\t\t\tremoveChild(parent, vnode)\n\t\t}\n\t}\n\tfunction removeHTML(parent, vnode) {\n\t\tfor (var i = 0; i < vnode.instance.length; i++) {\n\t\t\tparent.removeChild(vnode.instance[i])\n\t\t}\n\t}\n\tfunction removeChild(parent, vnode) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode.dom != null && vnode.dom.parentNode === parent) {\n\t\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\t\tvnode = vnode.instance\n\t\t\t\tif (vnode != null) continue\n\t\t\t} else if (vnode.tag === \"<\") {\n\t\t\t\tremoveHTML(parent, vnode)\n\t\t\t} else {\n\t\t\t\tif (vnode.tag !== \"[\") {\n\t\t\t\t\tparent.removeChild(vnode.dom)\n\t\t\t\t\tif (!Array.isArray(vnode.children)) break\n\t\t\t\t}\n\t\t\t\tif (vnode.children.length === 1) {\n\t\t\t\t\tvnode = vnode.children[0]\n\t\t\t\t\tif (vnode != null) continue\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = 0; i < vnode.children.length; i++) {\n\t\t\t\t\t\tvar child = vnode.children[i]\n\t\t\t\t\t\tif (child != null) removeChild(parent, child)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\tfunction onremove(vnode) {\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onremove === \"function\") callHook.call(vnode.state.onremove, vnode)\n\t\tif (vnode.attrs && typeof vnode.attrs.onremove === \"function\") callHook.call(vnode.attrs.onremove, vnode)\n\t\tif (typeof vnode.tag !== \"string\") {\n\t\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\t} else {\n\t\t\tvar children = vnode.children\n\t\t\tif (Array.isArray(children)) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t//\n\t\t// Also, the DOM does things to inputs based on the value, so it needs set first.\n\t\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\t\tif (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type)\n\t\tvar isFileInput = attrs != null && vnode.tag === \"input\" && attrs.type === \"file\"\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns, isFileInput)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns, isFileInput) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\" || key === \"type\" && vnode.tag === \"input\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, value)\n\t\telse if (hasPropertyKey(vnode, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\t//setting input[type=file][value] to same value causes an error to be generated if it's non-empty\n\t\t\t\tif ((vnode.tag === \"input\" || vnode.tag === \"textarea\") && vnode.dom.value === \"\" + value && (isFileInput || vnode.dom === activeElement())) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"select\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode.tag === \"option\" && old !== null && vnode.dom.value === \"\" + value) return\n\t\t\t\t//setting input[type=file][value] to different value is an error if it's non-empty\n\t\t\t\t// Not ideal, but it at least works around the most common source of uncaught exceptions for now.\n\t\t\t\tif (isFileInput && \"\" + value !== \"\") { console.error(\"`value` is read-only on file inputs!\"); return }\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\tvnode.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") updateEvent(vnode, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& key !== \"title\" // creates \"null\" as title\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode.tag === \"option\"\n\t\t\t\t|| vnode.tag === \"select\" && vnode.dom.selectedIndex === -1 && vnode.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode, attrs) {\n\t\tif (\"value\" in attrs) {\n\t\t\tif(attrs.value === null) {\n\t\t\t\tif (vnode.dom.selectedIndex !== -1) vnode.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode.dom.value !== normalized || vnode.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\tif (old && old === attrs) {\n\t\t\tconsole.warn(\"Don't reuse attrs object, use new object for every redraw, this will throw in next major\")\n\t\t}\n\t\tif (attrs != null) {\n\t\t\t// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\t//\n\t\t\t// Also, the DOM does things to inputs based on the value, so it needs set first.\n\t\t\t// See: https://github.com/MithrilJS/mithril.js/issues/2622\n\t\t\tif (vnode.tag === \"input\" && attrs.type != null) vnode.dom.setAttribute(\"type\", attrs.type)\n\t\t\tvar isFileInput = vnode.tag === \"input\" && attrs.type === \"file\"\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns, isFileInput)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs == null || attrs[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === activeElement() || vnode.tag === \"option\" && vnode.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode.tag.indexOf(\"-\") > -1 || vnode.attrs != null && vnode.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode.dom\n\t}\n\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style.cssText = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style.cssText = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler === \"function\") result = handler.call(ev.currentTarget, ev)\n\t\telse if (typeof handler.handleEvent === \"function\") handler.handleEvent(ev)\n\t\tif (this._ && ev.redraw !== false) (0, this._)()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tif (vnode.events != null) {\n\t\t\tvnode.events._ = currentRedraw\n\t\t\tif (vnode.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode.events[key] == null) vnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode.events[key] != null) vnode.dom.removeEventListener(key.slice(2), vnode.events, false)\n\t\t\t\tvnode.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode.events = new EventDict()\n\t\t\tvnode.dom.addEventListener(key.slice(2), vnode.events, false)\n\t\t\tvnode.events[key] = value\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode))\n\t}\n\tfunction shouldNotUpdate(vnode, old) {\n\t\tdo {\n\t\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.attrs.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode.state.onbeforeupdate, vnode, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode.dom = old.dom\n\t\tvnode.domSize = old.domSize\n\t\tvnode.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode.attrs = old.attrs\n\t\tvnode.children = old.children\n\t\tvnode.text = old.text\n\t\treturn true\n\t}\n\n\tvar currentDOM\n\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\t\tif (currentDOM != null && dom.contains(currentDOM)) {\n\t\t\tthrow new TypeError(\"Node is currently being rendered to and thus is locked.\")\n\t\t}\n\t\tvar prevRedraw = currentRedraw\n\t\tvar prevDOM = currentDOM\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\n\t\tcurrentDOM = dom\n\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\ttry {\n\t\t\t// First time rendering into a node clears it out\n\t\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t\tdom.vnodes = vnodes\n\t\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t\tcurrentDOM = prevDOM\n\t\t}\n\t}\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(render, schedule, console) {\n\tvar subscriptions = []\n\tvar pending = false\n\tvar offset = -1\n\n\tfunction sync() {\n\t\tfor (offset = 0; offset < subscriptions.length; offset += 2) {\n\t\t\ttry { render(subscriptions[offset], Vnode(subscriptions[offset + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\toffset = -1\n\t}\n\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\n\tredraw.sync = sync\n\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount expects a component, not a vnode.\")\n\t\t}\n\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\tif (index <= offset) offset -= 2\n\t\t\trender(root, [])\n\t\t}\n\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender(root, Vnode(component), redraw)\n\t\t}\n\t}\n\n\treturn {mount: mount, redraw: redraw}\n}\n","\"use strict\"\n\nvar buildPathname = require(\"../pathname/build\")\nvar hasOwn = require(\"../util/hasOwn\")\n\nmodule.exports = function($window, Promise, oncompletion) {\n\tvar callbackCount = 0\n\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\n\t// In case the global Promise is some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\n\tfunction makeRequest(factory) {\n\t\treturn function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\t\tfactory(buildPathname(url, args.params), args, function (data) {\n\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tdata[i] = new args.type(data[i])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse data = new args.type(data)\n\t\t\t\t\t}\n\t\t\t\t\tresolve(data)\n\t\t\t\t}, reject)\n\t\t\t})\n\t\t\tif (args.background === true) return promise\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\n\t\t\treturn wrap(promise)\n\n\t\t\tfunction wrap(promise) {\n\t\t\t\tvar then = promise.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise. At the time of writing, this is\n\t\t\t\t// only necessary for V8, but their behavior is the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request/tests/test-request.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise.constructor = PromiseProxy\n\t\t\t\tpromise.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next)\n\t\t\t\t}\n\t\t\t\treturn promise\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hasHeader(args, name) {\n\t\tfor (var key in args.headers) {\n\t\t\tif (hasOwn.call(args.headers, key) && key.toLowerCase() === name) return true\n\t\t}\n\t\treturn false\n\t}\n\n\treturn {\n\t\trequest: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData || body instanceof $window.URLSearchParams)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false, isTimeout = false\n\t\t\tvar original = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, \"content-type\")) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, \"accept\")) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\n\t\t\tfor (var key in args.headers) {\n\t\t\t\tif (hasOwn.call(args.headers, key)) {\n\t\t\t\t\txhr.setRequestHeader(key, args.headers[key])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") {\n\t\t\t\t\t\t\t\t// Handle no-content which will not parse.\n\t\t\t\t\t\t\t\ttry { response = JSON.parse(ev.target.responseText) }\n\t\t\t\t\t\t\t\tcatch (e) { response = null }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (success) resolve(response)\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar completeErrorResponse = function() {\n\t\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (xhr.status === 0) {\n\t\t\t\t\t\t\t\t// Use setTimeout to push this code block onto the event queue\n\t\t\t\t\t\t\t\t// This allows `xhr.ontimeout` to run in the case that there is a timeout\n\t\t\t\t\t\t\t\t// Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject\n\t\t\t\t\t\t\t\t// as `xhr.onreadystatechange` will run before it\n\t\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t\tif (isTimeout) return\n\t\t\t\t\t\t\t\t\tcompleteErrorResponse()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else completeErrorResponse()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\txhr.ontimeout = function (ev) {\n\t\t\t\tisTimeout = true\n\t\t\t\tvar error = new Error(\"Request timed out\")\n\t\t\t\terror.code = ev.target.status\n\t\t\t\treject(error)\n\t\t\t}\n\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData || body instanceof $window.URLSearchParams) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t}),\n\t\tjsonp: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(data)\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t}\n\t\t\tscript.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") +\n\t\t\t\tencodeURIComponent(args.callbackKey || \"callback\") + \"=\" +\n\t\t\t\tencodeURIComponent(callbackName)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t}),\n\t}\n}\n","\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\nvar assign = require(\"../util/assign\")\n\n// Returns `path` from `template` + `params`\nmodule.exports = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names must be separated by either a '/', '-', or '.'.\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\n\tassign(query, params)\n\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m, key, variadic) {\n\t\tdelete query[key]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key] == null) return m\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key] : encodeURIComponent(String(params[key]))\n\t})\n\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result = resolved.slice(0, newPathEnd)\n\n\tif (queryIndex >= 0) result += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result\n}\n","\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n","// This exists so I'm only saving it once.\n\"use strict\"\n\nvar hasOwn = require(\"./hasOwn\")\n\nmodule.exports = Object.assign || function(target, source) {\n\tfor (var key in source) {\n\t\tif (hasOwn.call(source, key)) target[key] = source[key]\n\t}\n}\n","\"use strict\"\n\nvar mountRedraw = require(\"./mount-redraw\")\n\nmodule.exports = require(\"./api/router\")(typeof window !== \"undefined\" ? window : null, mountRedraw)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar m = require(\"../render/hyperscript\")\nvar Promise = require(\"../promise/promise\")\n\nvar buildPathname = require(\"../pathname/build\")\nvar parsePathname = require(\"../pathname/parse\")\nvar compileTemplate = require(\"../pathname/compileTemplate\")\nvar assign = require(\"../util/assign\")\nvar censor = require(\"../util/censor\")\n\nvar sentinel = {}\n\nfunction decodeURIComponentSave(component) {\n\ttry {\n\t\treturn decodeURIComponent(component)\n\t} catch(e) {\n\t\treturn component\n\t}\n}\n\nmodule.exports = function($window, mountRedraw) {\n\tvar callAsync = $window == null\n\t\t// In case Mithril.js' loaded globally without the DOM, let's not break\n\t\t? null\n\t\t: typeof $window.setImmediate === \"function\" ? $window.setImmediate : $window.setTimeout\n\tvar p = Promise.resolve()\n\n\tvar scheduled = false\n\n\t// state === 0: init\n\t// state === 1: scheduled\n\t// state === 2: done\n\tvar ready = false\n\tvar state = 0\n\n\tvar compiled, fallbackRoute\n\n\tvar currentResolver = sentinel, component, attrs, currentPath, lastUpdate\n\n\tvar RouterRoot = {\n\t\tonbeforeupdate: function() {\n\t\t\tstate = state ? 2 : 1\n\t\t\treturn !(!state || sentinel === currentResolver)\n\t\t},\n\t\tonremove: function() {\n\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t\t$window.removeEventListener(\"hashchange\", resolveRoute, false)\n\t\t},\n\t\tview: function() {\n\t\t\tif (!state || sentinel === currentResolver) return\n\t\t\t// Wrap in a fragment to preserve existing key semantics\n\t\t\tvar vnode = [Vnode(component, attrs.key, attrs)]\n\t\t\tif (currentResolver) vnode = currentResolver.render(vnode[0])\n\t\t\treturn vnode\n\t\t},\n\t}\n\n\tvar SKIP = route.SKIP = {}\n\n\tfunction resolveRoute() {\n\t\tscheduled = false\n\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t// but that's not our problem.\n\t\tvar prefix = $window.location.hash\n\t\tif (route.prefix[0] !== \"#\") {\n\t\t\tprefix = $window.location.search + prefix\n\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t}\n\t\t}\n\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t// since the representation is consistently a relatively poorly\n\t\t// optimized cons string.\n\t\tvar path = prefix.concat()\n\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponentSave)\n\t\t\t.slice(route.prefix.length)\n\t\tvar data = parsePathname(path)\n\n\t\tassign(data.params, $window.history.state)\n\n\t\tfunction reject(e) {\n\t\t\tconsole.error(e)\n\t\t\tsetPath(fallbackRoute, null, {replace: true})\n\t\t}\n\n\t\tloop(0)\n\t\tfunction loop(i) {\n\t\t\t// state === 0: init\n\t\t\t// state === 1: scheduled\n\t\t\t// state === 2: done\n\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\tvar localComp = payload\n\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\tattrs = data.params, currentPath = path, lastUpdate = null\n\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\tif (state === 2) mountRedraw.redraw()\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tstate = 2\n\t\t\t\t\t\t\tmountRedraw.redraw.sync()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\treturn payload.onmatch(data.params, path, matchedRoute)\n\t\t\t\t\t\t}).then(update, path === fallbackRoute ? null : reject)\n\t\t\t\t\t}\n\t\t\t\t\telse update(\"div\")\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (path === fallbackRoute) {\n\t\t\t\tthrow new Error(\"Could not resolve default route \" + fallbackRoute + \".\")\n\t\t\t}\n\t\t\tsetPath(fallbackRoute, null, {replace: true})\n\t\t}\n\t}\n\n\t// Set it unconditionally so `m.route.set` and `m.route.Link` both work,\n\t// even if neither `pushState` nor `hashchange` are supported. It's\n\t// cleared if `hashchange` is used, since that makes it automatically\n\t// async.\n\tfunction fireAsync() {\n\t\tif (!scheduled) {\n\t\t\tscheduled = true\n\t\t\t// TODO: just do `mountRedraw.redraw()` here and elide the timer\n\t\t\t// dependency. Note that this will muck with tests a *lot*, so it's\n\t\t\t// not as easy of a change as it sounds.\n\t\t\tcallAsync(resolveRoute)\n\t\t}\n\t}\n\n\tfunction setPath(path, data, options) {\n\t\tpath = buildPathname(path, data)\n\t\tif (ready) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path\n\t\t}\n\t}\n\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (!root) throw new TypeError(\"DOM element being rendered to does not exist.\")\n\n\t\tcompiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a '/'.\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either '/', '.', or '-'.\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tfallbackRoute = defaultRoute\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes.\")\n\t\t\t}\n\t\t}\n\n\t\tif (typeof $window.history.pushState === \"function\") {\n\t\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\t\t} else if (route.prefix[0] === \"#\") {\n\t\t\t$window.addEventListener(\"hashchange\", resolveRoute, false)\n\t\t}\n\n\t\tready = true\n\t\tmountRedraw.mount(root, RouterRoot)\n\t\tresolveRoute()\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\tsetPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode) {\n\t\t\t// Omit the used parameters from the rendered element - they are\n\t\t\t// internal. Also, censor the various lifecycle methods.\n\t\t\t//\n\t\t\t// We don't strip the other parameters because for convenience we\n\t\t\t// let them be specified in the selector as well.\n\t\t\tvar child = m(\n\t\t\t\tvnode.attrs.selector || \"a\",\n\t\t\t\tcensor(vnode.attrs, [\"options\", \"params\", \"selector\", \"onclick\"]),\n\t\t\t\tvnode.children\n\t\t\t)\n\t\t\tvar options, onclick, href\n\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child.attrs.disabled = Boolean(child.attrs.disabled)) {\n\t\t\t\tchild.attrs.href = null\n\t\t\t\tchild.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want add `onclick` on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t} else {\n\t\t\t\toptions = vnode.attrs.options\n\t\t\t\tonclick = vnode.attrs.onclick\n\t\t\t\t// Easier to build it now to keep it isomorphic.\n\t\t\t\thref = buildPathname(child.attrs.href, vnode.attrs.params)\n\t\t\t\tchild.attrs.href = route.prefix + href\n\t\t\t\tchild.attrs.onclick = function(e) {\n\t\t\t\t\tvar result\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child\n\t\t},\n\t}\n\troute.param = function(key) {\n\t\treturn attrs && key != null ? attrs[key] : attrs\n\t}\n\n\treturn route\n}\n","\"use strict\"\n\nvar parseQueryString = require(\"../querystring/parse\")\n\n// Returns `{path, params}` from `url`\nmodule.exports = function(url) {\n\tvar queryIndex = url.indexOf(\"?\")\n\tvar hashIndex = url.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? url.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = url.slice(0, pathEnd).replace(/\\/{2,}/g, \"/\")\n\n\tif (!path) path = \"/\"\n\telse {\n\t\tif (path[0] !== \"/\") path = \"/\" + path\n\t\tif (path.length > 1 && path[path.length - 1] === \"/\") path = path.slice(0, -1)\n\t}\n\treturn {\n\t\tpath: path,\n\t\tparams: queryIndex < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex + 1, queryEnd)),\n\t}\n}\n","\"use strict\"\n\nfunction decodeURIComponentSave(str) {\n\ttry {\n\t\treturn decodeURIComponent(str)\n\t} catch(err) {\n\t\treturn str\n\t}\n}\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), counters = {}, data = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponentSave(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponentSave(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) {\n\t\t\t\t\tcounters[key] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j === levels.length - 1) cursor[level] = value\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data\n}\n","\"use strict\"\n\nvar parsePathname = require(\"./parse\")\n\n// Compiles a template into a function that takes a resolved path (without query\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled template to be the\n// output of `parsePathname`. Note that it does *not* remove query parameters\n// specified in the template.\nmodule.exports = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m, key, extra) {\n\t\t\tif (key == null) return \"\\\\\" + m\n\t\t\tkeys.push({k: key, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"$\")\n\treturn function(data) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data.path)\n\t\tvar values = regexp.exec(data.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\n","\"use strict\"\n\n// Note: this is mildly perf-sensitive.\n//\n// It does *not* use `delete` - dynamic `delete`s usually cause objects to bail\n// out into dictionary mode and just generally cause a bunch of optimization\n// issues within engines.\n//\n// Ideally, I would've preferred to do this, if it weren't for the optimization\n// issues:\n//\n// ```js\n// const hasOwn = require(\"./hasOwn\")\n// const magic = [\n//     \"key\", \"oninit\", \"oncreate\", \"onbeforeupdate\", \"onupdate\",\n//     \"onbeforeremove\", \"onremove\",\n// ]\n// module.exports = (attrs, extras) => {\n//     const result = Object.assign(Object.create(null), attrs)\n//     for (const key of magic) delete result[key]\n//     if (extras != null) for (const key of extras) delete result[key]\n//     return result\n// }\n// ```\n\nvar hasOwn = require(\"./hasOwn\")\n// Words in RegExp literals are sometimes mangled incorrectly by the internal bundler, so use RegExp().\nvar magic = new RegExp(\"^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$\")\n\nmodule.exports = function(attrs, extras) {\n\tvar result = {}\n\n\tif (extras != null) {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key) && extras.indexOf(key) < 0) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key) && !magic.test(key)) {\n\t\t\t\tresult[key] = attrs[key]\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result\n}\n","import m from \"mithril\";\n\nimport ControlButtons from \"./ControlButtons\";\nimport Modal from \"./Modal\";\nimport GameEndContent from \"./GameEndContent\";\nimport HelpContent from \"./HelpContent\";\nimport Keyboard from \"./Keyboard\";\nimport Row from \"./Row\";\nimport Util from \"../Util\";\n\nimport { Note, Scale } from \"tonal\";\n\nexport default class MainPage {\n  static readonly MAX_ROWS = 6;\n\n  isFinished: boolean;\n  modal: any;\n\n  static readonly HELP_ICON = `<svg width=\"80px\" height=\"30px\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M0 10C0 4.478 4.478 0 10 0c5.523 0 10 4.478 10 10 0 5.523-4.477 10-10 10-5.522 0-10-4.477-10-10zm11.125 2.002H8.989v-.141c.01-1.966.492-2.254 1.374-2.782.093-.056.19-.114.293-.178.73-.459 1.292-1.038 1.292-1.883 0-.948-.743-1.564-1.666-1.564-.851 0-1.657.398-1.712 1.533H6.304C6.364 4.693 8.18 3.5 10.294 3.5c2.306 0 3.894 1.447 3.894 3.488 0 1.382-.695 2.288-1.805 2.952l-.238.144c-.79.475-1.009.607-1.02 1.777V12zm.17 3.012a1.344 1.344 0 01-1.327 1.328 1.32 1.32 0 01-1.328-1.328 1.318 1.318 0 011.328-1.316c.712 0 1.322.592 1.328 1.316z\" fill=\"#5C5F62\"/></svg>`;\n\n  constructor() {\n    // Init components\n    this.keyboard = new Keyboard(this.setValue.bind(this));\n    this.controlButtons = new ControlButtons(\n      this.onEnter.bind(this),\n      this.onBackspace.bind(this)\n    );\n\n    const scaleNumber = Number(m.route.param(\"id\"));\n    this.reset( Number.isInteger(scaleNumber) ? scaleNumber : null);\n\n    this.modal = new Modal(this.closeModal.bind(this));\n\n    // Debug\n    window.M = this;\n  }\n\n  reset(scaleNumber: number = null) {\n    this.rows = new Array(MainPage.MAX_ROWS).fill().map(() => new Row());\n\n    this.isFinished = false;\n    this.currentRowIndex = 0;\n    this.scaleNumber = scaleNumber === null ? Util.getRandomScaleNumber() : scaleNumber;\n    this.answerScale = Util.getScaleByNumber(this.scaleNumber);\n\n    this.modalContent = null;\n\n    m.redraw();\n  }\n\n  openHelpModal() {\n    this.modalContent = HelpContent;\n  }\n\n  openEndGameModal() {\n    // Add delay to show animation\n    window.setTimeout(() => {\n      this.modalContent = new GameEndContent(\n        this.reset.bind(this),\n        this.answerScale.name,\n        this.getShareable()\n      );\n\n      m.redraw();\n    }, 2500);\n  }\n\n  closeModal() {\n    this.modalContent = null;\n  }\n\n  onEnter() {\n    if (this.isFinished) { return; }\n\n    if (!this.currentRow().isFilled()) {\n      return;\n    }\n\n    this.submitGuess();\n  }\n\n  onBackspace() {\n    if (this.isFinished) { return; }\n\n    this.currentRow().clearLast();\n  }\n\n  currentRow() {\n    return this.rows[this.currentRowIndex];\n  }\n\n  getShareable() {\n    const rows = this.rows.slice(0, this.currentRowIndex);\n    const fullResults = rows.map((row) => row.compareWithAnswer(this.answerScale));\n\n    return Util.resultsToShareable(fullResults, this.scaleNumber);\n  }\n\n  submitGuess() {\n    const results = this.currentRow().compareWithAnswer(this.answerScale);\n\n    this.currentRow().displayResults(results);\n    this.currentRowIndex++;\n\n    m.redraw();\n\n    if (results.every((x) => x === \"C\")) {\n      this.isFinished = true;\n      this.openEndGameModal();\n    }\n    else if (this.currentRowIndex >= MainPage.MAX_ROWS) {\n      this.isFinished = true;\n      this.openEndGameModal();\n    }\n  }\n\n  setValue(value: string) {\n    if (this.isFinished) { return; }\n\n    this.currentRow().setValue(value);\n    m.redraw();\n  }\n\n  view() {\n    return [\n      m(\"div#nav\", [\n        m(\"h1\", \"Scale-dle\"),\n        m(\"div#help\", { onclick: () => { this.openHelpModal(); }}, m.trust(MainPage.HELP_ICON)),\n      ]),\n      this.modalContent ? m(this.modal, m(this.modalContent)) : null,\n      m(\"div.grid\", this.rows.map((row) => m(row))),\n      m(this.controlButtons),\n      m(this.keyboard)\n    ];\n  }\n}\n","import m from \"mithril\";\n\nexport default class ControlButtons {\n  constructor(onEnter: any, onBackspace: any) {\n    this.onEnter = onEnter;\n    this.onBackspace = onBackspace;\n  }\n\n  view() {\n    return m(\"div#control\", [\n      m(\"div.button\", { onclick: this.onEnter }, \"enter\"),\n      m(\"div.button\", { onclick: this.onBackspace }, \"\"),\n    ]);\n  }\n}\n\n\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import m from \"mithril\";\n\nexport default class Modal {\n  constructor(onclose) {\n    this.onclose = onclose;\n  }\n\n  view(vnode) {\n    return m(\"div.modal\", [\n      m(\"span.close\", { onclick: this.onclose }, \"X\"),\n      m(\"div.content\", vnode.children)\n    ]);\n  }\n}\n","import m from \"mithril\";\n\nimport Util from \"../Util\";\n\nexport default class Keyboard {\n  callback: any;\n\n  constructor(callback) {\n    this.callback = callback;\n  }\n\n  initShapes(ctx) {\n    const width = ctx.canvas.clientWidth;\n    const height = ctx.canvas.clientHeight;\n    const keyWidth = width / 7;\n\n    const offsets = [(2/3), 1 + 2/3, 3 + 2/3, 4 + 2/3, 5 + 2/3];\n    this.blackKeys = offsets.map((offset) => [\n      offset*keyWidth, 0,\n      (2/3)*keyWidth, height/2\n    ]);\n\n    this.whiteKeys = Array(7).fill().map((_, i) => [\n      i*keyWidth, 0,\n      keyWidth, height\n    ]);\n  }\n\n  _inBounds(px, py, x, y, w, h) {\n    return px >= x && py >= y && px <= (x + w) && py <= (y + h);\n  }\n\n  onclick(e) {\n    const px = e.offsetX;\n    const py = e.offsetY;\n\n    let index = this.blackKeys.findIndex(([x, y, w, h]) => this._inBounds(px, py, x, y, w, h));\n    if (index !== -1) {\n      return this.callback(Util.BLACK_NOTES[index]);\n    }\n\n    index = this.whiteKeys.findIndex(([x, y, w, h]) => this._inBounds(px, py, x, y, w, h));\n    if (index !== -1) {\n      return this.callback(Util.WHITE_NOTES[index]);\n    }\n  }\n\n  drawKeyboard(ctx) {\n    this.initShapes(ctx);\n\n    ctx.fillStyle = \"white\";\n    ctx.textAlign = \"center\";\n    ctx.fillRect(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight);\n\n    // Draw white keys (only right edge)\n    ctx.fillStyle = \"black\";\n    this.whiteKeys.forEach(([x, y, w, h], i) => {\n      // Draw right edge\n      ctx.beginPath();\n      ctx.moveTo(x + w, 0);\n      ctx.lineTo(x + w, y + h);\n      ctx.stroke();\n\n      // Draw letter\n      ctx.font = \"24px sans-serif\";\n      ctx.fillText(Util.WHITE_NOTES[i], x + w/2, h - 30);\n    });\n\n    // Draw black keys\n    this.blackKeys.forEach(([x, y, w, h], i) => {\n      ctx.fillStyle = \"black\";\n      ctx.fillRect(x, y, w, h);\n\n      // Draw letter\n      ctx.fillStyle = \"white\";\n      ctx.font = \"16px sans-serif\";\n      ctx.fillText(Util.BLACK_NOTES[i], x + w/2, 30);\n      ctx.fillText(Util.BLACK_NOTES_FLAT[i], x + w/2, 60);\n    });\n  }\n\n  view() {\n    const attrs = {\n      oncreate: (vnode) => {\n        const ctx = vnode.dom.getContext(\"2d\");\n        this.drawKeyboard(ctx);\n        vnode.dom.addEventListener(\"click\", this.onclick.bind(this));\n      }\n    }\n\n    return m(\"div#canvas-wrapper\", [\n      m(\"canvas[width=400][height=180]\", attrs)\n    ]);\n  }\n}\n","import { Note, Scale } from \"tonal\";\n\nexport default class Util {\n  static readonly SCALE_TYPES = [\n    \"major\",\n    \"minor\",\n    \"harmonic minor\",\n    \"melodic minor\",\n    \"dorian\",\n    \"phrygian\",\n    \"lydian\",\n    \"mixolydian\",\n    \"locrian\",\n    \"pentatonic\",\n    \"whole-half diminished\",\n    \"half-whole diminished\"\n  ]\n\n  static readonly ROOTS = [\n    \"A\",\n    \"Bb\",\n    \"B\",\n    \"C\",\n    \"C#\",\n    \"D\",\n    \"Eb\",\n    \"E\",\n    \"F\",\n    \"F#\",\n    \"G\",\n    \"Ab\",\n  ];\n\n  static readonly BLACK_NOTES = [\"C#\", \"D#\", \"F#\", \"G#\", \"A#\"];\n  static readonly BLACK_NOTES_FLAT = [\"Db\", \"Eb\", \"Gb\", \"Ab\", \"Bb\"];\n  static readonly WHITE_NOTES = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\n\n  static getRandomScaleNumber() {\n    // TODO: use the proper algorithm rather than assuming 12 roots and scale types\n    return Math.floor(Math.random() * 144);\n  }\n\n  static getScaleByNumber(i: number) {\n    // TODO: use the proper algorithm rather than assuming 12 roots and scale types\n    const root = this.ROOTS[i%12];\n    const scaleType = this.SCALE_TYPES[Math.floor(i/12)];\n\n    const octave = 5; // Doesn't really matter\n    return Scale.get(`${root}${octave} ${scaleType}`);\n  }\n\n  // Get midi array\n  static toMidiArray(notes) {\n    return notes.map((noteName) => Note.get(noteName).midi % 12);\n  }\n\n  // Returns an array of results:\n  // \"C\": correct,\n  // \"W\": wrong spot,\n  // \"X\": does not exist\n  static calculateGuess(guess, rawAnswer) {\n    // Normalize correct to be same length as guess\n    const answer = rawAnswer.concat(rawAnswer).slice(0, guess.length);\n\n    // Make map of answer to track note usage\n    const answerMap = {};\n    answer.forEach((note) => {\n      if (!(note in answerMap)) {\n        answerMap[note] = 0;\n      }\n      answerMap[note]++;\n    });\n\n    const result = Array(guess.length);\n\n    // First pass to find correct notes\n    guess.forEach((note, i) => {\n      if (note === answer[i]) {\n        result[i] = \"C\";\n        answerMap[note]--;\n      }\n    });\n\n    // Second pass to figure out the other results\n    guess.forEach((note, i) => {\n      if (result[i] === \"C\") {\n        return;\n      }\n\n      if (answerMap[note]) {\n        result[i] = \"W\";\n        answerMap[note]--;\n      }\n      else {\n        result[i] = \"X\";\n      }\n    });\n\n    return result;\n  }\n\n  static readonly EMOJI_MAP = {\n    \"C\": \"\",\n    \"W\": \"\",\n    \"X\": \"\"\n  }\n  static readonly URL = \"seanyeh.github.io/scaledle\";\n\n  static resultsToShareable(resultsList, puzzleNumber): string {\n    const tries = resultsList.length;\n    const resultsStr = resultsList.map((results) => (\n      `${results.map((x) => Util.EMOJI_MAP[x]).join(\"\")}\\n`\n    )).join(\"\");\n\n    return `Scale-dle #${puzzleNumber} ${tries}/6\\n${resultsStr}\\n${Util.URL}`;\n  }\n\n  static normalizeScaleName(scaleName) {\n    // Remove octave from name\n    let newName = scaleName.replace(/[0-9]/, \"\");\n\n    // Rename diminished scales to octatonic\n    if (newName.includes(\"half-whole diminished\")) {\n      newName = newName.replace(\"half-whole diminished\", \"octatonic (half-whole)\");\n    }\n    else if (newName.includes(\"diminished\")) {\n      newName = newName.replace(\"diminished\", \"octatonic (whole-half)\");\n    }\n\n    return newName;\n  }\n}\n","// index.ts\nimport AbcNotation from \"@tonaljs/abc-notation\";\nimport * as Array from \"@tonaljs/array\";\nimport Chord from \"@tonaljs/chord\";\nimport ChordType from \"@tonaljs/chord-type\";\nimport Collection from \"@tonaljs/collection\";\nimport * as Core from \"@tonaljs/core\";\nimport DurationValue from \"@tonaljs/duration-value\";\nimport Interval from \"@tonaljs/interval\";\nimport Key from \"@tonaljs/key\";\nimport Midi from \"@tonaljs/midi\";\nimport Mode from \"@tonaljs/mode\";\nimport Note from \"@tonaljs/note\";\nimport Pcset from \"@tonaljs/pcset\";\nimport Progression from \"@tonaljs/progression\";\nimport Range from \"@tonaljs/range\";\nimport RomanNumeral from \"@tonaljs/roman-numeral\";\nimport Scale from \"@tonaljs/scale\";\nimport ScaleType from \"@tonaljs/scale-type\";\nimport TimeSignature from \"@tonaljs/time-signature\";\nexport * from \"@tonaljs/core\";\nvar Tonal = Core;\nvar PcSet = Pcset;\nvar ChordDictionary = ChordType;\nvar ScaleDictionary = ScaleType;\nexport {\n  AbcNotation,\n  Array,\n  Chord,\n  ChordDictionary,\n  ChordType,\n  Collection,\n  Core,\n  DurationValue,\n  Interval,\n  Key,\n  Midi,\n  Mode,\n  Note,\n  PcSet,\n  Pcset,\n  Progression,\n  Range,\n  RomanNumeral,\n  Scale,\n  ScaleDictionary,\n  ScaleType,\n  TimeSignature,\n  Tonal\n};\n//# sourceMappingURL=index.mjs.map","import AbcNotation from \"@tonaljs/abc-notation\";\nimport * as Array from \"@tonaljs/array\";\nimport Chord from \"@tonaljs/chord\";\nimport ChordType from \"@tonaljs/chord-type\";\nimport Collection from \"@tonaljs/collection\";\nimport * as Core from \"@tonaljs/core\";\nimport DurationValue from \"@tonaljs/duration-value\";\nimport Interval from \"@tonaljs/interval\";\nimport Key from \"@tonaljs/key\";\nimport Midi from \"@tonaljs/midi\";\nimport Mode from \"@tonaljs/mode\";\nimport Note from \"@tonaljs/note\";\nimport Pcset from \"@tonaljs/pcset\";\nimport Progression from \"@tonaljs/progression\";\nimport Range from \"@tonaljs/range\";\nimport RomanNumeral from \"@tonaljs/roman-numeral\";\nimport Scale from \"@tonaljs/scale\";\nimport ScaleType from \"@tonaljs/scale-type\";\nimport TimeSignature from \"@tonaljs/time-signature\";\n\nexport * from \"@tonaljs/core\";\n\n// deprecated (backwards compatibility)\nconst Tonal = Core;\nconst PcSet = Pcset;\nconst ChordDictionary = ChordType;\nconst ScaleDictionary = ScaleType;\n\nexport {\n  AbcNotation,\n  Array,\n  Chord,\n  ChordType,\n  Collection,\n  Core,\n  DurationValue,\n  Note,\n  Interval,\n  Key,\n  Midi,\n  Mode,\n  Pcset,\n  Progression,\n  Range,\n  RomanNumeral,\n  Scale,\n  ScaleType,\n  TimeSignature,\n  // backwards API compatibility (3.0)\n  Tonal,\n  PcSet,\n  ChordDictionary,\n  ScaleDictionary,\n};\n","// index.ts\nimport { distance as dist, note, transpose as tr } from \"@tonaljs/core\";\nvar fillStr = (character, times) => Array(times + 1).join(character);\nvar REGEX = /^(_{1,}|=|\\^{1,}|)([abcdefgABCDEFG])([,']*)$/;\nfunction tokenize(str) {\n  const m = REGEX.exec(str);\n  if (!m) {\n    return [\"\", \"\", \"\"];\n  }\n  return [m[1], m[2], m[3]];\n}\nfunction abcToScientificNotation(str) {\n  const [acc, letter, oct] = tokenize(str);\n  if (letter === \"\") {\n    return \"\";\n  }\n  let o = 4;\n  for (let i = 0; i < oct.length; i++) {\n    o += oct.charAt(i) === \",\" ? -1 : 1;\n  }\n  const a = acc[0] === \"_\" ? acc.replace(/_/g, \"b\") : acc[0] === \"^\" ? acc.replace(/\\^/g, \"#\") : \"\";\n  return letter.charCodeAt(0) > 96 ? letter.toUpperCase() + a + (o + 1) : letter + a + o;\n}\nfunction scientificToAbcNotation(str) {\n  const n = note(str);\n  if (n.empty || !n.oct && n.oct !== 0) {\n    return \"\";\n  }\n  const { letter, acc, oct } = n;\n  const a = acc[0] === \"b\" ? acc.replace(/b/g, \"_\") : acc.replace(/#/g, \"^\");\n  const l = oct > 4 ? letter.toLowerCase() : letter;\n  const o = oct === 5 ? \"\" : oct > 4 ? fillStr(\"'\", oct - 5) : fillStr(\",\", 4 - oct);\n  return a + l + o;\n}\nfunction transpose(note2, interval) {\n  return scientificToAbcNotation(tr(abcToScientificNotation(note2), interval));\n}\nfunction distance(from, to) {\n  return dist(abcToScientificNotation(from), abcToScientificNotation(to));\n}\nvar abc_notation_default = {\n  abcToScientificNotation,\n  scientificToAbcNotation,\n  tokenize,\n  transpose,\n  distance\n};\nexport {\n  abcToScientificNotation,\n  abc_notation_default as default,\n  distance,\n  scientificToAbcNotation,\n  tokenize,\n  transpose\n};\n//# sourceMappingURL=index.mjs.map","import { distance as dist, note, transpose as tr } from \"@tonaljs/core\";\n\nconst fillStr = (character: string, times: number) =>\n  Array(times + 1).join(character);\n\nconst REGEX = /^(_{1,}|=|\\^{1,}|)([abcdefgABCDEFG])([,']*)$/;\n\ntype AbcTokens = [string, string, string];\n\nexport function tokenize(str: string): AbcTokens {\n  const m = REGEX.exec(str);\n  if (!m) {\n    return [\"\", \"\", \"\"];\n  }\n  return [m[1], m[2], m[3]];\n}\n\n/**\n * Convert a (string) note in ABC notation into a (string) note in scientific notation\n *\n * @example\n * abcToScientificNotation(\"c\") // => \"C5\"\n */\nexport function abcToScientificNotation(str: string): string {\n  const [acc, letter, oct] = tokenize(str);\n  if (letter === \"\") {\n    return \"\";\n  }\n  let o = 4;\n  for (let i = 0; i < oct.length; i++) {\n    o += oct.charAt(i) === \",\" ? -1 : 1;\n  }\n  const a =\n    acc[0] === \"_\"\n      ? acc.replace(/_/g, \"b\")\n      : acc[0] === \"^\"\n      ? acc.replace(/\\^/g, \"#\")\n      : \"\";\n  return letter.charCodeAt(0) > 96\n    ? letter.toUpperCase() + a + (o + 1)\n    : letter + a + o;\n}\n\n/**\n * Convert a (string) note in scientific notation into a (string) note in ABC notation\n *\n * @example\n * scientificToAbcNotation(\"C#4\") // => \"^C\"\n */\nexport function scientificToAbcNotation(str: string): string {\n  const n = note(str);\n  if (n.empty || (!n.oct && n.oct !== 0)) {\n    return \"\";\n  }\n  const { letter, acc, oct } = n;\n  const a = acc[0] === \"b\" ? acc.replace(/b/g, \"_\") : acc.replace(/#/g, \"^\");\n  const l = oct > 4 ? letter.toLowerCase() : letter;\n  const o =\n    oct === 5 ? \"\" : oct > 4 ? fillStr(\"'\", oct - 5) : fillStr(\",\", 4 - oct);\n  return a + l + o;\n}\n\nexport function transpose(note: string, interval: string): string {\n  return scientificToAbcNotation(tr(abcToScientificNotation(note), interval));\n}\n\nexport function distance(from: string, to: string): string {\n  return dist(abcToScientificNotation(from), abcToScientificNotation(to));\n}\n\nexport default {\n  abcToScientificNotation,\n  scientificToAbcNotation,\n  tokenize,\n  transpose,\n  distance,\n};\n","// src/utils.ts\nvar fillStr = (s, n) => Array(Math.abs(n) + 1).join(s);\nfunction deprecate(original, alternative, fn) {\n  return function(...args) {\n    console.warn(`${original} is deprecated. Use ${alternative}.`);\n    return fn.apply(this, args);\n  };\n}\n\n// src/named.ts\nfunction isNamed(src) {\n  return src !== null && typeof src === \"object\" && typeof src.name === \"string\" ? true : false;\n}\n\n// src/pitch.ts\nfunction isPitch(pitch) {\n  return pitch !== null && typeof pitch === \"object\" && typeof pitch.step === \"number\" && typeof pitch.alt === \"number\" ? true : false;\n}\nvar FIFTHS = [0, 2, 4, -1, 1, 3, 5];\nvar STEPS_TO_OCTS = FIFTHS.map(\n  (fifths) => Math.floor(fifths * 7 / 12)\n);\nfunction encode(pitch) {\n  const { step, alt, oct, dir = 1 } = pitch;\n  const f = FIFTHS[step] + 7 * alt;\n  if (oct === void 0) {\n    return [dir * f];\n  }\n  const o = oct - STEPS_TO_OCTS[step] - 4 * alt;\n  return [dir * f, dir * o];\n}\nvar FIFTHS_TO_STEPS = [3, 0, 4, 1, 5, 2, 6];\nfunction decode(coord) {\n  const [f, o, dir] = coord;\n  const step = FIFTHS_TO_STEPS[unaltered(f)];\n  const alt = Math.floor((f + 1) / 7);\n  if (o === void 0) {\n    return { step, alt, dir };\n  }\n  const oct = o + 4 * alt + STEPS_TO_OCTS[step];\n  return { step, alt, oct, dir };\n}\nfunction unaltered(f) {\n  const i = (f + 1) % 7;\n  return i < 0 ? 7 + i : i;\n}\n\n// src/note.ts\nvar NoNote = { empty: true, name: \"\", pc: \"\", acc: \"\" };\nvar cache = /* @__PURE__ */ new Map();\nvar stepToLetter = (step) => \"CDEFGAB\".charAt(step);\nvar altToAcc = (alt) => alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt);\nvar accToAlt = (acc) => acc[0] === \"b\" ? -acc.length : acc.length;\nfunction note(src) {\n  const stringSrc = JSON.stringify(src);\n  const cached = cache.get(stringSrc);\n  if (cached) {\n    return cached;\n  }\n  const value = typeof src === \"string\" ? parse(src) : isPitch(src) ? note(pitchName(src)) : isNamed(src) ? note(src.name) : NoNote;\n  cache.set(stringSrc, value);\n  return value;\n}\nvar REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\nfunction tokenizeNote(str) {\n  const m = REGEX.exec(str);\n  return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\n}\nfunction coordToNote(noteCoord) {\n  return note(decode(noteCoord));\n}\nvar mod = (n, m) => (n % m + m) % m;\nvar SEMI = [0, 2, 4, 5, 7, 9, 11];\nfunction parse(noteName) {\n  const tokens = tokenizeNote(noteName);\n  if (tokens[0] === \"\" || tokens[3] !== \"\") {\n    return NoNote;\n  }\n  const letter = tokens[0];\n  const acc = tokens[1];\n  const octStr = tokens[2];\n  const step = (letter.charCodeAt(0) + 3) % 7;\n  const alt = accToAlt(acc);\n  const oct = octStr.length ? +octStr : void 0;\n  const coord = encode({ step, alt, oct });\n  const name = letter + acc + octStr;\n  const pc = letter + acc;\n  const chroma = (SEMI[step] + alt + 120) % 12;\n  const height = oct === void 0 ? mod(SEMI[step] + alt, 12) - 12 * 99 : SEMI[step] + alt + 12 * (oct + 1);\n  const midi = height >= 0 && height <= 127 ? height : null;\n  const freq = oct === void 0 ? null : Math.pow(2, (height - 69) / 12) * 440;\n  return {\n    empty: false,\n    acc,\n    alt,\n    chroma,\n    coord,\n    freq,\n    height,\n    letter,\n    midi,\n    name,\n    oct,\n    pc,\n    step\n  };\n}\nfunction pitchName(props) {\n  const { step, alt, oct } = props;\n  const letter = stepToLetter(step);\n  if (!letter) {\n    return \"\";\n  }\n  const pc = letter + altToAcc(alt);\n  return oct || oct === 0 ? pc + oct : pc;\n}\n\n// src/interval.ts\nvar NoInterval = { empty: true, name: \"\", acc: \"\" };\nvar INTERVAL_TONAL_REGEX = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\nvar INTERVAL_SHORTHAND_REGEX = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\nvar REGEX2 = new RegExp(\n  \"^\" + INTERVAL_TONAL_REGEX + \"|\" + INTERVAL_SHORTHAND_REGEX + \"$\"\n);\nfunction tokenizeInterval(str) {\n  const m = REGEX2.exec(`${str}`);\n  if (m === null) {\n    return [\"\", \"\"];\n  }\n  return m[1] ? [m[1], m[2]] : [m[4], m[3]];\n}\nvar cache2 = {};\nfunction interval(src) {\n  return typeof src === \"string\" ? cache2[src] || (cache2[src] = parse2(src)) : isPitch(src) ? interval(pitchName2(src)) : isNamed(src) ? interval(src.name) : NoInterval;\n}\nvar SIZES = [0, 2, 4, 5, 7, 9, 11];\nvar TYPES = \"PMMPPMM\";\nfunction parse2(str) {\n  const tokens = tokenizeInterval(str);\n  if (tokens[0] === \"\") {\n    return NoInterval;\n  }\n  const num = +tokens[0];\n  const q = tokens[1];\n  const step = (Math.abs(num) - 1) % 7;\n  const t = TYPES[step];\n  if (t === \"M\" && q === \"P\") {\n    return NoInterval;\n  }\n  const type = t === \"M\" ? \"majorable\" : \"perfectable\";\n  const name = \"\" + num + q;\n  const dir = num < 0 ? -1 : 1;\n  const simple = num === 8 || num === -8 ? num : dir * (step + 1);\n  const alt = qToAlt(type, q);\n  const oct = Math.floor((Math.abs(num) - 1) / 7);\n  const semitones = dir * (SIZES[step] + alt + 12 * oct);\n  const chroma = (dir * (SIZES[step] + alt) % 12 + 12) % 12;\n  const coord = encode({ step, alt, oct, dir });\n  return {\n    empty: false,\n    name,\n    num,\n    q,\n    step,\n    alt,\n    dir,\n    type,\n    simple,\n    semitones,\n    chroma,\n    coord,\n    oct\n  };\n}\nfunction coordToInterval(coord, forceDescending) {\n  const [f, o = 0] = coord;\n  const isDescending = f * 7 + o * 12 < 0;\n  const ivl = forceDescending || isDescending ? [-f, -o, -1] : [f, o, 1];\n  return interval(decode(ivl));\n}\nfunction qToAlt(type, q) {\n  return q === \"M\" && type === \"majorable\" || q === \"P\" && type === \"perfectable\" ? 0 : q === \"m\" && type === \"majorable\" ? -1 : /^A+$/.test(q) ? q.length : /^d+$/.test(q) ? -1 * (type === \"perfectable\" ? q.length : q.length + 1) : 0;\n}\nfunction pitchName2(props) {\n  const { step, alt, oct = 0, dir } = props;\n  if (!dir) {\n    return \"\";\n  }\n  const calcNum = step + 1 + 7 * oct;\n  const num = calcNum === 0 ? step + 1 : calcNum;\n  const d = dir < 0 ? \"-\" : \"\";\n  const type = TYPES[step] === \"M\" ? \"majorable\" : \"perfectable\";\n  const name = d + num + altToQ(type, alt);\n  return name;\n}\nfunction altToQ(type, alt) {\n  if (alt === 0) {\n    return type === \"majorable\" ? \"M\" : \"P\";\n  } else if (alt === -1 && type === \"majorable\") {\n    return \"m\";\n  } else if (alt > 0) {\n    return fillStr(\"A\", alt);\n  } else {\n    return fillStr(\"d\", type === \"perfectable\" ? alt : alt + 1);\n  }\n}\n\n// src/distance.ts\nfunction transpose(noteName, intervalName) {\n  const note2 = note(noteName);\n  const intervalCoord = Array.isArray(intervalName) ? intervalName : interval(intervalName).coord;\n  if (note2.empty || !intervalCoord || intervalCoord.length < 2) {\n    return \"\";\n  }\n  const noteCoord = note2.coord;\n  const tr = noteCoord.length === 1 ? [noteCoord[0] + intervalCoord[0]] : [noteCoord[0] + intervalCoord[0], noteCoord[1] + intervalCoord[1]];\n  return coordToNote(tr).name;\n}\nfunction tonicIntervalsTransposer(intervals, tonic) {\n  const len = intervals.length;\n  return (normalized) => {\n    if (!tonic)\n      return \"\";\n    const index = normalized < 0 ? (len - -normalized % len) % len : normalized % len;\n    const octaves = Math.floor(normalized / len);\n    const root = transpose(tonic, [0, octaves]);\n    return transpose(root, intervals[index]);\n  };\n}\nfunction distance(fromNote, toNote) {\n  const from = note(fromNote);\n  const to = note(toNote);\n  if (from.empty || to.empty) {\n    return \"\";\n  }\n  const fcoord = from.coord;\n  const tcoord = to.coord;\n  const fifths = tcoord[0] - fcoord[0];\n  const octs = fcoord.length === 2 && tcoord.length === 2 ? tcoord[1] - fcoord[1] : -Math.floor(fifths * 7 / 12);\n  const forceDescending = to.height === from.height && to.midi !== null && from.midi !== null && from.step > to.step;\n  return coordToInterval([fifths, octs], forceDescending).name;\n}\nexport {\n  accToAlt,\n  altToAcc,\n  coordToInterval,\n  coordToNote,\n  decode,\n  deprecate,\n  distance,\n  encode,\n  fillStr,\n  interval,\n  isNamed,\n  isPitch,\n  note,\n  stepToLetter,\n  tokenizeInterval,\n  tokenizeNote,\n  tonicIntervalsTransposer,\n  transpose\n};\n//# sourceMappingURL=index.mjs.map","/**\n * Fill a string with a repeated character\n *\n * @param character\n * @param repetition\n */\nexport const fillStr = (s: string, n: number) => Array(Math.abs(n) + 1).join(s);\n\nexport function deprecate<\n  ResultFn extends (this: any, ...newArgs: any[]) => ReturnType<ResultFn>\n>(original: string, alternative: string, fn: ResultFn) {\n  return function (this: unknown, ...args: unknown[]): ReturnType<ResultFn> {\n    // tslint:disable-next-line\n    console.warn(`${original} is deprecated. Use ${alternative}.`);\n    return fn.apply(this, args);\n  };\n}\n","export interface Named {\n  readonly name: string;\n}\n\nexport interface NamedFound {\n  readonly empty: false;\n}\n\nexport interface NotFound extends Named {\n  readonly empty: true;\n  readonly name: \"\";\n}\n\nexport function isNamed(src: any): src is Named {\n  return src !== null && typeof src === \"object\" && typeof src.name === \"string\"\n    ? true\n    : false;\n}\n","import { Named } from \"./named\";\n\ntype Fifths = number;\ntype Octaves = number;\nexport type Direction = 1 | -1;\n\nexport type PitchClassCoordinates = [Fifths];\nexport type NoteCoordinates = [Fifths, Octaves];\nexport type IntervalCoordinates = [Fifths, Octaves, Direction];\nexport type PitchCoordinates =\n  | PitchClassCoordinates\n  | NoteCoordinates\n  | IntervalCoordinates;\n\n/**\n * Pitch properties\n *\n * - {number} step - The step number: 0 = C, 1 = D, ... 6 = B\n * - {number} alt - Number of alterations: -2 = 'bb', -1 = 'b', 0 = '', 1 = '#', ...\n * - {number} [oct] = The octave (undefined when is a coord class)\n * - {number} [dir] = Interval direction (undefined when is not an interval)\n */\nexport interface Pitch {\n  readonly step: number;\n  readonly alt: number;\n  readonly oct?: number; // undefined for pitch classes\n  readonly dir?: Direction; // undefined for notes\n}\n\nexport function isPitch(pitch: any): pitch is Pitch {\n  return pitch !== null &&\n    typeof pitch === \"object\" &&\n    typeof pitch.step === \"number\" &&\n    typeof pitch.alt === \"number\"\n    ? true\n    : false;\n}\n\n// The number of fifths of [C, D, E, F, G, A, B]\nconst FIFTHS = [0, 2, 4, -1, 1, 3, 5];\n// The number of octaves it span each step\nconst STEPS_TO_OCTS = FIFTHS.map((fifths: number) =>\n  Math.floor((fifths * 7) / 12)\n);\n\nexport function encode(pitch: Pitch): PitchCoordinates {\n  const { step, alt, oct, dir = 1 } = pitch;\n  const f = FIFTHS[step] + 7 * alt;\n  if (oct === undefined) {\n    return [dir * f];\n  }\n  const o = oct - STEPS_TO_OCTS[step] - 4 * alt;\n  return [dir * f, dir * o];\n}\n\n// We need to get the steps from fifths\n// Fifths for CDEFGAB are [ 0, 2, 4, -1, 1, 3, 5 ]\n// We add 1 to fifths to avoid negative numbers, so:\n// for [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"] we have:\nconst FIFTHS_TO_STEPS = [3, 0, 4, 1, 5, 2, 6];\n\nexport function decode(coord: PitchCoordinates): Pitch {\n  const [f, o, dir] = coord;\n  const step = FIFTHS_TO_STEPS[unaltered(f)];\n  const alt = Math.floor((f + 1) / 7);\n  if (o === undefined) {\n    return { step, alt, dir };\n  }\n  const oct = o + 4 * alt + STEPS_TO_OCTS[step];\n  return { step, alt, oct, dir };\n}\n\n// Return the number of fifths as if it were unaltered\nfunction unaltered(f: number): number {\n  const i = (f + 1) % 7;\n  return i < 0 ? 7 + i : i;\n}\n","import { isNamed, Named } from \"./named\";\nimport { decode, encode, isPitch, Pitch, PitchCoordinates } from \"./pitch\";\nimport { fillStr } from \"./utils\";\n\nexport type NoteWithOctave = string;\nexport type PcName = string;\nexport type NoteName = NoteWithOctave | PcName;\nexport type NoteLiteral = NoteName | Pitch | Named;\n\nexport interface Note extends Pitch, Named {\n  readonly empty: boolean;\n  readonly name: NoteName;\n  readonly letter: string;\n  readonly acc: string;\n  readonly pc: PcName;\n  readonly chroma: number;\n  readonly height: number;\n  readonly coord: PitchCoordinates;\n  readonly midi: number | null;\n  readonly freq: number | null;\n}\n\nexport interface NoNote extends Partial<Note> {\n  empty: true;\n  name: \"\";\n  pc: \"\";\n  acc: \"\";\n}\nconst NoNote: NoNote = { empty: true, name: \"\", pc: \"\", acc: \"\" };\n\nconst cache: Map<NoteLiteral | undefined, Note | NoNote> = new Map();\n\nexport const stepToLetter = (step: number) => \"CDEFGAB\".charAt(step);\nexport const altToAcc = (alt: number): string =>\n  alt < 0 ? fillStr(\"b\", -alt) : fillStr(\"#\", alt);\nexport const accToAlt = (acc: string): number =>\n  acc[0] === \"b\" ? -acc.length : acc.length;\n\n/**\n * Given a note literal (a note name or a note object), returns the Note object\n * @example\n * note('Bb4') // => { name: \"Bb4\", midi: 70, chroma: 10, ... }\n */\nexport function note(src: NoteLiteral): Note | NoNote {\n  const stringSrc = JSON.stringify(src);\n\n  const cached = cache.get(stringSrc);\n  if (cached) {\n    return cached;\n  }\n\n  const value =\n    typeof src === \"string\"\n      ? parse(src)\n      : isPitch(src)\n      ? note(pitchName(src))\n      : isNamed(src)\n      ? note(src.name)\n      : NoNote;\n  cache.set(stringSrc, value);\n  return value;\n}\n\ntype NoteTokens = [string, string, string, string];\n\nconst REGEX = /^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)$/;\n\n/**\n * @private\n */\nexport function tokenizeNote(str: string): NoteTokens {\n  const m = REGEX.exec(str) as string[];\n  return [m[1].toUpperCase(), m[2].replace(/x/g, \"##\"), m[3], m[4]];\n}\n\n/**\n * @private\n */\nexport function coordToNote(noteCoord: PitchCoordinates): Note {\n  return note(decode(noteCoord)) as Note;\n}\n\nconst mod = (n: number, m: number) => ((n % m) + m) % m;\n\nconst SEMI = [0, 2, 4, 5, 7, 9, 11];\nfunction parse(noteName: NoteName): Note | NoNote {\n  const tokens = tokenizeNote(noteName);\n  if (tokens[0] === \"\" || tokens[3] !== \"\") {\n    return NoNote;\n  }\n\n  const letter = tokens[0];\n  const acc = tokens[1];\n  const octStr = tokens[2];\n\n  const step = (letter.charCodeAt(0) + 3) % 7;\n  const alt = accToAlt(acc);\n  const oct = octStr.length ? +octStr : undefined;\n  const coord = encode({ step, alt, oct });\n\n  const name = letter + acc + octStr;\n  const pc = letter + acc;\n  const chroma = (SEMI[step] + alt + 120) % 12;\n  const height =\n    oct === undefined\n      ? mod(SEMI[step] + alt, 12) - 12 * 99\n      : SEMI[step] + alt + 12 * (oct + 1);\n  const midi = height >= 0 && height <= 127 ? height : null;\n  const freq = oct === undefined ? null : Math.pow(2, (height - 69) / 12) * 440;\n\n  return {\n    empty: false,\n    acc,\n    alt,\n    chroma,\n    coord,\n    freq,\n    height,\n    letter,\n    midi,\n    name,\n    oct,\n    pc,\n    step,\n  };\n}\n\nfunction pitchName(props: Pitch): NoteName {\n  const { step, alt, oct } = props;\n  const letter = stepToLetter(step);\n  if (!letter) {\n    return \"\";\n  }\n\n  const pc = letter + altToAcc(alt);\n  return oct || oct === 0 ? pc + oct : pc;\n}\n","import { isNamed, Named } from \"./named\";\nimport {\n  decode,\n  Direction,\n  encode,\n  IntervalCoordinates,\n  isPitch,\n  Pitch,\n  PitchCoordinates,\n} from \"./pitch\";\nimport { fillStr } from \"./utils\";\n\nexport type IntervalName = string;\nexport type IntervalLiteral = IntervalName | Pitch | Named;\n\ntype Quality =\n  | \"dddd\"\n  | \"ddd\"\n  | \"dd\"\n  | \"d\"\n  | \"m\"\n  | \"M\"\n  | \"P\"\n  | \"A\"\n  | \"AA\"\n  | \"AAA\"\n  | \"AAAA\";\ntype Type = \"perfectable\" | \"majorable\";\n\nexport interface Interval extends Pitch, Named {\n  readonly empty: boolean;\n  readonly name: IntervalName;\n  readonly num: number;\n  readonly q: Quality;\n  readonly type: Type;\n  readonly step: number;\n  readonly alt: number;\n  readonly dir: Direction;\n  readonly simple: number;\n  readonly semitones: number;\n  readonly chroma: number;\n  readonly coord: IntervalCoordinates;\n  readonly oct: number;\n}\n\nexport interface NoInterval extends Partial<Interval> {\n  readonly empty: true;\n  readonly name: \"\";\n  readonly acc: \"\";\n}\n\nconst NoInterval: NoInterval = { empty: true, name: \"\", acc: \"\" };\n\n// shorthand tonal notation (with quality after number)\nconst INTERVAL_TONAL_REGEX = \"([-+]?\\\\d+)(d{1,4}|m|M|P|A{1,4})\";\n// standard shorthand notation (with quality before number)\nconst INTERVAL_SHORTHAND_REGEX = \"(AA|A|P|M|m|d|dd)([-+]?\\\\d+)\";\nconst REGEX = new RegExp(\n  \"^\" + INTERVAL_TONAL_REGEX + \"|\" + INTERVAL_SHORTHAND_REGEX + \"$\"\n);\n\ntype IntervalTokens = [string, string];\n\n/**\n * @private\n */\nexport function tokenizeInterval(str?: IntervalName): IntervalTokens {\n  const m = REGEX.exec(`${str}`);\n  if (m === null) {\n    return [\"\", \"\"];\n  }\n  return m[1] ? [m[1], m[2]] : [m[4], m[3]];\n}\n\nconst cache: { [key in string]: Interval | NoInterval } = {};\n\n/**\n * Get interval properties. It returns an object with:\n *\n * - name: the interval name\n * - num: the interval number\n * - type: 'perfectable' or 'majorable'\n * - q: the interval quality (d, m, M, A)\n * - dir: interval direction (1 ascending, -1 descending)\n * - simple: the simplified number\n * - semitones: the size in semitones\n * - chroma: the interval chroma\n *\n * @param {string} interval - the interval name\n * @return {Object} the interval properties\n *\n * @example\n * import { interval } from '@tonaljs/core'\n * interval('P5').semitones // => 7\n * interval('m3').type // => 'majorable'\n */\nexport function interval(src: IntervalLiteral): Interval | NoInterval {\n  return typeof src === \"string\"\n    ? cache[src] || (cache[src] = parse(src))\n    : isPitch(src)\n    ? interval(pitchName(src))\n    : isNamed(src)\n    ? interval(src.name)\n    : NoInterval;\n}\n\nconst SIZES = [0, 2, 4, 5, 7, 9, 11];\nconst TYPES = \"PMMPPMM\";\nfunction parse(str?: string): Interval | NoInterval {\n  const tokens = tokenizeInterval(str);\n  if (tokens[0] === \"\") {\n    return NoInterval;\n  }\n  const num = +tokens[0];\n  const q = tokens[1] as Quality;\n  const step = (Math.abs(num) - 1) % 7;\n  const t = TYPES[step];\n  if (t === \"M\" && q === \"P\") {\n    return NoInterval;\n  }\n  const type = t === \"M\" ? \"majorable\" : \"perfectable\";\n\n  const name = \"\" + num + q;\n  const dir = num < 0 ? -1 : 1;\n  const simple = num === 8 || num === -8 ? num : dir * (step + 1);\n  const alt = qToAlt(type, q);\n  const oct = Math.floor((Math.abs(num) - 1) / 7);\n  const semitones = dir * (SIZES[step] + alt + 12 * oct);\n  const chroma = (((dir * (SIZES[step] + alt)) % 12) + 12) % 12;\n  const coord = encode({ step, alt, oct, dir }) as IntervalCoordinates;\n  return {\n    empty: false,\n    name,\n    num,\n    q,\n    step,\n    alt,\n    dir,\n    type,\n    simple,\n    semitones,\n    chroma,\n    coord,\n    oct,\n  };\n}\n\n/**\n * @private\n *\n * forceDescending is used in the case of unison (#243)\n */\nexport function coordToInterval(\n  coord: PitchCoordinates,\n  forceDescending?: boolean\n): Interval {\n  const [f, o = 0] = coord;\n  const isDescending = f * 7 + o * 12 < 0;\n  const ivl: IntervalCoordinates =\n    forceDescending || isDescending ? [-f, -o, -1] : [f, o, 1];\n  return interval(decode(ivl)) as Interval;\n}\n\nfunction qToAlt(type: Type, q: string): number {\n  return (q === \"M\" && type === \"majorable\") ||\n    (q === \"P\" && type === \"perfectable\")\n    ? 0\n    : q === \"m\" && type === \"majorable\"\n    ? -1\n    : /^A+$/.test(q)\n    ? q.length\n    : /^d+$/.test(q)\n    ? -1 * (type === \"perfectable\" ? q.length : q.length + 1)\n    : 0;\n}\n\n// return the interval name of a pitch\nfunction pitchName(props: Pitch): string {\n  const { step, alt, oct = 0, dir } = props;\n  if (!dir) {\n    return \"\";\n  }\n  const calcNum = step + 1 + 7 * oct;\n  // this is an edge case: descending pitch class unison (see #243)\n  const num = calcNum === 0 ? step + 1 : calcNum;\n  const d = dir < 0 ? \"-\" : \"\";\n  const type = TYPES[step] === \"M\" ? \"majorable\" : \"perfectable\";\n  const name = d + num + altToQ(type, alt);\n  return name;\n}\n\nfunction altToQ(type: Type, alt: number): Quality {\n  if (alt === 0) {\n    return type === \"majorable\" ? \"M\" : \"P\";\n  } else if (alt === -1 && type === \"majorable\") {\n    return \"m\";\n  } else if (alt > 0) {\n    return fillStr(\"A\", alt) as Quality;\n  } else {\n    return fillStr(\"d\", type === \"perfectable\" ? alt : alt + 1) as Quality;\n  }\n}\n","import {\n  coordToInterval,\n  interval as asInterval,\n  IntervalLiteral,\n  IntervalName,\n} from \"./interval\";\nimport { coordToNote, note as asNote, NoteLiteral, NoteName } from \"./note\";\nimport { PitchCoordinates } from \"./pitch\";\n\n/**\n * Transpose a note by an interval.\n *\n * @param {string} note - the note or note name\n * @param {string} interval - the interval or interval name\n * @return {string} the transposed note name or empty string if not valid notes\n * @example\n * import { tranpose } from \"@tonaljs/core\"\n * transpose(\"d3\", \"3M\") // => \"F#3\"\n * transpose(\"D\", \"3M\") // => \"F#\"\n * [\"C\", \"D\", \"E\", \"F\", \"G\"].map(pc => transpose(pc, \"M3)) // => [\"E\", \"F#\", \"G#\", \"A\", \"B\"]\n */\nexport function transpose(\n  noteName: NoteLiteral,\n  intervalName: IntervalLiteral | [number, number]\n): NoteName {\n  const note = asNote(noteName);\n  const intervalCoord = Array.isArray(intervalName)\n    ? intervalName\n    : asInterval(intervalName).coord;\n  if (note.empty || !intervalCoord || intervalCoord.length < 2) {\n    return \"\";\n  }\n  const noteCoord = note.coord;\n  const tr: PitchCoordinates =\n    noteCoord.length === 1\n      ? [noteCoord[0] + intervalCoord[0]]\n      : [noteCoord[0] + intervalCoord[0], noteCoord[1] + intervalCoord[1]];\n  return coordToNote(tr).name;\n}\n\n// Private\nexport function tonicIntervalsTransposer(\n  intervals: string[],\n  tonic: string | undefined | null\n) {\n  const len = intervals.length;\n  return (normalized: number) => {\n    if (!tonic) return \"\";\n    const index =\n      normalized < 0 ? (len - (-normalized % len)) % len : normalized % len;\n    const octaves = Math.floor(normalized / len);\n    const root = transpose(tonic, [0, octaves]);\n    return transpose(root, intervals[index]);\n  };\n}\n\n/**\n * Find the interval distance between two notes or coord classes.\n *\n * To find distance between coord classes, both notes must be coord classes and\n * the interval is always ascending\n *\n * @param {Note|string} from - the note or note name to calculate distance from\n * @param {Note|string} to - the note or note name to calculate distance to\n * @return {string} the interval name or empty string if not valid notes\n *\n */\nexport function distance(\n  fromNote: NoteLiteral,\n  toNote: NoteLiteral\n): IntervalName {\n  const from = asNote(fromNote);\n  const to = asNote(toNote);\n  if (from.empty || to.empty) {\n    return \"\";\n  }\n\n  const fcoord = from.coord;\n  const tcoord = to.coord;\n  const fifths = tcoord[0] - fcoord[0];\n  const octs =\n    fcoord.length === 2 && tcoord.length === 2\n      ? tcoord[1] - fcoord[1]\n      : -Math.floor((fifths * 7) / 12);\n\n  // If it's unison and not pitch class, it can be descending interval (#243)\n  const forceDescending =\n    to.height === from.height &&\n    to.midi !== null &&\n    from.midi !== null &&\n    from.step > to.step;\n  return coordToInterval([fifths, octs], forceDescending).name;\n}\n","// index.ts\nimport { note } from \"@tonaljs/core\";\nvar isArray = Array.isArray;\nfunction ascR(b, n) {\n  const a = [];\n  for (; n--; a[n] = n + b)\n    ;\n  return a;\n}\nfunction descR(b, n) {\n  const a = [];\n  for (; n--; a[n] = b - n)\n    ;\n  return a;\n}\nfunction range(from, to) {\n  return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\n}\nfunction rotate(times, arr) {\n  const len = arr.length;\n  const n = (times % len + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\nfunction compact(arr) {\n  return arr.filter((n) => n === 0 || n);\n}\nfunction sortedNoteNames(notes) {\n  const valid = notes.map((n) => note(n)).filter((n) => !n.empty);\n  return valid.sort((a, b) => a.height - b.height).map((n) => n.name);\n}\nfunction sortedUniqNoteNames(arr) {\n  return sortedNoteNames(arr).filter((n, i, a) => i === 0 || n !== a[i - 1]);\n}\nfunction shuffle(arr, rnd = Math.random) {\n  let i;\n  let t;\n  let m = arr.length;\n  while (m) {\n    i = Math.floor(rnd() * m--);\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n}\nfunction permutations(arr) {\n  if (arr.length === 0) {\n    return [[]];\n  }\n  return permutations(arr.slice(1)).reduce((acc, perm) => {\n    return acc.concat(\n      arr.map((e, pos) => {\n        const newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n}\nexport {\n  compact,\n  permutations,\n  range,\n  rotate,\n  shuffle,\n  sortedNoteNames,\n  sortedUniqNoteNames\n};\n//# sourceMappingURL=index.mjs.map","import { note, Note } from \"@tonaljs/core\";\n\nconst isArray = Array.isArray;\n\n// ascending range\nfunction ascR(b: number, n: number) {\n  const a = [];\n  // tslint:disable-next-line:curly\n  for (; n--; a[n] = n + b);\n  return a;\n}\n// descending range\nfunction descR(b: number, n: number) {\n  const a = [];\n  // tslint:disable-next-line:curly\n  for (; n--; a[n] = b - n);\n  return a;\n}\n\n/**\n * Creates a numeric range\n *\n * @param {number} from\n * @param {number} to\n * @return {Array<number>}\n *\n * @example\n * range(-2, 2) // => [-2, -1, 0, 1, 2]\n * range(2, -2) // => [2, 1, 0, -1, -2]\n */\nexport function range(from: number, to: number): number[] {\n  return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\n}\n\n/**\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} array\n * @return {Array} the rotated array\n *\n * @example\n * rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nexport function rotate<T>(times: number, arr: T[]): T[] {\n  const len = arr.length;\n  const n = ((times % len) + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the array with the null values removed\n * @function\n * @param {Array} array\n * @return {Array}\n *\n * @example\n * compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nexport function compact(arr: any[]): any[] {\n  return arr.filter((n) => n === 0 || n);\n}\n\n/**\n * Sort an array of notes in ascending order. Pitch classes are listed\n * before notes. Any string that is not a note is removed.\n *\n * @param {string[]} notes\n * @return {string[]} sorted array of notes\n *\n * @example\n * sortedNoteNames(['c2', 'c5', 'c1', 'c0', 'c6', 'c'])\n * // => ['C', 'C0', 'C1', 'C2', 'C5', 'C6']\n * sortedNoteNames(['c', 'F', 'G', 'a', 'b', 'h', 'J'])\n * // => ['C', 'F', 'G', 'A', 'B']\n */\nexport function sortedNoteNames(notes: string[]): string[] {\n  const valid = notes.map((n) => note(n)).filter((n) => !n.empty) as Note[];\n  return valid.sort((a, b) => a.height - b.height).map((n) => n.name);\n}\n\n/**\n * Get sorted notes with duplicates removed. Pitch classes are listed\n * before notes.\n *\n * @function\n * @param {string[]} array\n * @return {string[]} unique sorted notes\n *\n * @example\n * Array.sortedUniqNoteNames(['a', 'b', 'c2', '1p', 'p2', 'c2', 'b', 'c', 'c3' ])\n * // => [ 'C', 'A', 'B', 'C2', 'C3' ]\n */\nexport function sortedUniqNoteNames(arr: string[]): string[] {\n  return sortedNoteNames(arr).filter((n, i, a) => i === 0 || n !== a[i - 1]);\n}\n\n/**\n * Randomizes the order of the specified array in-place, using the FisherYates shuffle.\n *\n * @function\n * @param {Array} array\n * @return {Array} the array shuffled\n *\n * @example\n * shuffle([\"C\", \"D\", \"E\", \"F\"]) // => [...]\n */\nexport function shuffle(arr: any[], rnd = Math.random): any[] {\n  let i: number;\n  let t: any;\n  let m: number = arr.length;\n  while (m) {\n    i = Math.floor(rnd() * m--);\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n}\n\n/**\n * Get all permutations of an array\n *\n * @param {Array} array - the array\n * @return {Array<Array>} an array with all the permutations\n * @example\n * permutations([\"a\", \"b\", \"c\"])) // =>\n * [\n *   [\"a\", \"b\", \"c\"],\n *   [\"b\", \"a\", \"c\"],\n *   [\"b\", \"c\", \"a\"],\n *   [\"a\", \"c\", \"b\"],\n *   [\"c\", \"a\", \"b\"],\n *   [\"c\", \"b\", \"a\"]\n * ]\n */\nexport function permutations(arr: any[]): any[] {\n  if (arr.length === 0) {\n    return [[]];\n  }\n  return permutations(arr.slice(1)).reduce((acc, perm) => {\n    return acc.concat(\n      arr.map((e, pos) => {\n        const newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n}\n","// index.ts\nimport { detect } from \"@tonaljs/chord-detect\";\nimport {\n  all as chordTypes,\n  get as getChordType\n} from \"@tonaljs/chord-type\";\nimport { tonicIntervalsTransposer } from \"@tonaljs/core\";\nimport {\n  deprecate,\n  distance,\n  note,\n  tokenizeNote,\n  transpose as transposeNote\n} from \"@tonaljs/core\";\nimport { isSubsetOf, isSupersetOf } from \"@tonaljs/pcset\";\nimport { all as scaleTypes } from \"@tonaljs/scale-type\";\nimport { detect as detect2 } from \"@tonaljs/chord-detect\";\nvar NoChord = {\n  empty: true,\n  name: \"\",\n  symbol: \"\",\n  root: \"\",\n  rootDegree: 0,\n  type: \"\",\n  tonic: null,\n  setNum: NaN,\n  quality: \"Unknown\",\n  chroma: \"\",\n  normalized: \"\",\n  aliases: [],\n  notes: [],\n  intervals: []\n};\nfunction tokenize(name) {\n  const [letter, acc, oct, type] = tokenizeNote(name);\n  if (letter === \"\") {\n    return [\"\", name];\n  }\n  if (letter === \"A\" && type === \"ug\") {\n    return [\"\", \"aug\"];\n  }\n  return [letter + acc, oct + type];\n}\nfunction get(src) {\n  if (src === \"\") {\n    return NoChord;\n  }\n  if (Array.isArray(src) && src.length === 2) {\n    return getChord(src[1], src[0]);\n  } else {\n    const [tonic, type] = tokenize(src);\n    const chord2 = getChord(type, tonic);\n    return chord2.empty ? getChord(src) : chord2;\n  }\n}\nfunction getChord(typeName, optionalTonic, optionalRoot) {\n  const type = getChordType(typeName);\n  const tonic = note(optionalTonic || \"\");\n  const root = note(optionalRoot || \"\");\n  if (type.empty || optionalTonic && tonic.empty || optionalRoot && root.empty) {\n    return NoChord;\n  }\n  const rootInterval = distance(tonic.pc, root.pc);\n  const rootDegree = type.intervals.indexOf(rootInterval) + 1;\n  if (!root.empty && !rootDegree) {\n    return NoChord;\n  }\n  const intervals = Array.from(type.intervals);\n  for (let i = 1; i < rootDegree; i++) {\n    const num = intervals[0][0];\n    const quality = intervals[0][1];\n    const newNum = parseInt(num, 10) + 7;\n    intervals.push(`${newNum}${quality}`);\n    intervals.shift();\n  }\n  const notes = tonic.empty ? [] : intervals.map((i) => transposeNote(tonic, i));\n  typeName = type.aliases.indexOf(typeName) !== -1 ? typeName : type.aliases[0];\n  const symbol = `${tonic.empty ? \"\" : tonic.pc}${typeName}${root.empty || rootDegree <= 1 ? \"\" : \"/\" + root.pc}`;\n  const name = `${optionalTonic ? tonic.pc + \" \" : \"\"}${type.name}${rootDegree > 1 && optionalRoot ? \" over \" + root.pc : \"\"}`;\n  return {\n    ...type,\n    name,\n    symbol,\n    type: type.name,\n    root: root.name,\n    intervals,\n    rootDegree,\n    tonic: tonic.name,\n    notes\n  };\n}\nvar chord = deprecate(\"Chord.chord\", \"Chord.get\", get);\nfunction transpose(chordName, interval) {\n  const [tonic, type] = tokenize(chordName);\n  if (!tonic) {\n    return chordName;\n  }\n  return transposeNote(tonic, interval) + type;\n}\nfunction chordScales(name) {\n  const s = get(name);\n  const isChordIncluded = isSupersetOf(s.chroma);\n  return scaleTypes().filter((scale) => isChordIncluded(scale.chroma)).map((scale) => scale.name);\n}\nfunction extended(chordName) {\n  const s = get(chordName);\n  const isSuperset = isSupersetOf(s.chroma);\n  return chordTypes().filter((chord2) => isSuperset(chord2.chroma)).map((chord2) => s.tonic + chord2.aliases[0]);\n}\nfunction reduced(chordName) {\n  const s = get(chordName);\n  const isSubset = isSubsetOf(s.chroma);\n  return chordTypes().filter((chord2) => isSubset(chord2.chroma)).map((chord2) => s.tonic + chord2.aliases[0]);\n}\nfunction degrees(chordName) {\n  const { intervals, tonic } = get(chordName);\n  const transpose2 = tonicIntervalsTransposer(intervals, tonic);\n  return (degree) => degree ? transpose2(degree > 0 ? degree - 1 : degree) : \"\";\n}\nfunction steps(chordName) {\n  const { intervals, tonic } = get(chordName);\n  return tonicIntervalsTransposer(intervals, tonic);\n}\nvar chord_default = {\n  getChord,\n  get,\n  detect,\n  chordScales,\n  extended,\n  reduced,\n  tokenize,\n  transpose,\n  degrees,\n  steps,\n  // deprecate\n  chord\n};\nexport {\n  chord,\n  chordScales,\n  chord_default as default,\n  degrees,\n  detect2 as detect,\n  extended,\n  get,\n  getChord,\n  reduced,\n  steps,\n  tokenize,\n  transpose\n};\n//# sourceMappingURL=index.mjs.map","import { detect } from \"@tonaljs/chord-detect\";\nimport {\n  ChordType,\n  all as chordTypes,\n  get as getChordType,\n} from \"@tonaljs/chord-type\";\nimport { tonicIntervalsTransposer } from \"@tonaljs/core\";\n\nimport {\n  deprecate,\n  distance,\n  note,\n  NoteName,\n  tokenizeNote,\n  transpose as transposeNote,\n} from \"@tonaljs/core\";\n\nimport { isSubsetOf, isSupersetOf } from \"@tonaljs/pcset\";\n\nimport { all as scaleTypes } from \"@tonaljs/scale-type\";\nexport { detect } from \"@tonaljs/chord-detect\";\n\ntype ChordName = string;\ntype ChordNameTokens = [string, string]; // [TONIC, SCALE TYPE]\n\nexport interface Chord extends ChordType {\n  tonic: string | null;\n  type: string;\n  root: string;\n  rootDegree: number;\n  symbol: string;\n  notes: NoteName[];\n}\n\nconst NoChord: Chord = {\n  empty: true,\n  name: \"\",\n  symbol: \"\",\n  root: \"\",\n  rootDegree: 0,\n  type: \"\",\n  tonic: null,\n  setNum: NaN,\n  quality: \"Unknown\",\n  chroma: \"\",\n  normalized: \"\",\n  aliases: [],\n  notes: [],\n  intervals: [],\n};\n\n// 6, 64, 7, 9, 11 and 13 are consider part of the chord\n// (see https://github.com/danigb/tonal/issues/55)\nconst NUM_TYPES = /^(6|64|7|9|11|13)$/;\n/**\n * Tokenize a chord name. It returns an array with the tonic and chord type\n * If not tonic is found, all the name is considered the chord name.\n *\n * This function does NOT check if the chord type exists or not. It only tries\n * to split the tonic and chord type.\n *\n * @function\n * @param {string} name - the chord name\n * @return {Array} an array with [tonic, type]\n * @example\n * tokenize(\"Cmaj7\") // => [ \"C\", \"maj7\" ]\n * tokenize(\"C7\") // => [ \"C\", \"7\" ]\n * tokenize(\"mMaj7\") // => [ null, \"mMaj7\" ]\n * tokenize(\"Cnonsense\") // => [ null, \"nonsense\" ]\n */\nexport function tokenize(name: string): ChordNameTokens {\n  const [letter, acc, oct, type] = tokenizeNote(name);\n  if (letter === \"\") {\n    return [\"\", name];\n  }\n  // aug is augmented (see https://github.com/danigb/tonal/issues/55)\n  if (letter === \"A\" && type === \"ug\") {\n    return [\"\", \"aug\"];\n  }\n  return [letter + acc, oct + type];\n}\n\n/**\n * Get a Chord from a chord name.\n */\nexport function get(src: ChordName | ChordNameTokens): Chord {\n  if (src === \"\") {\n    return NoChord;\n  }\n  if (Array.isArray(src) && src.length === 2) {\n    return getChord(src[1], src[0]);\n  } else {\n    const [tonic, type] = tokenize(src);\n    const chord = getChord(type, tonic);\n    return chord.empty ? getChord(src) : chord;\n  }\n}\n\n/**\n * Get chord properties\n *\n * @param typeName - the chord type name\n * @param [tonic] - Optional tonic\n * @param [root]  - Optional root (requires a tonic)\n */\nexport function getChord(\n  typeName: string,\n  optionalTonic?: string,\n  optionalRoot?: string\n): Chord {\n  const type = getChordType(typeName);\n  const tonic = note(optionalTonic || \"\");\n  const root = note(optionalRoot || \"\");\n\n  if (\n    type.empty ||\n    (optionalTonic && tonic.empty) ||\n    (optionalRoot && root.empty)\n  ) {\n    return NoChord;\n  }\n\n  const rootInterval = distance(tonic.pc, root.pc);\n  const rootDegree = type.intervals.indexOf(rootInterval) + 1;\n  if (!root.empty && !rootDegree) {\n    return NoChord;\n  }\n\n  const intervals = Array.from(type.intervals);\n\n  for (let i = 1; i < rootDegree; i++) {\n    const num = intervals[0][0];\n    const quality = intervals[0][1];\n    const newNum = parseInt(num, 10) + 7;\n    intervals.push(`${newNum}${quality}`);\n    intervals.shift();\n  }\n\n  const notes = tonic.empty\n    ? []\n    : intervals.map((i) => transposeNote(tonic, i));\n\n  typeName = type.aliases.indexOf(typeName) !== -1 ? typeName : type.aliases[0];\n  const symbol = `${tonic.empty ? \"\" : tonic.pc}${typeName}${\n    root.empty || rootDegree <= 1 ? \"\" : \"/\" + root.pc\n  }`;\n  const name = `${optionalTonic ? tonic.pc + \" \" : \"\"}${type.name}${\n    rootDegree > 1 && optionalRoot ? \" over \" + root.pc : \"\"\n  }`;\n  return {\n    ...type,\n    name,\n    symbol,\n    type: type.name,\n    root: root.name,\n    intervals,\n    rootDegree,\n    tonic: tonic.name,\n    notes,\n  };\n}\n\nexport const chord = deprecate(\"Chord.chord\", \"Chord.get\", get);\n\n/**\n * Transpose a chord name\n *\n * @param {string} chordName - the chord name\n * @return {string} the transposed chord\n *\n * @example\n * transpose('Dm7', 'P4') // => 'Gm7\n */\nexport function transpose(chordName: string, interval: string): string {\n  const [tonic, type] = tokenize(chordName);\n  if (!tonic) {\n    return chordName;\n  }\n  return transposeNote(tonic, interval) + type;\n}\n\n/**\n * Get all scales where the given chord fits\n *\n * @example\n * chordScales('C7b9')\n * // => [\"phrygian dominant\", \"flamenco\", \"spanish heptatonic\", \"half-whole diminished\", \"chromatic\"]\n */\nexport function chordScales(name: string): string[] {\n  const s = get(name);\n  const isChordIncluded = isSupersetOf(s.chroma);\n  return scaleTypes()\n    .filter((scale) => isChordIncluded(scale.chroma))\n    .map((scale) => scale.name);\n}\n/**\n * Get all chords names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @example\n * extended(\"CMaj7\")\n * // => [ 'Cmaj#4', 'Cmaj7#9#11', 'Cmaj9', 'CM7add13', 'Cmaj13', 'Cmaj9#11', 'CM13#11', 'CM7b9' ]\n */\nexport function extended(chordName: string): string[] {\n  const s = get(chordName);\n  const isSuperset = isSupersetOf(s.chroma);\n  return chordTypes()\n    .filter((chord) => isSuperset(chord.chroma))\n    .map((chord) => s.tonic + chord.aliases[0]);\n}\n\n/**\n * Find all chords names that are a subset of the given one\n * (has less notes but all from the given chord)\n *\n * @example\n */\nexport function reduced(chordName: string): string[] {\n  const s = get(chordName);\n  const isSubset = isSubsetOf(s.chroma);\n  return chordTypes()\n    .filter((chord) => isSubset(chord.chroma))\n    .map((chord) => s.tonic + chord.aliases[0]);\n}\n\n/**\n * Returns a function to get a note name from the scale degree.\n *\n * @example\n * [1, 2, 3, 4].map(Chord.degrees(\"C\")) => [\"C\", \"E\", \"G\", \"C\"]\n * [1, 2, 3, 4].map(Chord.degrees(\"C4\")) => [\"C4\", \"E4\", \"G4\", \"C5\"]\n */\nexport function degrees(chordName: string | ChordNameTokens) {\n  const { intervals, tonic } = get(chordName);\n  const transpose = tonicIntervalsTransposer(intervals, tonic);\n  return (degree: number) =>\n    degree ? transpose(degree > 0 ? degree - 1 : degree) : \"\";\n}\n\n/**\n * Sames as `degree` but with 0-based index\n */\nexport function steps(chordName: string | ChordNameTokens) {\n  const { intervals, tonic } = get(chordName);\n  return tonicIntervalsTransposer(intervals, tonic);\n}\n\nexport default {\n  getChord,\n  get,\n  detect,\n  chordScales,\n  extended,\n  reduced,\n  tokenize,\n  transpose,\n  degrees,\n  steps,\n\n  // deprecate\n  chord,\n};\n","// index.ts\nimport { all } from \"@tonaljs/chord-type\";\nimport { note } from \"@tonaljs/core\";\nimport { modes } from \"@tonaljs/pcset\";\nvar namedSet = (notes) => {\n  const pcToName = notes.reduce((record, n) => {\n    const chroma = note(n).chroma;\n    if (chroma !== void 0) {\n      record[chroma] = record[chroma] || note(n).name;\n    }\n    return record;\n  }, {});\n  return (chroma) => pcToName[chroma];\n};\nfunction detect(source, options = {}) {\n  const notes = source.map((n) => note(n).pc).filter((x) => x);\n  if (note.length === 0) {\n    return [];\n  }\n  const found = findMatches(notes, 1, options);\n  return found.filter((chord) => chord.weight).sort((a, b) => b.weight - a.weight).map((chord) => chord.name);\n}\nvar BITMASK = {\n  // 3m 000100000000\n  // 3M 000010000000\n  anyThirds: 384,\n  // 5P 000000010000\n  perfectFifth: 16,\n  // 5d 000000100000\n  // 5A 000000001000\n  nonPerfectFifths: 40,\n  anySeventh: 3\n};\nvar testChromaNumber = (bitmask) => (chromaNumber) => Boolean(chromaNumber & bitmask);\nvar hasAnyThird = testChromaNumber(BITMASK.anyThirds);\nvar hasPerfectFifth = testChromaNumber(BITMASK.perfectFifth);\nvar hasAnySeventh = testChromaNumber(BITMASK.anySeventh);\nvar hasNonPerfectFifth = testChromaNumber(BITMASK.nonPerfectFifths);\nfunction hasAnyThirdAndPerfectFifthAndAnySeventh(chordType) {\n  const chromaNumber = parseInt(chordType.chroma, 2);\n  return hasAnyThird(chromaNumber) && hasPerfectFifth(chromaNumber) && hasAnySeventh(chromaNumber);\n}\nfunction withPerfectFifth(chroma) {\n  const chromaNumber = parseInt(chroma, 2);\n  return hasNonPerfectFifth(chromaNumber) ? chroma : (chromaNumber | 16).toString(2);\n}\nfunction findMatches(notes, weight, options) {\n  const tonic = notes[0];\n  const tonicChroma = note(tonic).chroma;\n  const noteName = namedSet(notes);\n  const allModes = modes(notes, false);\n  const found = [];\n  allModes.forEach((mode, index) => {\n    const modeWithPerfectFifth = options.assumePerfectFifth && withPerfectFifth(mode);\n    const chordTypes = all().filter((chordType) => {\n      if (options.assumePerfectFifth && hasAnyThirdAndPerfectFifthAndAnySeventh(chordType)) {\n        return chordType.chroma === modeWithPerfectFifth;\n      }\n      return chordType.chroma === mode;\n    });\n    chordTypes.forEach((chordType) => {\n      const chordName = chordType.aliases[0];\n      const baseNote = noteName(index);\n      const isInversion = index !== tonicChroma;\n      if (isInversion) {\n        found.push({\n          weight: 0.5 * weight,\n          name: `${baseNote}${chordName}/${tonic}`\n        });\n      } else {\n        found.push({ weight: 1 * weight, name: `${baseNote}${chordName}` });\n      }\n    });\n  });\n  return found;\n}\nvar chord_detect_default = { detect };\nexport {\n  chord_detect_default as default,\n  detect\n};\n//# sourceMappingURL=index.mjs.map","import { all, ChordType } from \"@tonaljs/chord-type\";\nimport { note } from \"@tonaljs/core\";\nimport { modes } from \"@tonaljs/pcset\";\n\ninterface FoundChord {\n  readonly weight: number;\n  readonly name: string;\n}\n\nconst namedSet = (notes: string[]) => {\n  const pcToName = notes.reduce<Record<number, string>>((record, n) => {\n    const chroma = note(n).chroma;\n    if (chroma !== undefined) {\n      record[chroma] = record[chroma] || note(n).name;\n    }\n    return record;\n  }, {});\n\n  return (chroma: number) => pcToName[chroma];\n};\n\ntype DetectOptions = {\n  assumePerfectFifth: boolean\n}\nexport function detect(source: string[], options: Partial<DetectOptions> = {}): string[] {\n  const notes = source.map((n) => note(n).pc).filter((x) => x);\n  if (note.length === 0) {\n    return [];\n  }\n\n  const found: FoundChord[] = findMatches(notes, 1, options);\n\n  return found\n    .filter((chord) => chord.weight)\n    .sort((a, b) => b.weight - a.weight)\n    .map((chord) => chord.name);\n}\n\n/* tslint:disable:no-bitwise */\nconst BITMASK = {\n  // 3m 000100000000\n  // 3M 000010000000\n  anyThirds: 384,\n  // 5P 000000010000\n  perfectFifth: 16,\n  // 5d 000000100000\n  // 5A 000000001000\n  nonPerfectFifths: 40,\n  anySeventh: 3,\n}\n\nconst testChromaNumber = (bitmask: number) => (chromaNumber: number) => Boolean(chromaNumber & bitmask)\nconst hasAnyThird = testChromaNumber(BITMASK.anyThirds)\nconst hasPerfectFifth = testChromaNumber(BITMASK.perfectFifth)\nconst hasAnySeventh = testChromaNumber(BITMASK.anySeventh)\nconst hasNonPerfectFifth = testChromaNumber(BITMASK.nonPerfectFifths)\n\nfunction hasAnyThirdAndPerfectFifthAndAnySeventh(chordType: ChordType) {\n  const chromaNumber = parseInt(chordType.chroma, 2)\n  return hasAnyThird(chromaNumber) && hasPerfectFifth(chromaNumber) && hasAnySeventh(chromaNumber)\n}\n\nfunction withPerfectFifth(chroma: string): string {\n  const chromaNumber = parseInt(chroma, 2)\n  return hasNonPerfectFifth(chromaNumber)\n  ? chroma \n  : (chromaNumber | 16).toString(2)\n}\n\n/* tslint:enable:no-bitwise */\n\ntype FindMatchesOptions = {\n  assumePerfectFifth: boolean\n}\nfunction findMatches(notes: string[], weight: number, options: Partial<FindMatchesOptions>): FoundChord[] {\n  const tonic = notes[0];\n  const tonicChroma = note(tonic).chroma;\n  const noteName = namedSet(notes);\n  // we need to test all chromas to get the correct baseNote\n  const allModes = modes(notes, false);\n\n  const found: FoundChord[] = [];\n  allModes.forEach((mode, index) => {\n    const modeWithPerfectFifth = options.assumePerfectFifth && withPerfectFifth(mode)\n    // some chords could have the same chroma but different interval spelling\n    const chordTypes = all().filter((chordType) => {\n      if(options.assumePerfectFifth && hasAnyThirdAndPerfectFifthAndAnySeventh(chordType)) {\n        return chordType.chroma === modeWithPerfectFifth\n      }\n      return chordType.chroma === mode\n    });\n\n    chordTypes.forEach((chordType) => {\n      const chordName = chordType.aliases[0];\n      const baseNote = noteName(index);\n      const isInversion = index !== tonicChroma;\n      if (isInversion) {\n        found.push({\n          weight: 0.5 * weight,\n          name: `${baseNote}${chordName}/${tonic}`,\n        });\n      } else {\n        found.push({ weight: 1 * weight, name: `${baseNote}${chordName}` });\n      }\n    });\n  });\n\n  return found;\n}\n\nexport default { detect };\n","// index.ts\nimport { deprecate } from \"@tonaljs/core\";\nimport {\n  EmptyPcset,\n  get as pcset\n} from \"@tonaljs/pcset\";\n\n// data.ts\nvar CHORDS = [\n  // ==Major==\n  [\"1P 3M 5P\", \"major\", \"M ^  maj\"],\n  [\"1P 3M 5P 7M\", \"major seventh\", \"maj7 \\u0394 ma7 M7 Maj7 ^7\"],\n  [\"1P 3M 5P 7M 9M\", \"major ninth\", \"maj9 \\u03949 ^9\"],\n  [\"1P 3M 5P 7M 9M 13M\", \"major thirteenth\", \"maj13 Maj13 ^13\"],\n  [\"1P 3M 5P 6M\", \"sixth\", \"6 add6 add13 M6\"],\n  [\"1P 3M 5P 6M 9M\", \"sixth added ninth\", \"6add9 6/9 69 M69\"],\n  [\"1P 3M 6m 7M\", \"major seventh flat sixth\", \"M7b6 ^7b6\"],\n  [\n    \"1P 3M 5P 7M 11A\",\n    \"major seventh sharp eleventh\",\n    \"maj#4 \\u0394#4 \\u0394#11 M7#11 ^7#11 maj7#11\"\n  ],\n  // ==Minor==\n  // '''Normal'''\n  [\"1P 3m 5P\", \"minor\", \"m min -\"],\n  [\"1P 3m 5P 7m\", \"minor seventh\", \"m7 min7 mi7 -7\"],\n  [\n    \"1P 3m 5P 7M\",\n    \"minor/major seventh\",\n    \"m/ma7 m/maj7 mM7 mMaj7 m/M7 -\\u03947 m\\u0394 -^7\"\n  ],\n  [\"1P 3m 5P 6M\", \"minor sixth\", \"m6 -6\"],\n  [\"1P 3m 5P 7m 9M\", \"minor ninth\", \"m9 -9\"],\n  [\"1P 3m 5P 7M 9M\", \"minor/major ninth\", \"mM9 mMaj9 -^9\"],\n  [\"1P 3m 5P 7m 9M 11P\", \"minor eleventh\", \"m11 -11\"],\n  [\"1P 3m 5P 7m 9M 13M\", \"minor thirteenth\", \"m13 -13\"],\n  // '''Diminished'''\n  [\"1P 3m 5d\", \"diminished\", \"dim \\xB0 o\"],\n  [\"1P 3m 5d 7d\", \"diminished seventh\", \"dim7 \\xB07 o7\"],\n  [\"1P 3m 5d 7m\", \"half-diminished\", \"m7b5 \\xF8 -7b5 h7 h\"],\n  // ==Dominant/Seventh==\n  // '''Normal'''\n  [\"1P 3M 5P 7m\", \"dominant seventh\", \"7 dom\"],\n  [\"1P 3M 5P 7m 9M\", \"dominant ninth\", \"9\"],\n  [\"1P 3M 5P 7m 9M 13M\", \"dominant thirteenth\", \"13\"],\n  [\"1P 3M 5P 7m 11A\", \"lydian dominant seventh\", \"7#11 7#4\"],\n  // '''Altered'''\n  [\"1P 3M 5P 7m 9m\", \"dominant flat ninth\", \"7b9\"],\n  [\"1P 3M 5P 7m 9A\", \"dominant sharp ninth\", \"7#9\"],\n  [\"1P 3M 7m 9m\", \"altered\", \"alt7\"],\n  // '''Suspended'''\n  [\"1P 4P 5P\", \"suspended fourth\", \"sus4 sus\"],\n  [\"1P 2M 5P\", \"suspended second\", \"sus2\"],\n  [\"1P 4P 5P 7m\", \"suspended fourth seventh\", \"7sus4 7sus\"],\n  [\"1P 5P 7m 9M 11P\", \"eleventh\", \"11\"],\n  [\n    \"1P 4P 5P 7m 9m\",\n    \"suspended fourth flat ninth\",\n    \"b9sus phryg 7b9sus 7b9sus4\"\n  ],\n  // ==Other==\n  [\"1P 5P\", \"fifth\", \"5\"],\n  [\"1P 3M 5A\", \"augmented\", \"aug + +5 ^#5\"],\n  [\"1P 3m 5A\", \"minor augmented\", \"m#5 -#5 m+\"],\n  [\"1P 3M 5A 7M\", \"augmented seventh\", \"maj7#5 maj7+5 +maj7 ^7#5\"],\n  [\n    \"1P 3M 5P 7M 9M 11A\",\n    \"major sharp eleventh (lydian)\",\n    \"maj9#11 \\u03949#11 ^9#11\"\n  ],\n  // ==Legacy==\n  [\"1P 2M 4P 5P\", \"\", \"sus24 sus4add9\"],\n  [\"1P 3M 5A 7M 9M\", \"\", \"maj9#5 Maj9#5\"],\n  [\"1P 3M 5A 7m\", \"\", \"7#5 +7 7+ 7aug aug7\"],\n  [\"1P 3M 5A 7m 9A\", \"\", \"7#5#9 7#9#5 7alt\"],\n  [\"1P 3M 5A 7m 9M\", \"\", \"9#5 9+\"],\n  [\"1P 3M 5A 7m 9M 11A\", \"\", \"9#5#11\"],\n  [\"1P 3M 5A 7m 9m\", \"\", \"7#5b9 7b9#5\"],\n  [\"1P 3M 5A 7m 9m 11A\", \"\", \"7#5b9#11\"],\n  [\"1P 3M 5A 9A\", \"\", \"+add#9\"],\n  [\"1P 3M 5A 9M\", \"\", \"M#5add9 +add9\"],\n  [\"1P 3M 5P 6M 11A\", \"\", \"M6#11 M6b5 6#11 6b5\"],\n  [\"1P 3M 5P 6M 7M 9M\", \"\", \"M7add13\"],\n  [\"1P 3M 5P 6M 9M 11A\", \"\", \"69#11\"],\n  [\"1P 3m 5P 6M 9M\", \"\", \"m69 -69\"],\n  [\"1P 3M 5P 6m 7m\", \"\", \"7b6\"],\n  [\"1P 3M 5P 7M 9A 11A\", \"\", \"maj7#9#11\"],\n  [\"1P 3M 5P 7M 9M 11A 13M\", \"\", \"M13#11 maj13#11 M13+4 M13#4\"],\n  [\"1P 3M 5P 7M 9m\", \"\", \"M7b9\"],\n  [\"1P 3M 5P 7m 11A 13m\", \"\", \"7#11b13 7b5b13\"],\n  [\"1P 3M 5P 7m 13M\", \"\", \"7add6 67 7add13\"],\n  [\"1P 3M 5P 7m 9A 11A\", \"\", \"7#9#11 7b5#9 7#9b5\"],\n  [\"1P 3M 5P 7m 9A 11A 13M\", \"\", \"13#9#11\"],\n  [\"1P 3M 5P 7m 9A 11A 13m\", \"\", \"7#9#11b13\"],\n  [\"1P 3M 5P 7m 9A 13M\", \"\", \"13#9\"],\n  [\"1P 3M 5P 7m 9A 13m\", \"\", \"7#9b13\"],\n  [\"1P 3M 5P 7m 9M 11A\", \"\", \"9#11 9+4 9#4\"],\n  [\"1P 3M 5P 7m 9M 11A 13M\", \"\", \"13#11 13+4 13#4\"],\n  [\"1P 3M 5P 7m 9M 11A 13m\", \"\", \"9#11b13 9b5b13\"],\n  [\"1P 3M 5P 7m 9m 11A\", \"\", \"7b9#11 7b5b9 7b9b5\"],\n  [\"1P 3M 5P 7m 9m 11A 13M\", \"\", \"13b9#11\"],\n  [\"1P 3M 5P 7m 9m 11A 13m\", \"\", \"7b9b13#11 7b9#11b13 7b5b9b13\"],\n  [\"1P 3M 5P 7m 9m 13M\", \"\", \"13b9\"],\n  [\"1P 3M 5P 7m 9m 13m\", \"\", \"7b9b13\"],\n  [\"1P 3M 5P 7m 9m 9A\", \"\", \"7b9#9\"],\n  [\"1P 3M 5P 9M\", \"\", \"Madd9 2 add9 add2\"],\n  [\"1P 3M 5P 9m\", \"\", \"Maddb9\"],\n  [\"1P 3M 5d\", \"\", \"Mb5\"],\n  [\"1P 3M 5d 6M 7m 9M\", \"\", \"13b5\"],\n  [\"1P 3M 5d 7M\", \"\", \"M7b5\"],\n  [\"1P 3M 5d 7M 9M\", \"\", \"M9b5\"],\n  [\"1P 3M 5d 7m\", \"\", \"7b5\"],\n  [\"1P 3M 5d 7m 9M\", \"\", \"9b5\"],\n  [\"1P 3M 7m\", \"\", \"7no5\"],\n  [\"1P 3M 7m 13m\", \"\", \"7b13\"],\n  [\"1P 3M 7m 9M\", \"\", \"9no5\"],\n  [\"1P 3M 7m 9M 13M\", \"\", \"13no5\"],\n  [\"1P 3M 7m 9M 13m\", \"\", \"9b13\"],\n  [\"1P 3m 4P 5P\", \"\", \"madd4\"],\n  [\"1P 3m 5P 6m 7M\", \"\", \"mMaj7b6\"],\n  [\"1P 3m 5P 6m 7M 9M\", \"\", \"mMaj9b6\"],\n  [\"1P 3m 5P 7m 11P\", \"\", \"m7add11 m7add4\"],\n  [\"1P 3m 5P 9M\", \"\", \"madd9\"],\n  [\"1P 3m 5d 6M 7M\", \"\", \"o7M7\"],\n  [\"1P 3m 5d 7M\", \"\", \"oM7\"],\n  [\"1P 3m 6m 7M\", \"\", \"mb6M7\"],\n  [\"1P 3m 6m 7m\", \"\", \"m7#5\"],\n  [\"1P 3m 6m 7m 9M\", \"\", \"m9#5\"],\n  [\"1P 3m 5A 7m 9M 11P\", \"\", \"m11A\"],\n  [\"1P 3m 6m 9m\", \"\", \"mb6b9\"],\n  [\"1P 2M 3m 5d 7m\", \"\", \"m9b5\"],\n  [\"1P 4P 5A 7M\", \"\", \"M7#5sus4\"],\n  [\"1P 4P 5A 7M 9M\", \"\", \"M9#5sus4\"],\n  [\"1P 4P 5A 7m\", \"\", \"7#5sus4\"],\n  [\"1P 4P 5P 7M\", \"\", \"M7sus4\"],\n  [\"1P 4P 5P 7M 9M\", \"\", \"M9sus4\"],\n  [\"1P 4P 5P 7m 9M\", \"\", \"9sus4 9sus\"],\n  [\"1P 4P 5P 7m 9M 13M\", \"\", \"13sus4 13sus\"],\n  [\"1P 4P 5P 7m 9m 13m\", \"\", \"7sus4b9b13 7b9b13sus4\"],\n  [\"1P 4P 7m 10m\", \"\", \"4 quartal\"],\n  [\"1P 5P 7m 9m 11P\", \"\", \"11b9\"]\n];\nvar data_default = CHORDS;\n\n// index.ts\nvar NoChordType = {\n  ...EmptyPcset,\n  name: \"\",\n  quality: \"Unknown\",\n  intervals: [],\n  aliases: []\n};\nvar dictionary = [];\nvar index = {};\nfunction get(type) {\n  return index[type] || NoChordType;\n}\nvar chordType = deprecate(\"ChordType.chordType\", \"ChordType.get\", get);\nfunction names() {\n  return dictionary.map((chord) => chord.name).filter((x) => x);\n}\nfunction symbols() {\n  return dictionary.map((chord) => chord.aliases[0]).filter((x) => x);\n}\nfunction keys() {\n  return Object.keys(index);\n}\nfunction all() {\n  return dictionary.slice();\n}\nvar entries = deprecate(\"ChordType.entries\", \"ChordType.all\", all);\nfunction removeAll() {\n  dictionary = [];\n  index = {};\n}\nfunction add(intervals, aliases, fullName) {\n  const quality = getQuality(intervals);\n  const chord = {\n    ...pcset(intervals),\n    name: fullName || \"\",\n    quality,\n    intervals,\n    aliases\n  };\n  dictionary.push(chord);\n  if (chord.name) {\n    index[chord.name] = chord;\n  }\n  index[chord.setNum] = chord;\n  index[chord.chroma] = chord;\n  chord.aliases.forEach((alias) => addAlias(chord, alias));\n}\nfunction addAlias(chord, alias) {\n  index[alias] = chord;\n}\nfunction getQuality(intervals) {\n  const has = (interval) => intervals.indexOf(interval) !== -1;\n  return has(\"5A\") ? \"Augmented\" : has(\"3M\") ? \"Major\" : has(\"5d\") ? \"Diminished\" : has(\"3m\") ? \"Minor\" : \"Unknown\";\n}\ndata_default.forEach(\n  ([ivls, fullName, names2]) => add(ivls.split(\" \"), names2.split(\" \"), fullName)\n);\ndictionary.sort((a, b) => a.setNum - b.setNum);\nvar chord_type_default = {\n  names,\n  symbols,\n  get,\n  all,\n  add,\n  removeAll,\n  keys,\n  // deprecated\n  entries,\n  chordType\n};\nexport {\n  add,\n  addAlias,\n  all,\n  chordType,\n  chord_type_default as default,\n  entries,\n  get,\n  keys,\n  names,\n  removeAll,\n  symbols\n};\n//# sourceMappingURL=index.mjs.map","import { deprecate } from \"@tonaljs/core\";\nimport {\n  EmptyPcset,\n  get as pcset,\n  Pcset,\n  PcsetChroma,\n  PcsetNum,\n} from \"@tonaljs/pcset\";\nimport data from \"./data\";\n\nexport type ChordQuality =\n  | \"Major\"\n  | \"Minor\"\n  | \"Augmented\"\n  | \"Diminished\"\n  | \"Unknown\";\n\nexport interface ChordType extends Pcset {\n  name: string;\n  quality: ChordQuality;\n  aliases: string[];\n}\nconst NoChordType: ChordType = {\n  ...EmptyPcset,\n  name: \"\",\n  quality: \"Unknown\",\n  intervals: [],\n  aliases: [],\n};\n\ntype ChordTypeName = string | PcsetChroma | PcsetNum;\n\nlet dictionary: ChordType[] = [];\nlet index: Record<ChordTypeName, ChordType> = {};\n\n/**\n * Given a chord name or chroma, return the chord properties\n * @param {string} source - chord name or pitch class set chroma\n * @example\n * import { get } from 'tonaljs/chord-type'\n * get('major') // => { name: 'major', ... }\n */\nexport function get(type: ChordTypeName): ChordType {\n  return index[type] || NoChordType;\n}\n\nexport const chordType = deprecate(\"ChordType.chordType\", \"ChordType.get\", get);\n\n/**\n * Get all chord (long) names\n */\nexport function names() {\n  return dictionary.map((chord) => chord.name).filter((x) => x);\n}\n\n/**\n * Get all chord symbols\n */\nexport function symbols() {\n  return dictionary.map((chord) => chord.aliases[0]).filter((x) => x);\n}\n\n/**\n * Keys used to reference chord types\n */\nexport function keys() {\n  return Object.keys(index);\n}\n\n/**\n * Return a list of all chord types\n */\nexport function all(): ChordType[] {\n  return dictionary.slice();\n}\n\nexport const entries = deprecate(\"ChordType.entries\", \"ChordType.all\", all);\n\n/**\n * Clear the dictionary\n */\nexport function removeAll() {\n  dictionary = [];\n  index = {};\n}\n\n/**\n * Add a chord to the dictionary.\n * @param intervals\n * @param aliases\n * @param [fullName]\n */\nexport function add(intervals: string[], aliases: string[], fullName?: string) {\n  const quality = getQuality(intervals);\n  const chord = {\n    ...pcset(intervals),\n    name: fullName || \"\",\n    quality,\n    intervals,\n    aliases,\n  };\n  dictionary.push(chord);\n  if (chord.name) {\n    index[chord.name] = chord;\n  }\n  index[chord.setNum] = chord;\n  index[chord.chroma] = chord;\n  chord.aliases.forEach((alias) => addAlias(chord, alias));\n}\n\nexport function addAlias(chord: ChordType, alias: string) {\n  index[alias] = chord;\n}\n\nfunction getQuality(intervals: string[]): ChordQuality {\n  const has = (interval: string) => intervals.indexOf(interval) !== -1;\n  return has(\"5A\")\n    ? \"Augmented\"\n    : has(\"3M\")\n    ? \"Major\"\n    : has(\"5d\")\n    ? \"Diminished\"\n    : has(\"3m\")\n    ? \"Minor\"\n    : \"Unknown\";\n}\n\ndata.forEach(([ivls, fullName, names]: string[]) =>\n  add(ivls.split(\" \"), names.split(\" \"), fullName)\n);\ndictionary.sort((a, b) => a.setNum - b.setNum);\n\nexport default {\n  names,\n  symbols,\n  get,\n  all,\n  add,\n  removeAll,\n  keys,\n  // deprecated\n  entries,\n  chordType,\n};\n","/**\n * @private\n * Chord List\n * Source: https://en.wikibooks.org/wiki/Music_Theory/Complete_List_of_Chord_Patterns\n * Format: [\"intervals\", \"full name\", \"abrv1 abrv2\"]\n */\nconst CHORDS: string[][] = [\n  // ==Major==\n  [\"1P 3M 5P\", \"major\", \"M ^  maj\"],\n  [\"1P 3M 5P 7M\", \"major seventh\", \"maj7  ma7 M7 Maj7 ^7\"],\n  [\"1P 3M 5P 7M 9M\", \"major ninth\", \"maj9 9 ^9\"],\n  [\"1P 3M 5P 7M 9M 13M\", \"major thirteenth\", \"maj13 Maj13 ^13\"],\n  [\"1P 3M 5P 6M\", \"sixth\", \"6 add6 add13 M6\"],\n  [\"1P 3M 5P 6M 9M\", \"sixth added ninth\", \"6add9 6/9 69 M69\"],\n  [\"1P 3M 6m 7M\", \"major seventh flat sixth\", \"M7b6 ^7b6\"],\n  [\n    \"1P 3M 5P 7M 11A\",\n    \"major seventh sharp eleventh\",\n    \"maj#4 #4 #11 M7#11 ^7#11 maj7#11\",\n  ],\n  // ==Minor==\n  // '''Normal'''\n  [\"1P 3m 5P\", \"minor\", \"m min -\"],\n  [\"1P 3m 5P 7m\", \"minor seventh\", \"m7 min7 mi7 -7\"],\n  [\n    \"1P 3m 5P 7M\",\n    \"minor/major seventh\",\n    \"m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7\",\n  ],\n  [\"1P 3m 5P 6M\", \"minor sixth\", \"m6 -6\"],\n  [\"1P 3m 5P 7m 9M\", \"minor ninth\", \"m9 -9\"],\n  [\"1P 3m 5P 7M 9M\", \"minor/major ninth\", \"mM9 mMaj9 -^9\"],\n  [\"1P 3m 5P 7m 9M 11P\", \"minor eleventh\", \"m11 -11\"],\n  [\"1P 3m 5P 7m 9M 13M\", \"minor thirteenth\", \"m13 -13\"],\n  // '''Diminished'''\n  [\"1P 3m 5d\", \"diminished\", \"dim  o\"],\n  [\"1P 3m 5d 7d\", \"diminished seventh\", \"dim7 7 o7\"],\n  [\"1P 3m 5d 7m\", \"half-diminished\", \"m7b5  -7b5 h7 h\"],\n  // ==Dominant/Seventh==\n  // '''Normal'''\n  [\"1P 3M 5P 7m\", \"dominant seventh\", \"7 dom\"],\n  [\"1P 3M 5P 7m 9M\", \"dominant ninth\", \"9\"],\n  [\"1P 3M 5P 7m 9M 13M\", \"dominant thirteenth\", \"13\"],\n  [\"1P 3M 5P 7m 11A\", \"lydian dominant seventh\", \"7#11 7#4\"],\n  // '''Altered'''\n  [\"1P 3M 5P 7m 9m\", \"dominant flat ninth\", \"7b9\"],\n  [\"1P 3M 5P 7m 9A\", \"dominant sharp ninth\", \"7#9\"],\n  [\"1P 3M 7m 9m\", \"altered\", \"alt7\"],\n  // '''Suspended'''\n  [\"1P 4P 5P\", \"suspended fourth\", \"sus4 sus\"],\n  [\"1P 2M 5P\", \"suspended second\", \"sus2\"],\n  [\"1P 4P 5P 7m\", \"suspended fourth seventh\", \"7sus4 7sus\"],\n  [\"1P 5P 7m 9M 11P\", \"eleventh\", \"11\"],\n  [\n    \"1P 4P 5P 7m 9m\",\n    \"suspended fourth flat ninth\",\n    \"b9sus phryg 7b9sus 7b9sus4\",\n  ],\n  // ==Other==\n  [\"1P 5P\", \"fifth\", \"5\"],\n  [\"1P 3M 5A\", \"augmented\", \"aug + +5 ^#5\"],\n  [\"1P 3m 5A\", \"minor augmented\", \"m#5 -#5 m+\"],\n  [\"1P 3M 5A 7M\", \"augmented seventh\", \"maj7#5 maj7+5 +maj7 ^7#5\"],\n  [\n    \"1P 3M 5P 7M 9M 11A\",\n    \"major sharp eleventh (lydian)\",\n    \"maj9#11 9#11 ^9#11\",\n  ],\n  // ==Legacy==\n  [\"1P 2M 4P 5P\", \"\", \"sus24 sus4add9\"],\n  [\"1P 3M 5A 7M 9M\", \"\", \"maj9#5 Maj9#5\"],\n  [\"1P 3M 5A 7m\", \"\", \"7#5 +7 7+ 7aug aug7\"],\n  [\"1P 3M 5A 7m 9A\", \"\", \"7#5#9 7#9#5 7alt\"],\n  [\"1P 3M 5A 7m 9M\", \"\", \"9#5 9+\"],\n  [\"1P 3M 5A 7m 9M 11A\", \"\", \"9#5#11\"],\n  [\"1P 3M 5A 7m 9m\", \"\", \"7#5b9 7b9#5\"],\n  [\"1P 3M 5A 7m 9m 11A\", \"\", \"7#5b9#11\"],\n  [\"1P 3M 5A 9A\", \"\", \"+add#9\"],\n  [\"1P 3M 5A 9M\", \"\", \"M#5add9 +add9\"],\n  [\"1P 3M 5P 6M 11A\", \"\", \"M6#11 M6b5 6#11 6b5\"],\n  [\"1P 3M 5P 6M 7M 9M\", \"\", \"M7add13\"],\n  [\"1P 3M 5P 6M 9M 11A\", \"\", \"69#11\"],\n  [\"1P 3m 5P 6M 9M\", \"\", \"m69 -69\"],\n  [\"1P 3M 5P 6m 7m\", \"\", \"7b6\"],\n  [\"1P 3M 5P 7M 9A 11A\", \"\", \"maj7#9#11\"],\n  [\"1P 3M 5P 7M 9M 11A 13M\", \"\", \"M13#11 maj13#11 M13+4 M13#4\"],\n  [\"1P 3M 5P 7M 9m\", \"\", \"M7b9\"],\n  [\"1P 3M 5P 7m 11A 13m\", \"\", \"7#11b13 7b5b13\"],\n  [\"1P 3M 5P 7m 13M\", \"\", \"7add6 67 7add13\"],\n  [\"1P 3M 5P 7m 9A 11A\", \"\", \"7#9#11 7b5#9 7#9b5\"],\n  [\"1P 3M 5P 7m 9A 11A 13M\", \"\", \"13#9#11\"],\n  [\"1P 3M 5P 7m 9A 11A 13m\", \"\", \"7#9#11b13\"],\n  [\"1P 3M 5P 7m 9A 13M\", \"\", \"13#9\"],\n  [\"1P 3M 5P 7m 9A 13m\", \"\", \"7#9b13\"],\n  [\"1P 3M 5P 7m 9M 11A\", \"\", \"9#11 9+4 9#4\"],\n  [\"1P 3M 5P 7m 9M 11A 13M\", \"\", \"13#11 13+4 13#4\"],\n  [\"1P 3M 5P 7m 9M 11A 13m\", \"\", \"9#11b13 9b5b13\"],\n  [\"1P 3M 5P 7m 9m 11A\", \"\", \"7b9#11 7b5b9 7b9b5\"],\n  [\"1P 3M 5P 7m 9m 11A 13M\", \"\", \"13b9#11\"],\n  [\"1P 3M 5P 7m 9m 11A 13m\", \"\", \"7b9b13#11 7b9#11b13 7b5b9b13\"],\n  [\"1P 3M 5P 7m 9m 13M\", \"\", \"13b9\"],\n  [\"1P 3M 5P 7m 9m 13m\", \"\", \"7b9b13\"],\n  [\"1P 3M 5P 7m 9m 9A\", \"\", \"7b9#9\"],\n  [\"1P 3M 5P 9M\", \"\", \"Madd9 2 add9 add2\"],\n  [\"1P 3M 5P 9m\", \"\", \"Maddb9\"],\n  [\"1P 3M 5d\", \"\", \"Mb5\"],\n  [\"1P 3M 5d 6M 7m 9M\", \"\", \"13b5\"],\n  [\"1P 3M 5d 7M\", \"\", \"M7b5\"],\n  [\"1P 3M 5d 7M 9M\", \"\", \"M9b5\"],\n  [\"1P 3M 5d 7m\", \"\", \"7b5\"],\n  [\"1P 3M 5d 7m 9M\", \"\", \"9b5\"],\n  [\"1P 3M 7m\", \"\", \"7no5\"],\n  [\"1P 3M 7m 13m\", \"\", \"7b13\"],\n  [\"1P 3M 7m 9M\", \"\", \"9no5\"],\n  [\"1P 3M 7m 9M 13M\", \"\", \"13no5\"],\n  [\"1P 3M 7m 9M 13m\", \"\", \"9b13\"],\n  [\"1P 3m 4P 5P\", \"\", \"madd4\"],\n  [\"1P 3m 5P 6m 7M\", \"\", \"mMaj7b6\"],\n  [\"1P 3m 5P 6m 7M 9M\", \"\", \"mMaj9b6\"],\n  [\"1P 3m 5P 7m 11P\", \"\", \"m7add11 m7add4\"],\n  [\"1P 3m 5P 9M\", \"\", \"madd9\"],\n  [\"1P 3m 5d 6M 7M\", \"\", \"o7M7\"],\n  [\"1P 3m 5d 7M\", \"\", \"oM7\"],\n  [\"1P 3m 6m 7M\", \"\", \"mb6M7\"],\n  [\"1P 3m 6m 7m\", \"\", \"m7#5\"],\n  [\"1P 3m 6m 7m 9M\", \"\", \"m9#5\"],\n  [\"1P 3m 5A 7m 9M 11P\", \"\", \"m11A\"],\n  [\"1P 3m 6m 9m\", \"\", \"mb6b9\"],\n  [\"1P 2M 3m 5d 7m\", \"\", \"m9b5\"],\n  [\"1P 4P 5A 7M\", \"\", \"M7#5sus4\"],\n  [\"1P 4P 5A 7M 9M\", \"\", \"M9#5sus4\"],\n  [\"1P 4P 5A 7m\", \"\", \"7#5sus4\"],\n  [\"1P 4P 5P 7M\", \"\", \"M7sus4\"],\n  [\"1P 4P 5P 7M 9M\", \"\", \"M9sus4\"],\n  [\"1P 4P 5P 7m 9M\", \"\", \"9sus4 9sus\"],\n  [\"1P 4P 5P 7m 9M 13M\", \"\", \"13sus4 13sus\"],\n  [\"1P 4P 5P 7m 9m 13m\", \"\", \"7sus4b9b13 7b9b13sus4\"],\n  [\"1P 4P 7m 10m\", \"\", \"4 quartal\"],\n  [\"1P 5P 7m 9m 11P\", \"\", \"11b9\"],\n];\n\nexport default CHORDS;\n","// index.ts\nimport { compact, range, rotate } from \"@tonaljs/collection\";\nimport {\n  deprecate,\n  interval,\n  note\n} from \"@tonaljs/core\";\nvar EmptyPcset = {\n  empty: true,\n  name: \"\",\n  setNum: 0,\n  chroma: \"000000000000\",\n  normalized: \"000000000000\",\n  intervals: []\n};\nvar setNumToChroma = (num2) => Number(num2).toString(2);\nvar chromaToNumber = (chroma2) => parseInt(chroma2, 2);\nvar REGEX = /^[01]{12}$/;\nfunction isChroma(set) {\n  return REGEX.test(set);\n}\nvar isPcsetNum = (set) => typeof set === \"number\" && set >= 0 && set <= 4095;\nvar isPcset = (set) => set && isChroma(set.chroma);\nvar cache = { [EmptyPcset.chroma]: EmptyPcset };\nfunction get(src) {\n  const chroma2 = isChroma(src) ? src : isPcsetNum(src) ? setNumToChroma(src) : Array.isArray(src) ? listToChroma(src) : isPcset(src) ? src.chroma : EmptyPcset.chroma;\n  return cache[chroma2] = cache[chroma2] || chromaToPcset(chroma2);\n}\nvar pcset = deprecate(\"Pcset.pcset\", \"Pcset.get\", get);\nvar chroma = (set) => get(set).chroma;\nvar intervals = (set) => get(set).intervals;\nvar num = (set) => get(set).setNum;\nvar IVLS = [\n  \"1P\",\n  \"2m\",\n  \"2M\",\n  \"3m\",\n  \"3M\",\n  \"4P\",\n  \"5d\",\n  \"5P\",\n  \"6m\",\n  \"6M\",\n  \"7m\",\n  \"7M\"\n];\nfunction chromaToIntervals(chroma2) {\n  const intervals2 = [];\n  for (let i = 0; i < 12; i++) {\n    if (chroma2.charAt(i) === \"1\")\n      intervals2.push(IVLS[i]);\n  }\n  return intervals2;\n}\nfunction chromas() {\n  return range(2048, 4095).map(setNumToChroma);\n}\nfunction modes(set, normalize = true) {\n  const pcs = get(set);\n  const binary = pcs.chroma.split(\"\");\n  return compact(\n    binary.map((_, i) => {\n      const r = rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\nfunction isEqual(s1, s2) {\n  return get(s1).setNum === get(s2).setNum;\n}\nfunction isSubsetOf(set) {\n  const s = get(set).setNum;\n  return (notes) => {\n    const o = get(notes).setNum;\n    return s && s !== o && (o & s) === o;\n  };\n}\nfunction isSupersetOf(set) {\n  const s = get(set).setNum;\n  return (notes) => {\n    const o = get(notes).setNum;\n    return s && s !== o && (o | s) === o;\n  };\n}\nfunction isNoteIncludedIn(set) {\n  const s = get(set);\n  return (noteName) => {\n    const n = note(noteName);\n    return s && !n.empty && s.chroma.charAt(n.chroma) === \"1\";\n  };\n}\nvar includes = isNoteIncludedIn;\nfunction filter(set) {\n  const isIncluded = isNoteIncludedIn(set);\n  return (notes) => {\n    return notes.filter(isIncluded);\n  };\n}\nvar pcset_default = {\n  get,\n  chroma,\n  num,\n  intervals,\n  chromas,\n  isSupersetOf,\n  isSubsetOf,\n  isNoteIncludedIn,\n  isEqual,\n  filter,\n  modes,\n  pcset\n};\nfunction chromaRotations(chroma2) {\n  const binary = chroma2.split(\"\");\n  return binary.map((_, i) => rotate(i, binary).join(\"\"));\n}\nfunction chromaToPcset(chroma2) {\n  const setNum = chromaToNumber(chroma2);\n  const normalizedNum = chromaRotations(chroma2).map(chromaToNumber).filter((n) => n >= 2048).sort()[0];\n  const normalized = setNumToChroma(normalizedNum);\n  const intervals2 = chromaToIntervals(chroma2);\n  return {\n    empty: false,\n    name: \"\",\n    setNum,\n    chroma: chroma2,\n    normalized,\n    intervals: intervals2\n  };\n}\nfunction listToChroma(set) {\n  if (set.length === 0) {\n    return EmptyPcset.chroma;\n  }\n  let pitch;\n  const binary = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  for (let i = 0; i < set.length; i++) {\n    pitch = note(set[i]);\n    if (pitch.empty)\n      pitch = interval(set[i]);\n    if (!pitch.empty)\n      binary[pitch.chroma] = 1;\n  }\n  return binary.join(\"\");\n}\nexport {\n  EmptyPcset,\n  chroma,\n  chromaToIntervals,\n  chromas,\n  pcset_default as default,\n  filter,\n  get,\n  includes,\n  isChroma,\n  isEqual,\n  isNoteIncludedIn,\n  isSubsetOf,\n  isSupersetOf,\n  modes,\n  pcset\n};\n//# sourceMappingURL=index.mjs.map","import { compact, range, rotate } from \"@tonaljs/collection\";\nimport {\n  deprecate,\n  Interval,\n  interval,\n  IntervalName,\n  Named,\n  note,\n  Note,\n  NoteName,\n  NotFound,\n} from \"@tonaljs/core\";\n\n/**\n * The properties of a pitch class set\n * @param {number} num - a number between 1 and 4095 (both included) that\n * uniquely identifies the set. It's the decimal number of the chrom.\n * @param {string} chroma - a string representation of the set: a 12-char string\n * with either \"1\" or \"0\" as characters, representing a pitch class or not\n * for the given position in the octave. For example, a \"1\" at index 0 means 'C',\n * a \"1\" at index 2 means 'D', and so on...\n * @param {string} normalized - the chroma but shifted to the first 1\n * @param {number} length - the number of notes of the pitch class set\n * @param {IntervalName[]} intervals - the intervals of the pitch class set\n * *starting from C*\n */\nexport interface Pcset extends Named {\n  readonly empty: boolean;\n  readonly setNum: number;\n  readonly chroma: PcsetChroma;\n  readonly normalized: PcsetChroma;\n  readonly intervals: IntervalName[];\n}\n\nexport const EmptyPcset: Pcset = {\n  empty: true,\n  name: \"\",\n  setNum: 0,\n  chroma: \"000000000000\",\n  normalized: \"000000000000\",\n  intervals: [],\n};\n\nexport type PcsetChroma = string;\nexport type PcsetNum = number;\n\n// UTILITIES\nconst setNumToChroma = (num: number): string => Number(num).toString(2);\nconst chromaToNumber = (chroma: string): number => parseInt(chroma, 2);\nconst REGEX = /^[01]{12}$/;\nexport function isChroma(set: any): set is PcsetChroma {\n  return REGEX.test(set);\n}\nconst isPcsetNum = (set: any): set is PcsetNum =>\n  typeof set === \"number\" && set >= 0 && set <= 4095;\nconst isPcset = (set: any): set is Pcset => set && isChroma(set.chroma);\n\nconst cache: { [key in string]: Pcset } = { [EmptyPcset.chroma]: EmptyPcset };\n\n/**\n * A definition of a pitch class set. It could be:\n * - The pitch class set chroma (a 12-length string with only 1s or 0s)\n * - The pitch class set number (an integer between 1 and 4095)\n * - An array of note names\n * - An array of interval names\n */\nexport type Set =\n  | Partial<Pcset>\n  | PcsetChroma\n  | PcsetNum\n  | NoteName[]\n  | IntervalName[];\n\n/**\n * Get the pitch class set of a collection of notes or set number or chroma\n */\nexport function get(src: Set): Pcset {\n  const chroma: PcsetChroma = isChroma(src)\n    ? src\n    : isPcsetNum(src)\n    ? setNumToChroma(src)\n    : Array.isArray(src)\n    ? listToChroma(src)\n    : isPcset(src)\n    ? src.chroma\n    : EmptyPcset.chroma;\n\n  return (cache[chroma] = cache[chroma] || chromaToPcset(chroma));\n}\n\n/**\n * Use Pcset.properties\n * @function\n * @deprecated\n */\nexport const pcset = deprecate(\"Pcset.pcset\", \"Pcset.get\", get);\n\n/**\n * Get pitch class set chroma\n * @function\n * @example\n * Pcset.chroma([\"c\", \"d\", \"e\"]); //=> \"101010000000\"\n */\nexport const chroma = (set: Set) => get(set).chroma;\n\n/**\n * Get intervals (from C) of a set\n * @function\n * @example\n * Pcset.intervals([\"c\", \"d\", \"e\"]); //=>\n */\nconst intervals = (set: Set) => get(set).intervals;\n\n/**\n * Get pitch class set number\n * @function\n * @example\n * Pcset.num([\"c\", \"d\", \"e\"]); //=> 2192\n */\nconst num = (set: Set) => get(set).setNum;\n\nconst IVLS = [\n  \"1P\",\n  \"2m\",\n  \"2M\",\n  \"3m\",\n  \"3M\",\n  \"4P\",\n  \"5d\",\n  \"5P\",\n  \"6m\",\n  \"6M\",\n  \"7m\",\n  \"7M\",\n];\n\n/**\n * @private\n * Get the intervals of a pcset *starting from C*\n * @param {Set} set - the pitch class set\n * @return {IntervalName[]} an array of interval names or an empty array\n * if not a valid pitch class set\n */\nexport function chromaToIntervals(chroma: PcsetChroma): IntervalName[] {\n  const intervals = [];\n  for (let i = 0; i < 12; i++) {\n    // tslint:disable-next-line:curly\n    if (chroma.charAt(i) === \"1\") intervals.push(IVLS[i]);\n  }\n  return intervals;\n}\n\n/**\n * Get a list of all possible pitch class sets (all possible chromas) *having\n * C as root*. There are 2048 different chromas. If you want them with another\n * note you have to transpose it\n *\n * @see http://allthescales.org/\n * @return {Array<PcsetChroma>} an array of possible chromas from '10000000000' to '11111111111'\n */\nexport function chromas(): PcsetChroma[] {\n  return range(2048, 4095).map(setNumToChroma);\n}\n\n/**\n * Given a a list of notes or a pcset chroma, produce the rotations\n * of the chroma discarding the ones that starts with \"0\"\n *\n * This is used, for example, to get all the modes of a scale.\n *\n * @param {Array|string} set - the list of notes or pitchChr of the set\n * @param {boolean} normalize - (Optional, true by default) remove all\n * the rotations that starts with \"0\"\n * @return {Array<string>} an array with all the modes of the chroma\n *\n * @example\n * Pcset.modes([\"C\", \"D\", \"E\"]).map(Pcset.intervals)\n */\nexport function modes(set: Set, normalize = true): PcsetChroma[] {\n  const pcs = get(set);\n\n  const binary = pcs.chroma.split(\"\");\n  return compact(\n    binary.map((_, i) => {\n      const r = rotate(i, binary);\n      return normalize && r[0] === \"0\" ? null : r.join(\"\");\n    })\n  );\n}\n\n/**\n * Test if two pitch class sets are numentical\n *\n * @param {Array|string} set1 - one of the pitch class sets\n * @param {Array|string} set2 - the other pitch class set\n * @return {boolean} true if they are equal\n * @example\n * Pcset.isEqual([\"c2\", \"d3\"], [\"c5\", \"d2\"]) // => true\n */\nexport function isEqual(s1: Set, s2: Set) {\n  return get(s1).setNum === get(s2).setNum;\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * subset of a given set\n *\n * The function is curryfied.\n *\n * @param {PcsetChroma|NoteName[]} set - the superset to test against (chroma or\n * list of notes)\n * @return{function(PcsetChroma|NoteNames[]): boolean} a function accepting a set\n * to test against (chroma or list of notes)\n * @example\n * const inCMajor = Pcset.isSubsetOf([\"C\", \"E\", \"G\"])\n * inCMajor([\"e6\", \"c4\"]) // => true\n * inCMajor([\"e6\", \"c4\", \"d3\"]) // => false\n */\nexport function isSubsetOf(set: Set) {\n  const s = get(set).setNum;\n\n  return (notes: Set | Pcset) => {\n    const o = get(notes).setNum;\n    // tslint:disable-next-line: no-bitwise\n    return s && s !== o && (o & s) === o;\n  };\n}\n\n/**\n * Create a function that test if a collection of notes is a\n * superset of a given set (it contains all notes and at least one more)\n *\n * @param {Set} set - an array of notes or a chroma set string to test against\n * @return {(subset: Set): boolean} a function that given a set\n * returns true if is a subset of the first one\n * @example\n * const extendsCMajor = Pcset.isSupersetOf([\"C\", \"E\", \"G\"])\n * extendsCMajor([\"e6\", \"a\", \"c4\", \"g2\"]) // => true\n * extendsCMajor([\"c6\", \"e4\", \"g3\"]) // => false\n */\nexport function isSupersetOf(set: Set) {\n  const s = get(set).setNum;\n  return (notes: Set) => {\n    const o = get(notes).setNum;\n    // tslint:disable-next-line: no-bitwise\n    return s && s !== o && (o | s) === o;\n  };\n}\n\n/**\n * Test if a given pitch class set includes a note\n *\n * @param {Array<string>} set - the base set to test against\n * @param {string} note - the note to test\n * @return {boolean} true if the note is included in the pcset\n *\n * Can be partially applied\n *\n * @example\n * const isNoteInCMajor = isNoteIncludedIn(['C', 'E', 'G'])\n * isNoteInCMajor('C4') // => true\n * isNoteInCMajor('C#4') // => false\n */\nexport function isNoteIncludedIn(set: Set) {\n  const s = get(set);\n\n  return (noteName: NoteName): boolean => {\n    const n = note(noteName);\n    return s && !n.empty && s.chroma.charAt(n.chroma) === \"1\";\n  };\n}\n\n/** @deprecated use: isNoteIncludedIn */\nexport const includes = isNoteIncludedIn;\n\n/**\n * Filter a list with a pitch class set\n *\n * @param {Array|string} set - the pitch class set notes\n * @param {Array|string} notes - the note list to be filtered\n * @return {Array} the filtered notes\n *\n * @example\n * Pcset.filter([\"C\", \"D\", \"E\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"d2\", \"c3\", \"d3\" ])\n * Pcset.filter([\"C2\"], [\"c2\", \"c#2\", \"d2\", \"c3\", \"c#3\", \"d3\"]) // => [ \"c2\", \"c3\" ])\n */\nexport function filter(set: Set) {\n  const isIncluded = isNoteIncludedIn(set);\n  return (notes: NoteName[]) => {\n    return notes.filter(isIncluded);\n  };\n}\n\nexport default {\n  get,\n  chroma,\n  num,\n  intervals,\n  chromas,\n  isSupersetOf,\n  isSubsetOf,\n  isNoteIncludedIn,\n  isEqual,\n  filter,\n  modes,\n  // deprecated\n  pcset,\n};\n\n//// PRIVATE ////\n\nfunction chromaRotations(chroma: string): string[] {\n  const binary = chroma.split(\"\");\n  return binary.map((_, i) => rotate(i, binary).join(\"\"));\n}\n\nfunction chromaToPcset(chroma: PcsetChroma): Pcset {\n  const setNum = chromaToNumber(chroma);\n  const normalizedNum = chromaRotations(chroma)\n    .map(chromaToNumber)\n    .filter((n) => n >= 2048)\n    .sort()[0];\n  const normalized = setNumToChroma(normalizedNum);\n\n  const intervals = chromaToIntervals(chroma);\n\n  return {\n    empty: false,\n    name: \"\",\n    setNum,\n    chroma,\n    normalized,\n    intervals,\n  };\n}\n\nfunction listToChroma(set: any[]): PcsetChroma {\n  if (set.length === 0) {\n    return EmptyPcset.chroma;\n  }\n\n  let pitch: Note | Interval | NotFound;\n  const binary = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  // tslint:disable-next-line:prefer-for-of\n  for (let i = 0; i < set.length; i++) {\n    pitch = note(set[i]);\n    // tslint:disable-next-line: curly\n    if (pitch.empty) pitch = interval(set[i]);\n    // tslint:disable-next-line: curly\n    if (!pitch.empty) binary[pitch.chroma] = 1;\n  }\n  return binary.join(\"\");\n}\n","// index.ts\nfunction ascR(b, n) {\n  const a = [];\n  for (; n--; a[n] = n + b)\n    ;\n  return a;\n}\nfunction descR(b, n) {\n  const a = [];\n  for (; n--; a[n] = b - n)\n    ;\n  return a;\n}\nfunction range(from, to) {\n  return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\n}\nfunction rotate(times, arr) {\n  const len = arr.length;\n  const n = (times % len + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\nfunction compact(arr) {\n  return arr.filter((n) => n === 0 || n);\n}\nfunction shuffle(arr, rnd = Math.random) {\n  let i;\n  let t;\n  let m = arr.length;\n  while (m) {\n    i = Math.floor(rnd() * m--);\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n}\nfunction permutations(arr) {\n  if (arr.length === 0) {\n    return [[]];\n  }\n  return permutations(arr.slice(1)).reduce((acc, perm) => {\n    return acc.concat(\n      arr.map((e, pos) => {\n        const newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n}\nvar collection_default = {\n  compact,\n  permutations,\n  range,\n  rotate,\n  shuffle\n};\nexport {\n  compact,\n  collection_default as default,\n  permutations,\n  range,\n  rotate,\n  shuffle\n};\n//# sourceMappingURL=index.mjs.map","// ascending range\nfunction ascR(b: number, n: number) {\n  const a = [];\n  // tslint:disable-next-line:curly\n  for (; n--; a[n] = n + b);\n  return a;\n}\n// descending range\nfunction descR(b: number, n: number) {\n  const a = [];\n  // tslint:disable-next-line:curly\n  for (; n--; a[n] = b - n);\n  return a;\n}\n\n/**\n * Creates a numeric range\n *\n * @param {number} from\n * @param {number} to\n * @return {Array<number>}\n *\n * @example\n * range(-2, 2) // => [-2, -1, 0, 1, 2]\n * range(2, -2) // => [2, 1, 0, -1, -2]\n */\nexport function range(from: number, to: number): number[] {\n  return from < to ? ascR(from, to - from + 1) : descR(from, from - to + 1);\n}\n\n/**\n * Rotates a list a number of times. It\"s completly agnostic about the\n * contents of the list.\n *\n * @param {Integer} times - the number of rotations\n * @param {Array} collection\n * @return {Array} the rotated collection\n *\n * @example\n * rotate(1, [1, 2, 3]) // => [2, 3, 1]\n */\nexport function rotate<T>(times: number, arr: T[]): T[] {\n  const len = arr.length;\n  const n = ((times % len) + len) % len;\n  return arr.slice(n, len).concat(arr.slice(0, n));\n}\n\n/**\n * Return a copy of the collection with the null values removed\n * @function\n * @param {Array} collection\n * @return {Array}\n *\n * @example\n * compact([\"a\", \"b\", null, \"c\"]) // => [\"a\", \"b\", \"c\"]\n */\nexport function compact(arr: any[]): any[] {\n  return arr.filter((n) => n === 0 || n);\n}\n\n/**\n * Randomizes the order of the specified collection in-place, using the FisherYates shuffle.\n *\n * @function\n * @param {Array} collection\n * @return {Array} the collection shuffled\n *\n * @example\n * shuffle([\"C\", \"D\", \"E\", \"F\"]) // => [...]\n */\nexport function shuffle(arr: any[], rnd = Math.random): any[] {\n  let i: number;\n  let t: any;\n  let m: number = arr.length;\n  while (m) {\n    i = Math.floor(rnd() * m--);\n    t = arr[m];\n    arr[m] = arr[i];\n    arr[i] = t;\n  }\n  return arr;\n}\n\n/**\n * Get all permutations of an collection\n *\n * @param {Array} collection - the collection\n * @return {Array<Array>} an collection with all the permutations\n * @example\n * permutations([\"a\", \"b\", \"c\"])) // =>\n * [\n *   [\"a\", \"b\", \"c\"],\n *   [\"b\", \"a\", \"c\"],\n *   [\"b\", \"c\", \"a\"],\n *   [\"a\", \"c\", \"b\"],\n *   [\"c\", \"a\", \"b\"],\n *   [\"c\", \"b\", \"a\"]\n * ]\n */\nexport function permutations(arr: any[]): any[] {\n  if (arr.length === 0) {\n    return [[]];\n  }\n  return permutations(arr.slice(1)).reduce((acc, perm) => {\n    return acc.concat(\n      arr.map((e, pos) => {\n        const newPerm = perm.slice();\n        newPerm.splice(pos, 0, arr[0]);\n        return newPerm;\n      })\n    );\n  }, []);\n}\n\nexport default {\n  compact,\n  permutations,\n  range,\n  rotate,\n  shuffle,\n};\n","// index.ts\nimport { deprecate } from \"@tonaljs/core\";\nimport {\n  EmptyPcset,\n  get as pcset\n} from \"@tonaljs/pcset\";\n\n// data.ts\nvar SCALES = [\n  [\"1P 2M 3M 5P 6M\", \"major pentatonic\", \"pentatonic\"],\n  [\"1P 2M 3M 4P 5P 6M 7M\", \"major\", \"ionian\"],\n  [\"1P 2M 3m 4P 5P 6m 7m\", \"minor\", \"aeolian\"],\n  [\"1P 2M 3m 3M 5P 6M\", \"major blues\"],\n  [\"1P 3m 4P 5d 5P 7m\", \"minor blues\", \"blues\"],\n  [\"1P 2M 3m 4P 5P 6M 7M\", \"melodic minor\"],\n  [\"1P 2M 3m 4P 5P 6m 7M\", \"harmonic minor\"],\n  [\"1P 2M 3M 4P 5P 6M 7m 7M\", \"bebop\"],\n  [\"1P 2M 3m 4P 5d 6m 6M 7M\", \"diminished\", \"whole-half diminished\"],\n  [\"1P 2M 3m 4P 5P 6M 7m\", \"dorian\"],\n  [\"1P 2M 3M 4A 5P 6M 7M\", \"lydian\"],\n  [\"1P 2M 3M 4P 5P 6M 7m\", \"mixolydian\", \"dominant\"],\n  [\"1P 2m 3m 4P 5P 6m 7m\", \"phrygian\"],\n  [\"1P 2m 3m 4P 5d 6m 7m\", \"locrian\"],\n  [\"1P 3M 4P 5P 7M\", \"ionian pentatonic\"],\n  [\"1P 3M 4P 5P 7m\", \"mixolydian pentatonic\", \"indian\"],\n  [\"1P 2M 4P 5P 6M\", \"ritusen\"],\n  [\"1P 2M 4P 5P 7m\", \"egyptian\"],\n  [\"1P 3M 4P 5d 7m\", \"neopolitan major pentatonic\"],\n  [\"1P 3m 4P 5P 6m\", \"vietnamese 1\"],\n  [\"1P 2m 3m 5P 6m\", \"pelog\"],\n  [\"1P 2m 4P 5P 6m\", \"kumoijoshi\"],\n  [\"1P 2M 3m 5P 6m\", \"hirajoshi\"],\n  [\"1P 2m 4P 5d 7m\", \"iwato\"],\n  [\"1P 2m 4P 5P 7m\", \"in-sen\"],\n  [\"1P 3M 4A 5P 7M\", \"lydian pentatonic\", \"chinese\"],\n  [\"1P 3m 4P 6m 7m\", \"malkos raga\"],\n  [\"1P 3m 4P 5d 7m\", \"locrian pentatonic\", \"minor seven flat five pentatonic\"],\n  [\"1P 3m 4P 5P 7m\", \"minor pentatonic\", \"vietnamese 2\"],\n  [\"1P 3m 4P 5P 6M\", \"minor six pentatonic\"],\n  [\"1P 2M 3m 5P 6M\", \"flat three pentatonic\", \"kumoi\"],\n  [\"1P 2M 3M 5P 6m\", \"flat six pentatonic\"],\n  [\"1P 2m 3M 5P 6M\", \"scriabin\"],\n  [\"1P 3M 5d 6m 7m\", \"whole tone pentatonic\"],\n  [\"1P 3M 4A 5A 7M\", \"lydian #5P pentatonic\"],\n  [\"1P 3M 4A 5P 7m\", \"lydian dominant pentatonic\"],\n  [\"1P 3m 4P 5P 7M\", \"minor #7M pentatonic\"],\n  [\"1P 3m 4d 5d 7m\", \"super locrian pentatonic\"],\n  [\"1P 2M 3m 4P 5P 7M\", \"minor hexatonic\"],\n  [\"1P 2A 3M 5P 5A 7M\", \"augmented\"],\n  [\"1P 2M 4P 5P 6M 7m\", \"piongio\"],\n  [\"1P 2m 3M 4A 6M 7m\", \"prometheus neopolitan\"],\n  [\"1P 2M 3M 4A 6M 7m\", \"prometheus\"],\n  [\"1P 2m 3M 5d 6m 7m\", \"mystery #1\"],\n  [\"1P 2m 3M 4P 5A 6M\", \"six tone symmetric\"],\n  [\"1P 2M 3M 4A 5A 6A\", \"whole tone\", \"messiaen's mode #1\"],\n  [\"1P 2m 4P 4A 5P 7M\", \"messiaen's mode #5\"],\n  [\"1P 2M 3M 4P 5d 6m 7m\", \"locrian major\", \"arabian\"],\n  [\"1P 2m 3M 4A 5P 6m 7M\", \"double harmonic lydian\"],\n  [\n    \"1P 2m 2A 3M 4A 6m 7m\",\n    \"altered\",\n    \"super locrian\",\n    \"diminished whole tone\",\n    \"pomeroy\"\n  ],\n  [\"1P 2M 3m 4P 5d 6m 7m\", \"locrian #2\", \"half-diminished\", \"aeolian b5\"],\n  [\n    \"1P 2M 3M 4P 5P 6m 7m\",\n    \"mixolydian b6\",\n    \"melodic minor fifth mode\",\n    \"hindu\"\n  ],\n  [\"1P 2M 3M 4A 5P 6M 7m\", \"lydian dominant\", \"lydian b7\", \"overtone\"],\n  [\"1P 2M 3M 4A 5A 6M 7M\", \"lydian augmented\"],\n  [\n    \"1P 2m 3m 4P 5P 6M 7m\",\n    \"dorian b2\",\n    \"phrygian #6\",\n    \"melodic minor second mode\"\n  ],\n  [\n    \"1P 2m 3m 4d 5d 6m 7d\",\n    \"ultralocrian\",\n    \"superlocrian bb7\",\n    \"superlocrian diminished\"\n  ],\n  [\"1P 2m 3m 4P 5d 6M 7m\", \"locrian 6\", \"locrian natural 6\", \"locrian sharp 6\"],\n  [\"1P 2A 3M 4P 5P 5A 7M\", \"augmented heptatonic\"],\n  [\n    \"1P 2M 3m 4A 5P 6M 7m\",\n    \"dorian #4\",\n    \"ukrainian dorian\",\n    \"romanian minor\",\n    \"altered dorian\"\n  ],\n  [\"1P 2M 3m 4A 5P 6M 7M\", \"lydian diminished\"],\n  [\"1P 2M 3M 4A 5A 7m 7M\", \"leading whole tone\"],\n  [\"1P 2M 3M 4A 5P 6m 7m\", \"lydian minor\"],\n  [\"1P 2m 3M 4P 5P 6m 7m\", \"phrygian dominant\", \"spanish\", \"phrygian major\"],\n  [\"1P 2m 3m 4P 5P 6m 7M\", \"balinese\"],\n  [\"1P 2m 3m 4P 5P 6M 7M\", \"neopolitan major\"],\n  [\"1P 2M 3M 4P 5P 6m 7M\", \"harmonic major\"],\n  [\"1P 2m 3M 4P 5P 6m 7M\", \"double harmonic major\", \"gypsy\"],\n  [\"1P 2M 3m 4A 5P 6m 7M\", \"hungarian minor\"],\n  [\"1P 2A 3M 4A 5P 6M 7m\", \"hungarian major\"],\n  [\"1P 2m 3M 4P 5d 6M 7m\", \"oriental\"],\n  [\"1P 2m 3m 3M 4A 5P 7m\", \"flamenco\"],\n  [\"1P 2m 3m 4A 5P 6m 7M\", \"todi raga\"],\n  [\"1P 2m 3M 4P 5d 6m 7M\", \"persian\"],\n  [\"1P 2m 3M 5d 6m 7m 7M\", \"enigmatic\"],\n  [\n    \"1P 2M 3M 4P 5A 6M 7M\",\n    \"major augmented\",\n    \"major #5\",\n    \"ionian augmented\",\n    \"ionian #5\"\n  ],\n  [\"1P 2A 3M 4A 5P 6M 7M\", \"lydian #9\"],\n  [\"1P 2m 2M 4P 4A 5P 6m 7M\", \"messiaen's mode #4\"],\n  [\"1P 2m 3M 4P 4A 5P 6m 7M\", \"purvi raga\"],\n  [\"1P 2m 3m 3M 4P 5P 6m 7m\", \"spanish heptatonic\"],\n  [\"1P 2M 3m 3M 4P 5P 6M 7m\", \"bebop minor\"],\n  [\"1P 2M 3M 4P 5P 5A 6M 7M\", \"bebop major\"],\n  [\"1P 2m 3m 4P 5d 5P 6m 7m\", \"bebop locrian\"],\n  [\"1P 2M 3m 4P 5P 6m 7m 7M\", \"minor bebop\"],\n  [\"1P 2M 3M 4P 5d 5P 6M 7M\", \"ichikosucho\"],\n  [\"1P 2M 3m 4P 5P 6m 6M 7M\", \"minor six diminished\"],\n  [\n    \"1P 2m 3m 3M 4A 5P 6M 7m\",\n    \"half-whole diminished\",\n    \"dominant diminished\",\n    \"messiaen's mode #2\"\n  ],\n  [\"1P 3m 3M 4P 5P 6M 7m 7M\", \"kafi raga\"],\n  [\"1P 2M 3M 4P 4A 5A 6A 7M\", \"messiaen's mode #6\"],\n  [\"1P 2M 3m 3M 4P 5d 5P 6M 7m\", \"composite blues\"],\n  [\"1P 2M 3m 3M 4A 5P 6m 7m 7M\", \"messiaen's mode #3\"],\n  [\"1P 2m 2M 3m 4P 4A 5P 6m 6M 7M\", \"messiaen's mode #7\"],\n  [\"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\", \"chromatic\"]\n];\nvar data_default = SCALES;\n\n// index.ts\nvar NoScaleType = {\n  ...EmptyPcset,\n  intervals: [],\n  aliases: []\n};\nvar dictionary = [];\nvar index = {};\nfunction names() {\n  return dictionary.map((scale) => scale.name);\n}\nfunction get(type) {\n  return index[type] || NoScaleType;\n}\nvar scaleType = deprecate(\n  \"ScaleDictionary.scaleType\",\n  \"ScaleType.get\",\n  get\n);\nfunction all() {\n  return dictionary.slice();\n}\nvar entries = deprecate(\n  \"ScaleDictionary.entries\",\n  \"ScaleType.all\",\n  all\n);\nfunction keys() {\n  return Object.keys(index);\n}\nfunction removeAll() {\n  dictionary = [];\n  index = {};\n}\nfunction add(intervals, name, aliases = []) {\n  const scale = { ...pcset(intervals), name, intervals, aliases };\n  dictionary.push(scale);\n  index[scale.name] = scale;\n  index[scale.setNum] = scale;\n  index[scale.chroma] = scale;\n  scale.aliases.forEach((alias) => addAlias(scale, alias));\n  return scale;\n}\nfunction addAlias(scale, alias) {\n  index[alias] = scale;\n}\ndata_default.forEach(\n  ([ivls, name, ...aliases]) => add(ivls.split(\" \"), name, aliases)\n);\nvar scale_type_default = {\n  names,\n  get,\n  all,\n  add,\n  removeAll,\n  keys,\n  entries,\n  scaleType\n};\nexport {\n  NoScaleType,\n  add,\n  addAlias,\n  all,\n  scale_type_default as default,\n  entries,\n  get,\n  keys,\n  names,\n  removeAll,\n  scaleType\n};\n//# sourceMappingURL=index.mjs.map","import { deprecate } from \"@tonaljs/core\";\nimport {\n  EmptyPcset,\n  get as pcset,\n  Pcset,\n  PcsetChroma,\n  PcsetNum,\n} from \"@tonaljs/pcset\";\nimport data from \"./data\";\n\n/**\n * Properties for a scale in the scale dictionary. It's a pitch class set\n * properties with the following additional information:\n * - name: the scale name\n * - aliases: alternative list of names\n * - intervals: an array of interval names\n */\nexport interface ScaleType extends Pcset {\n  readonly name: string;\n  readonly aliases: string[];\n}\n\nexport const NoScaleType: ScaleType = {\n  ...EmptyPcset,\n  intervals: [],\n  aliases: [],\n};\n\ntype ScaleTypeName = string | PcsetChroma | PcsetNum;\n\nlet dictionary: ScaleType[] = [];\nlet index: Record<ScaleTypeName, ScaleType> = {};\n\nexport function names() {\n  return dictionary.map((scale) => scale.name);\n}\n\n/**\n * Given a scale name or chroma, return the scale properties\n *\n * @param {string} type - scale name or pitch class set chroma\n * @example\n * import { get } from 'tonaljs/scale-type'\n * get('major') // => { name: 'major', ... }\n */\nexport function get(type: ScaleTypeName): ScaleType {\n  return index[type] || NoScaleType;\n}\n\nexport const scaleType = deprecate(\n  \"ScaleDictionary.scaleType\",\n  \"ScaleType.get\",\n  get\n);\n\n/**\n * Return a list of all scale types\n */\nexport function all() {\n  return dictionary.slice();\n}\n\nexport const entries = deprecate(\n  \"ScaleDictionary.entries\",\n  \"ScaleType.all\",\n  all\n);\n\n/**\n * Keys used to reference scale types\n */\nexport function keys() {\n  return Object.keys(index);\n}\n\n/**\n * Clear the dictionary\n */\nexport function removeAll() {\n  dictionary = [];\n  index = {};\n}\n\n/**\n * Add a scale into dictionary\n * @param intervals\n * @param name\n * @param aliases\n */\nexport function add(\n  intervals: string[],\n  name: string,\n  aliases: string[] = []\n): ScaleType {\n  const scale = { ...pcset(intervals), name, intervals, aliases };\n  dictionary.push(scale);\n  index[scale.name] = scale;\n  index[scale.setNum] = scale;\n  index[scale.chroma] = scale;\n  scale.aliases.forEach((alias) => addAlias(scale, alias));\n  return scale;\n}\n\nexport function addAlias(scale: ScaleType, alias: string) {\n  index[alias] = scale;\n}\n\ndata.forEach(([ivls, name, ...aliases]: string[]) =>\n  add(ivls.split(\" \"), name, aliases)\n);\n\nexport default {\n  names,\n  get,\n  all,\n  add,\n  removeAll,\n  keys,\n\n  // deprecated\n  entries,\n  scaleType,\n};\n","// SCALES\n// Format: [\"intervals\", \"name\", \"alias1\", \"alias2\", ...]\nconst SCALES: string[][] = [\n  // Basic scales\n  [\"1P 2M 3M 5P 6M\", \"major pentatonic\", \"pentatonic\"],\n  [\"1P 2M 3M 4P 5P 6M 7M\", \"major\", \"ionian\"],\n  [\"1P 2M 3m 4P 5P 6m 7m\", \"minor\", \"aeolian\"],\n\n  // Jazz common scales\n  [\"1P 2M 3m 3M 5P 6M\", \"major blues\"],\n  [\"1P 3m 4P 5d 5P 7m\", \"minor blues\", \"blues\"],\n  [\"1P 2M 3m 4P 5P 6M 7M\", \"melodic minor\"],\n  [\"1P 2M 3m 4P 5P 6m 7M\", \"harmonic minor\"],\n  [\"1P 2M 3M 4P 5P 6M 7m 7M\", \"bebop\"],\n  [\"1P 2M 3m 4P 5d 6m 6M 7M\", \"diminished\", \"whole-half diminished\"],\n\n  // Modes\n  [\"1P 2M 3m 4P 5P 6M 7m\", \"dorian\"],\n  [\"1P 2M 3M 4A 5P 6M 7M\", \"lydian\"],\n  [\"1P 2M 3M 4P 5P 6M 7m\", \"mixolydian\", \"dominant\"],\n  [\"1P 2m 3m 4P 5P 6m 7m\", \"phrygian\"],\n  [\"1P 2m 3m 4P 5d 6m 7m\", \"locrian\"],\n\n  // 5-note scales\n  [\"1P 3M 4P 5P 7M\", \"ionian pentatonic\"],\n  [\"1P 3M 4P 5P 7m\", \"mixolydian pentatonic\", \"indian\"],\n  [\"1P 2M 4P 5P 6M\", \"ritusen\"],\n  [\"1P 2M 4P 5P 7m\", \"egyptian\"],\n  [\"1P 3M 4P 5d 7m\", \"neopolitan major pentatonic\"],\n  [\"1P 3m 4P 5P 6m\", \"vietnamese 1\"],\n  [\"1P 2m 3m 5P 6m\", \"pelog\"],\n  [\"1P 2m 4P 5P 6m\", \"kumoijoshi\"],\n  [\"1P 2M 3m 5P 6m\", \"hirajoshi\"],\n  [\"1P 2m 4P 5d 7m\", \"iwato\"],\n  [\"1P 2m 4P 5P 7m\", \"in-sen\"],\n  [\"1P 3M 4A 5P 7M\", \"lydian pentatonic\", \"chinese\"],\n  [\"1P 3m 4P 6m 7m\", \"malkos raga\"],\n  [\"1P 3m 4P 5d 7m\", \"locrian pentatonic\", \"minor seven flat five pentatonic\"],\n  [\"1P 3m 4P 5P 7m\", \"minor pentatonic\", \"vietnamese 2\"],\n  [\"1P 3m 4P 5P 6M\", \"minor six pentatonic\"],\n  [\"1P 2M 3m 5P 6M\", \"flat three pentatonic\", \"kumoi\"],\n  [\"1P 2M 3M 5P 6m\", \"flat six pentatonic\"],\n  [\"1P 2m 3M 5P 6M\", \"scriabin\"],\n  [\"1P 3M 5d 6m 7m\", \"whole tone pentatonic\"],\n  [\"1P 3M 4A 5A 7M\", \"lydian #5P pentatonic\"],\n  [\"1P 3M 4A 5P 7m\", \"lydian dominant pentatonic\"],\n  [\"1P 3m 4P 5P 7M\", \"minor #7M pentatonic\"],\n  [\"1P 3m 4d 5d 7m\", \"super locrian pentatonic\"],\n\n  // 6-note scales\n  [\"1P 2M 3m 4P 5P 7M\", \"minor hexatonic\"],\n  [\"1P 2A 3M 5P 5A 7M\", \"augmented\"],\n  [\"1P 2M 4P 5P 6M 7m\", \"piongio\"],\n  [\"1P 2m 3M 4A 6M 7m\", \"prometheus neopolitan\"],\n  [\"1P 2M 3M 4A 6M 7m\", \"prometheus\"],\n  [\"1P 2m 3M 5d 6m 7m\", \"mystery #1\"],\n  [\"1P 2m 3M 4P 5A 6M\", \"six tone symmetric\"],\n  [\"1P 2M 3M 4A 5A 6A\", \"whole tone\", \"messiaen's mode #1\"],\n  [\"1P 2m 4P 4A 5P 7M\", \"messiaen's mode #5\"],\n\n  // 7-note scales\n  [\"1P 2M 3M 4P 5d 6m 7m\", \"locrian major\", \"arabian\"],\n  [\"1P 2m 3M 4A 5P 6m 7M\", \"double harmonic lydian\"],\n  [\n    \"1P 2m 2A 3M 4A 6m 7m\",\n    \"altered\",\n    \"super locrian\",\n    \"diminished whole tone\",\n    \"pomeroy\",\n  ],\n  [\"1P 2M 3m 4P 5d 6m 7m\", \"locrian #2\", \"half-diminished\", \"aeolian b5\"],\n  [\n    \"1P 2M 3M 4P 5P 6m 7m\",\n    \"mixolydian b6\",\n    \"melodic minor fifth mode\",\n    \"hindu\",\n  ],\n  [\"1P 2M 3M 4A 5P 6M 7m\", \"lydian dominant\", \"lydian b7\", \"overtone\"],\n  [\"1P 2M 3M 4A 5A 6M 7M\", \"lydian augmented\"],\n  [\n    \"1P 2m 3m 4P 5P 6M 7m\",\n    \"dorian b2\",\n    \"phrygian #6\",\n    \"melodic minor second mode\",\n  ],\n  [\n    \"1P 2m 3m 4d 5d 6m 7d\",\n    \"ultralocrian\",\n    \"superlocrian bb7\",\n    \"superlocrian diminished\",\n  ],\n  [\"1P 2m 3m 4P 5d 6M 7m\", \"locrian 6\", \"locrian natural 6\", \"locrian sharp 6\"],\n  [\"1P 2A 3M 4P 5P 5A 7M\", \"augmented heptatonic\"],\n  // Source https://en.wikipedia.org/wiki/Ukrainian_Dorian_scale\n  [\n    \"1P 2M 3m 4A 5P 6M 7m\",\n    \"dorian #4\",\n    \"ukrainian dorian\",\n    \"romanian minor\",\n    \"altered dorian\",\n  ],\n  [\"1P 2M 3m 4A 5P 6M 7M\", \"lydian diminished\"],\n  [\"1P 2M 3M 4A 5A 7m 7M\", \"leading whole tone\"],\n  [\"1P 2M 3M 4A 5P 6m 7m\", \"lydian minor\"],\n  [\"1P 2m 3M 4P 5P 6m 7m\", \"phrygian dominant\", \"spanish\", \"phrygian major\"],\n  [\"1P 2m 3m 4P 5P 6m 7M\", \"balinese\"],\n  [\"1P 2m 3m 4P 5P 6M 7M\", \"neopolitan major\"],\n  [\"1P 2M 3M 4P 5P 6m 7M\", \"harmonic major\"],\n  [\"1P 2m 3M 4P 5P 6m 7M\", \"double harmonic major\", \"gypsy\"],\n  [\"1P 2M 3m 4A 5P 6m 7M\", \"hungarian minor\"],\n  [\"1P 2A 3M 4A 5P 6M 7m\", \"hungarian major\"],\n  [\"1P 2m 3M 4P 5d 6M 7m\", \"oriental\"],\n  [\"1P 2m 3m 3M 4A 5P 7m\", \"flamenco\"],\n  [\"1P 2m 3m 4A 5P 6m 7M\", \"todi raga\"],\n  [\"1P 2m 3M 4P 5d 6m 7M\", \"persian\"],\n  [\"1P 2m 3M 5d 6m 7m 7M\", \"enigmatic\"],\n  [\n    \"1P 2M 3M 4P 5A 6M 7M\",\n    \"major augmented\",\n    \"major #5\",\n    \"ionian augmented\",\n    \"ionian #5\",\n  ],\n  [\"1P 2A 3M 4A 5P 6M 7M\", \"lydian #9\"],\n\n  // 8-note scales\n  [\"1P 2m 2M 4P 4A 5P 6m 7M\", \"messiaen's mode #4\"],\n  [\"1P 2m 3M 4P 4A 5P 6m 7M\", \"purvi raga\"],\n  [\"1P 2m 3m 3M 4P 5P 6m 7m\", \"spanish heptatonic\"],\n  [\"1P 2M 3m 3M 4P 5P 6M 7m\", \"bebop minor\"],\n  [\"1P 2M 3M 4P 5P 5A 6M 7M\", \"bebop major\"],\n  [\"1P 2m 3m 4P 5d 5P 6m 7m\", \"bebop locrian\"],\n  [\"1P 2M 3m 4P 5P 6m 7m 7M\", \"minor bebop\"],\n  [\"1P 2M 3M 4P 5d 5P 6M 7M\", \"ichikosucho\"],\n  [\"1P 2M 3m 4P 5P 6m 6M 7M\", \"minor six diminished\"],\n  [\n    \"1P 2m 3m 3M 4A 5P 6M 7m\",\n    \"half-whole diminished\",\n    \"dominant diminished\",\n    \"messiaen's mode #2\",\n  ],\n  [\"1P 3m 3M 4P 5P 6M 7m 7M\", \"kafi raga\"],\n  [\"1P 2M 3M 4P 4A 5A 6A 7M\", \"messiaen's mode #6\"],\n\n  // 9-note scales\n  [\"1P 2M 3m 3M 4P 5d 5P 6M 7m\", \"composite blues\"],\n  [\"1P 2M 3m 3M 4A 5P 6m 7m 7M\", \"messiaen's mode #3\"],\n\n  // 10-note scales\n  [\"1P 2m 2M 3m 4P 4A 5P 6m 6M 7M\", \"messiaen's mode #7\"],\n\n  // 12-note scales\n  [\"1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M\", \"chromatic\"],\n];\n\nexport default SCALES;\n","// data.ts\nvar DATA = [\n  [\n    0.125,\n    \"dl\",\n    [\"large\", \"duplex longa\", \"maxima\", \"octuple\", \"octuple whole\"]\n  ],\n  [0.25, \"l\", [\"long\", \"longa\"]],\n  [0.5, \"d\", [\"double whole\", \"double\", \"breve\"]],\n  [1, \"w\", [\"whole\", \"semibreve\"]],\n  [2, \"h\", [\"half\", \"minim\"]],\n  [4, \"q\", [\"quarter\", \"crotchet\"]],\n  [8, \"e\", [\"eighth\", \"quaver\"]],\n  [16, \"s\", [\"sixteenth\", \"semiquaver\"]],\n  [32, \"t\", [\"thirty-second\", \"demisemiquaver\"]],\n  [64, \"sf\", [\"sixty-fourth\", \"hemidemisemiquaver\"]],\n  [128, \"h\", [\"hundred twenty-eighth\"]],\n  [256, \"th\", [\"two hundred fifty-sixth\"]]\n];\nvar data_default = DATA;\n\n// index.ts\nvar VALUES = [];\ndata_default.forEach(\n  ([denominator, shorthand, names2]) => add(denominator, shorthand, names2)\n);\nvar NoDuration = {\n  empty: true,\n  name: \"\",\n  value: 0,\n  fraction: [0, 0],\n  shorthand: \"\",\n  dots: \"\",\n  names: []\n};\nfunction names() {\n  return VALUES.reduce((names2, duration) => {\n    duration.names.forEach((name) => names2.push(name));\n    return names2;\n  }, []);\n}\nfunction shorthands() {\n  return VALUES.map((dur) => dur.shorthand);\n}\nvar REGEX = /^([^.]+)(\\.*)$/;\nfunction get(name) {\n  const [_, simple, dots] = REGEX.exec(name) || [];\n  const base = VALUES.find(\n    (dur) => dur.shorthand === simple || dur.names.includes(simple)\n  );\n  if (!base) {\n    return NoDuration;\n  }\n  const fraction2 = calcDots(base.fraction, dots.length);\n  const value2 = fraction2[0] / fraction2[1];\n  return { ...base, name, dots, value: value2, fraction: fraction2 };\n}\nvar value = (name) => get(name).value;\nvar fraction = (name) => get(name).fraction;\nvar duration_value_default = { names, shorthands, get, value, fraction };\nfunction add(denominator, shorthand, names2) {\n  VALUES.push({\n    empty: false,\n    dots: \"\",\n    name: \"\",\n    value: 1 / denominator,\n    fraction: denominator < 1 ? [1 / denominator, 1] : [1, denominator],\n    shorthand,\n    names: names2\n  });\n}\nfunction calcDots(fraction2, dots) {\n  const pow = Math.pow(2, dots);\n  let numerator = fraction2[0] * pow;\n  let denominator = fraction2[1] * pow;\n  const base = numerator;\n  for (let i = 0; i < dots; i++) {\n    numerator += base / Math.pow(2, i + 1);\n  }\n  while (numerator % 2 === 0 && denominator % 2 === 0) {\n    numerator /= 2;\n    denominator /= 2;\n  }\n  return [numerator, denominator];\n}\nexport {\n  duration_value_default as default,\n  fraction,\n  get,\n  names,\n  shorthands,\n  value\n};\n//# sourceMappingURL=index.mjs.map","// source: https://en.wikipedia.org/wiki/Note_value\nconst DATA: [number, string, string[]][] = [\n  [\n    0.125,\n    \"dl\",\n    [\"large\", \"duplex longa\", \"maxima\", \"octuple\", \"octuple whole\"],\n  ],\n  [0.25, \"l\", [\"long\", \"longa\"]],\n  [0.5, \"d\", [\"double whole\", \"double\", \"breve\"]],\n  [1, \"w\", [\"whole\", \"semibreve\"]],\n  [2, \"h\", [\"half\", \"minim\"]],\n  [4, \"q\", [\"quarter\", \"crotchet\"]],\n  [8, \"e\", [\"eighth\", \"quaver\"]],\n  [16, \"s\", [\"sixteenth\", \"semiquaver\"]],\n  [32, \"t\", [\"thirty-second\", \"demisemiquaver\"]],\n  [64, \"sf\", [\"sixty-fourth\", \"hemidemisemiquaver\"]],\n  [128, \"h\", [\"hundred twenty-eighth\"]],\n  [256, \"th\", [\"two hundred fifty-sixth\"]],\n];\n\nexport default DATA;\n","import DATA from \"./data\";\n\ntype Fraction = [number, number];\n\nconst VALUES: DurationValue[] = [];\n\nDATA.forEach(([denominator, shorthand, names]) =>\n  add(denominator, shorthand, names)\n);\n\nexport interface DurationValue {\n  empty: boolean;\n  value: number;\n  name: string;\n  fraction: Fraction;\n  shorthand: string;\n  dots: string;\n  names: string[];\n}\n\nconst NoDuration: DurationValue = {\n  empty: true,\n  name: \"\",\n  value: 0,\n  fraction: [0, 0],\n  shorthand: \"\",\n  dots: \"\",\n  names: [],\n};\n\nexport function names(): string[] {\n  return VALUES.reduce((names, duration) => {\n    duration.names.forEach((name) => names.push(name));\n    return names;\n  }, [] as string[]);\n}\n\nexport function shorthands(): string[] {\n  return VALUES.map((dur) => dur.shorthand);\n}\n\nconst REGEX = /^([^.]+)(\\.*)$/;\n\nexport function get(name: string): DurationValue {\n  const [_, simple, dots] = REGEX.exec(name) || [];\n  const base = VALUES.find(\n    (dur) => dur.shorthand === simple || dur.names.includes(simple)\n  );\n  if (!base) {\n    return NoDuration;\n  }\n\n  const fraction = calcDots(base.fraction, dots.length);\n  const value = fraction[0] / fraction[1];\n\n  return { ...base, name, dots, value, fraction };\n}\n\nexport const value = (name: string) => get(name).value;\nexport const fraction = (name: string) => get(name).fraction;\n\nexport default { names, shorthands, get, value, fraction };\n\n//// PRIVATE ////\n\nfunction add(denominator: number, shorthand: string, names: string[]) {\n  VALUES.push({\n    empty: false,\n    dots: \"\",\n    name: \"\",\n    value: 1 / denominator,\n    fraction: denominator < 1 ? [1 / denominator, 1] : [1, denominator],\n    shorthand,\n    names,\n  });\n}\n\nfunction calcDots(fraction: Fraction, dots: number): Fraction {\n  const pow = Math.pow(2, dots);\n\n  let numerator = fraction[0] * pow;\n  let denominator = fraction[1] * pow;\n  const base = numerator;\n\n  // add fractions\n  for (let i = 0; i < dots; i++) {\n    numerator += base / Math.pow(2, i + 1);\n  }\n\n  // simplify\n  while (numerator % 2 === 0 && denominator % 2 === 0) {\n    numerator /= 2;\n    denominator /= 2;\n  }\n  return [numerator, denominator];\n}\n","// index.ts\nimport {\n  coordToInterval,\n  distance as dist,\n  interval as props\n} from \"@tonaljs/core\";\nfunction names() {\n  return \"1P 2M 3M 4P 5P 6m 7m\".split(\" \");\n}\nvar get = props;\nvar name = (name2) => props(name2).name;\nvar semitones = (name2) => props(name2).semitones;\nvar quality = (name2) => props(name2).q;\nvar num = (name2) => props(name2).num;\nfunction simplify(name2) {\n  const i = props(name2);\n  return i.empty ? \"\" : i.simple + i.q;\n}\nfunction invert(name2) {\n  const i = props(name2);\n  if (i.empty) {\n    return \"\";\n  }\n  const step = (7 - i.step) % 7;\n  const alt = i.type === \"perfectable\" ? -i.alt : -(i.alt + 1);\n  return props({ step, alt, oct: i.oct, dir: i.dir }).name;\n}\nvar IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\nvar IQ = \"P m M m M P d P m M m M\".split(\" \");\nfunction fromSemitones(semitones2) {\n  const d = semitones2 < 0 ? -1 : 1;\n  const n = Math.abs(semitones2);\n  const c = n % 12;\n  const o = Math.floor(n / 12);\n  return d * (IN[c] + 7 * o) + IQ[c];\n}\nvar distance = dist;\nvar add = combinator((a, b) => [a[0] + b[0], a[1] + b[1]]);\nvar addTo = (interval) => (other) => add(interval, other);\nvar substract = combinator((a, b) => [a[0] - b[0], a[1] - b[1]]);\nfunction transposeFifths(interval, fifths) {\n  const ivl = get(interval);\n  if (ivl.empty)\n    return \"\";\n  const [nFifths, nOcts, dir] = ivl.coord;\n  return coordToInterval([nFifths + fifths, nOcts, dir]).name;\n}\nvar interval_default = {\n  names,\n  get,\n  name,\n  num,\n  semitones,\n  quality,\n  fromSemitones,\n  distance,\n  invert,\n  simplify,\n  add,\n  addTo,\n  substract,\n  transposeFifths\n};\nfunction combinator(fn) {\n  return (a, b) => {\n    const coordA = props(a).coord;\n    const coordB = props(b).coord;\n    if (coordA && coordB) {\n      const coord = fn(coordA, coordB);\n      return coordToInterval(coord).name;\n    }\n  };\n}\nexport {\n  add,\n  addTo,\n  interval_default as default,\n  distance,\n  fromSemitones,\n  get,\n  invert,\n  name,\n  names,\n  num,\n  quality,\n  semitones,\n  simplify,\n  substract,\n  transposeFifths\n};\n//# sourceMappingURL=index.mjs.map","import {\n  coordToInterval,\n  distance as dist,\n  interval as props,\n  IntervalCoordinates,\n  IntervalName,\n  NoteCoordinates,\n  tokenizeInterval as tokenize,\n} from \"@tonaljs/core\";\n\n/**\n * Get the natural list of names\n */\nexport function names(): IntervalName[] {\n  return \"1P 2M 3M 4P 5P 6m 7m\".split(\" \");\n}\n\n/**\n * Get properties of an interval\n *\n * @function\n * @example\n * Interval.get('P4') // => {\"alt\": 0,  \"dir\": 1,  \"name\": \"4P\", \"num\": 4, \"oct\": 0, \"q\": \"P\", \"semitones\": 5, \"simple\": 4, \"step\": 3, \"type\": \"perfectable\"}\n */\nexport const get = props;\n\n/**\n * Get name of an interval\n *\n * @function\n * @example\n * Interval.name('4P') // => \"4P\"\n * Interval.name('P4') // => \"4P\"\n * Interval.name('C4') // => \"\"\n */\nexport const name = (name: string) => props(name).name;\n\n/**\n * Get semitones of an interval\n * @function\n * @example\n * Interval.semitones('P4') // => 5\n */\nexport const semitones = (name: string) => props(name).semitones;\n\n/**\n * Get quality of an interval\n * @function\n * @example\n * Interval.quality('P4') // => \"P\"\n */\nexport const quality = (name: string) => props(name).q;\n\n/**\n * Get number of an interval\n * @function\n * @example\n * Interval.num('P4') // => 4\n */\nexport const num = (name: string) => props(name).num;\n\n/**\n * Get the simplified version of an interval.\n *\n * @function\n * @param {string} interval - the interval to simplify\n * @return {string} the simplified interval\n *\n * @example\n * Interval.simplify(\"9M\") // => \"2M\"\n * Interval.simplify(\"2M\") // => \"2M\"\n * Interval.simplify(\"-2M\") // => \"7m\"\n * [\"8P\", \"9M\", \"10M\", \"11P\", \"12P\", \"13M\", \"14M\", \"15P\"].map(Interval.simplify)\n * // => [ \"8P\", \"2M\", \"3M\", \"4P\", \"5P\", \"6M\", \"7M\", \"8P\" ]\n */\nexport function simplify(name: IntervalName): IntervalName {\n  const i = props(name);\n  return i.empty ? \"\" : i.simple + i.q;\n}\n\n/**\n * Get the inversion (https://en.wikipedia.org/wiki/Inversion_(music)#Intervals)\n * of an interval.\n *\n * @function\n * @param {string} interval - the interval to invert in interval shorthand\n * notation or interval array notation\n * @return {string} the inverted interval\n *\n * @example\n * Interval.invert(\"3m\") // => \"6M\"\n * Interval.invert(\"2M\") // => \"7m\"\n */\nexport function invert(name: IntervalName): IntervalName {\n  const i = props(name);\n  if (i.empty) {\n    return \"\";\n  }\n  const step = (7 - i.step) % 7;\n  const alt = i.type === \"perfectable\" ? -i.alt : -(i.alt + 1);\n  return props({ step, alt, oct: i.oct, dir: i.dir }).name;\n}\n\n// interval numbers\nconst IN = [1, 2, 2, 3, 3, 4, 5, 5, 6, 6, 7, 7];\n// interval qualities\nconst IQ = \"P m M m M P d P m M m M\".split(\" \");\n\n/**\n * Get interval name from semitones number. Since there are several interval\n * names for the same number, the name it's arbitrary, but deterministic.\n *\n * @param {Integer} num - the number of semitones (can be negative)\n * @return {string} the interval name\n * @example\n * Interval.fromSemitones(7) // => \"5P\"\n * Interval.fromSemitones(-7) // => \"-5P\"\n */\nexport function fromSemitones(semitones: number): IntervalName {\n  const d = semitones < 0 ? -1 : 1;\n  const n = Math.abs(semitones);\n  const c = n % 12;\n  const o = Math.floor(n / 12);\n  return d * (IN[c] + 7 * o) + IQ[c];\n}\n\n/**\n * Find interval between two notes\n *\n * @example\n * Interval.distance(\"C4\", \"G4\"); // => \"5P\"\n */\nexport const distance = dist;\n\n/**\n * Adds two intervals\n *\n * @function\n * @param {string} interval1\n * @param {string} interval2\n * @return {string} the added interval name\n * @example\n * Interval.add(\"3m\", \"5P\") // => \"7m\"\n */\nexport const add = combinator((a, b) => [a[0] + b[0], a[1] + b[1]]);\n\n/**\n * Returns a function that adds an interval\n *\n * @function\n * @example\n * ['1P', '2M', '3M'].map(Interval.addTo('5P')) // => [\"5P\", \"6M\", \"7M\"]\n */\nexport const addTo = (interval: string) => (other: string) =>\n  add(interval, other);\n\n/**\n * Subtracts two intervals\n *\n * @function\n * @param {string} minuendInterval\n * @param {string} subtrahendInterval\n * @return {string} the substracted interval name\n * @example\n * Interval.substract('5P', '3M') // => '3m'\n * Interval.substract('3M', '5P') // => '-3m'\n */\nexport const substract = combinator((a, b) => [a[0] - b[0], a[1] - b[1]]);\n\nexport function transposeFifths(\n  interval: IntervalName,\n  fifths: number\n): IntervalName {\n  const ivl = get(interval);\n  if (ivl.empty) return \"\";\n\n  const [nFifths, nOcts, dir] = ivl.coord;\n  return coordToInterval([nFifths + fifths, nOcts, dir]).name;\n}\n\nexport default {\n  names,\n  get,\n  name,\n  num,\n  semitones,\n  quality,\n  fromSemitones,\n  distance,\n  invert,\n  simplify,\n  add,\n  addTo,\n  substract,\n  transposeFifths,\n};\n\n//// PRIVATE ////\n\ntype Operation = (\n  a: IntervalCoordinates,\n  b: IntervalCoordinates\n) => NoteCoordinates;\n\nfunction combinator(fn: Operation) {\n  return (a: IntervalName, b: IntervalName): IntervalName | undefined => {\n    const coordA = props(a).coord;\n    const coordB = props(b).coord;\n    if (coordA && coordB) {\n      const coord = fn(coordA, coordB);\n      return coordToInterval(coord).name;\n    }\n  };\n}\n","// index.ts\nimport { accToAlt, altToAcc, note, transpose } from \"@tonaljs/core\";\nimport { transposeFifths } from \"@tonaljs/note\";\nimport { get as roman } from \"@tonaljs/roman-numeral\";\nvar Empty = Object.freeze([]);\nvar NoKey = {\n  type: \"major\",\n  tonic: \"\",\n  alteration: 0,\n  keySignature: \"\"\n};\nvar NoKeyScale = {\n  tonic: \"\",\n  grades: Empty,\n  intervals: Empty,\n  scale: Empty,\n  triads: Empty,\n  chords: Empty,\n  chordsHarmonicFunction: Empty,\n  chordScales: Empty\n};\nvar NoMajorKey = {\n  ...NoKey,\n  ...NoKeyScale,\n  type: \"major\",\n  minorRelative: \"\",\n  scale: Empty,\n  secondaryDominants: Empty,\n  secondaryDominantsMinorRelative: Empty,\n  substituteDominants: Empty,\n  substituteDominantsMinorRelative: Empty\n};\nvar NoMinorKey = {\n  ...NoKey,\n  type: \"minor\",\n  relativeMajor: \"\",\n  natural: NoKeyScale,\n  harmonic: NoKeyScale,\n  melodic: NoKeyScale\n};\nvar mapScaleToType = (scale, list, sep = \"\") => list.map((type, i) => `${scale[i]}${sep}${type}`);\nfunction keyScale(grades, triads, chords, harmonicFunctions, chordScales) {\n  return (tonic) => {\n    const intervals = grades.map((gr) => roman(gr).interval || \"\");\n    const scale = intervals.map((interval) => transpose(tonic, interval));\n    return {\n      tonic,\n      grades,\n      intervals,\n      scale,\n      triads: mapScaleToType(scale, triads),\n      chords: mapScaleToType(scale, chords),\n      chordsHarmonicFunction: harmonicFunctions.slice(),\n      chordScales: mapScaleToType(scale, chordScales, \" \")\n    };\n  };\n}\nvar distInFifths = (from, to) => {\n  const f = note(from);\n  const t = note(to);\n  return f.empty || t.empty ? 0 : t.coord[0] - f.coord[0];\n};\nvar MajorScale = keyScale(\n  \"I II III IV V VI VII\".split(\" \"),\n  \" m m   m dim\".split(\" \"),\n  \"maj7 m7 m7 maj7 7 m7 m7b5\".split(\" \"),\n  \"T SD T SD D T D\".split(\" \"),\n  \"major,dorian,phrygian,lydian,mixolydian,minor,locrian\".split(\",\")\n);\nvar NaturalScale = keyScale(\n  \"I II bIII IV V bVI bVII\".split(\" \"),\n  \"m dim  m m  \".split(\" \"),\n  \"m7 m7b5 maj7 m7 m7 maj7 7\".split(\" \"),\n  \"T SD T SD D SD SD\".split(\" \"),\n  \"minor,locrian,major,dorian,phrygian,lydian,mixolydian\".split(\",\")\n);\nvar HarmonicScale = keyScale(\n  \"I II bIII IV V bVI VII\".split(\" \"),\n  \"m dim aug m   dim\".split(\" \"),\n  \"mMaj7 m7b5 +maj7 m7 7 maj7 o7\".split(\" \"),\n  \"T SD T SD D SD D\".split(\" \"),\n  \"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian\".split(\n    \",\"\n  )\n);\nvar MelodicScale = keyScale(\n  \"I II bIII IV V VI VII\".split(\" \"),\n  \"m m aug   dim dim\".split(\" \"),\n  \"m6 m7 +maj7 7 7 m7b5 m7b5\".split(\" \"),\n  \"T SD T SD D  \".split(\" \"),\n  \"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered\".split(\n    \",\"\n  )\n);\nfunction majorKey(tonic) {\n  const pc = note(tonic).pc;\n  if (!pc)\n    return NoMajorKey;\n  const keyScale2 = MajorScale(pc);\n  const alteration = distInFifths(\"C\", pc);\n  const romanInTonic = (src) => {\n    const r = roman(src);\n    if (r.empty)\n      return \"\";\n    return transpose(tonic, r.interval) + r.chordType;\n  };\n  return {\n    ...keyScale2,\n    type: \"major\",\n    minorRelative: transpose(pc, \"-3m\"),\n    alteration,\n    keySignature: altToAcc(alteration),\n    secondaryDominants: \"- VI7 VII7 I7 II7 III7 -\".split(\" \").map(romanInTonic),\n    secondaryDominantsMinorRelative: \"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -\".split(\" \").map(romanInTonic),\n    substituteDominants: \"- bIII7 IV7 bV7 bVI7 bVII7 -\".split(\" \").map(romanInTonic),\n    substituteDominantsMinorRelative: \"- IIIm7 Im7 IIbm7 VIm7 IVm7 -\".split(\" \").map(romanInTonic)\n  };\n}\nfunction minorKey(tnc) {\n  const pc = note(tnc).pc;\n  if (!pc)\n    return NoMinorKey;\n  const alteration = distInFifths(\"C\", pc) - 3;\n  return {\n    type: \"minor\",\n    tonic: pc,\n    relativeMajor: transpose(pc, \"3m\"),\n    alteration,\n    keySignature: altToAcc(alteration),\n    natural: NaturalScale(pc),\n    harmonic: HarmonicScale(pc),\n    melodic: MelodicScale(pc)\n  };\n}\nfunction majorTonicFromKeySignature(sig) {\n  if (typeof sig === \"number\") {\n    return transposeFifths(\"C\", sig);\n  } else if (typeof sig === \"string\" && /^b+|#+$/.test(sig)) {\n    return transposeFifths(\"C\", accToAlt(sig));\n  }\n  return null;\n}\nvar key_default = { majorKey, majorTonicFromKeySignature, minorKey };\nexport {\n  key_default as default,\n  majorKey,\n  majorTonicFromKeySignature,\n  minorKey\n};\n//# sourceMappingURL=index.mjs.map","import { accToAlt, altToAcc, note, transpose } from \"@tonaljs/core\";\nimport { transposeFifths } from \"@tonaljs/note\";\nimport { get as roman } from \"@tonaljs/roman-numeral\";\n\nconst Empty: readonly string[] = Object.freeze([] as string[]);\n\nexport interface Key {\n  readonly type: \"major\" | \"minor\";\n  readonly tonic: string;\n  readonly alteration: number;\n  readonly keySignature: string;\n}\n\nconst NoKey: Key = {\n  type: \"major\",\n  tonic: \"\",\n  alteration: 0,\n  keySignature: \"\",\n};\n\nexport interface KeyScale {\n  readonly tonic: string;\n  readonly grades: readonly string[];\n  readonly intervals: readonly string[];\n  readonly scale: readonly string[];\n  readonly triads: readonly string[];\n  readonly chords: readonly string[];\n  readonly chordsHarmonicFunction: readonly string[];\n  readonly chordScales: readonly string[];\n}\n\nconst NoKeyScale: KeyScale = {\n  tonic: \"\",\n  grades: Empty,\n  intervals: Empty,\n  scale: Empty,\n  triads: Empty,\n  chords: Empty,\n  chordsHarmonicFunction: Empty,\n  chordScales: Empty,\n};\n\nexport interface MajorKey extends Key, KeyScale {\n  readonly type: \"major\";\n  readonly minorRelative: string;\n  readonly scale: readonly string[];\n  readonly secondaryDominants: readonly string[];\n  readonly secondaryDominantsMinorRelative: readonly string[];\n  readonly substituteDominants: readonly string[];\n  readonly substituteDominantsMinorRelative: readonly string[];\n}\n\nconst NoMajorKey: MajorKey = {\n  ...NoKey,\n  ...NoKeyScale,\n  type: \"major\",\n  minorRelative: \"\",\n  scale: Empty,\n  secondaryDominants: Empty,\n  secondaryDominantsMinorRelative: Empty,\n  substituteDominants: Empty,\n  substituteDominantsMinorRelative: Empty,\n};\n\nexport interface MinorKey extends Key {\n  readonly type: \"minor\";\n  readonly relativeMajor: string;\n  readonly natural: KeyScale;\n  readonly harmonic: KeyScale;\n  readonly melodic: KeyScale;\n}\n\nconst NoMinorKey: MinorKey = {\n  ...NoKey,\n  type: \"minor\",\n  relativeMajor: \"\",\n  natural: NoKeyScale,\n  harmonic: NoKeyScale,\n  melodic: NoKeyScale,\n};\n\nconst mapScaleToType = (scale: string[], list: string[], sep = \"\") =>\n  list.map((type, i) => `${scale[i]}${sep}${type}`);\n\nfunction keyScale(\n  grades: string[],\n  triads: string[],\n  chords: string[],\n  harmonicFunctions: string[],\n  chordScales: string[]\n) {\n  return (tonic: string): KeyScale => {\n    const intervals = grades.map((gr) => roman(gr).interval || \"\");\n    const scale = intervals.map((interval) => transpose(tonic, interval));\n\n    return {\n      tonic,\n      grades,\n      intervals,\n      scale,\n      triads: mapScaleToType(scale, triads),\n      chords: mapScaleToType(scale, chords),\n      chordsHarmonicFunction: harmonicFunctions.slice(),\n      chordScales: mapScaleToType(scale, chordScales, \" \"),\n    };\n  };\n}\n\nconst distInFifths = (from: string, to: string) => {\n  const f = note(from);\n  const t = note(to);\n  return f.empty || t.empty ? 0 : t.coord[0] - f.coord[0];\n};\n\nconst MajorScale = keyScale(\n  \"I II III IV V VI VII\".split(\" \"),\n  \" m m   m dim\".split(\" \"),\n  \"maj7 m7 m7 maj7 7 m7 m7b5\".split(\" \"),\n  \"T SD T SD D T D\".split(\" \"),\n  \"major,dorian,phrygian,lydian,mixolydian,minor,locrian\".split(\",\")\n);\nconst NaturalScale = keyScale(\n  \"I II bIII IV V bVI bVII\".split(\" \"),\n  \"m dim  m m  \".split(\" \"),\n  \"m7 m7b5 maj7 m7 m7 maj7 7\".split(\" \"),\n  \"T SD T SD D SD SD\".split(\" \"),\n  \"minor,locrian,major,dorian,phrygian,lydian,mixolydian\".split(\",\")\n);\nconst HarmonicScale = keyScale(\n  \"I II bIII IV V bVI VII\".split(\" \"),\n  \"m dim aug m   dim\".split(\" \"),\n  \"mMaj7 m7b5 +maj7 m7 7 maj7 o7\".split(\" \"),\n  \"T SD T SD D SD D\".split(\" \"),\n  \"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian\".split(\n    \",\"\n  )\n);\nconst MelodicScale = keyScale(\n  \"I II bIII IV V VI VII\".split(\" \"),\n  \"m m aug   dim dim\".split(\" \"),\n  \"m6 m7 +maj7 7 7 m7b5 m7b5\".split(\" \"),\n  \"T SD T SD D  \".split(\" \"),\n  \"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered\".split(\n    \",\"\n  )\n);\n\n/**\n * Get a major key properties in a given tonic\n * @param tonic\n */\nexport function majorKey(tonic: string): MajorKey {\n  const pc = note(tonic).pc;\n  if (!pc) return NoMajorKey;\n\n  const keyScale = MajorScale(pc);\n  const alteration = distInFifths(\"C\", pc);\n  const romanInTonic = (src: string) => {\n    const r = roman(src);\n    if (r.empty) return \"\";\n\n    return transpose(tonic, r.interval) + r.chordType;\n  };\n\n  return {\n    ...keyScale,\n    type: \"major\",\n    minorRelative: transpose(pc, \"-3m\"),\n    alteration,\n    keySignature: altToAcc(alteration),\n    secondaryDominants: \"- VI7 VII7 I7 II7 III7 -\".split(\" \").map(romanInTonic),\n    secondaryDominantsMinorRelative: \"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -\"\n      .split(\" \")\n      .map(romanInTonic),\n    substituteDominants: \"- bIII7 IV7 bV7 bVI7 bVII7 -\"\n      .split(\" \")\n      .map(romanInTonic),\n    substituteDominantsMinorRelative: \"- IIIm7 Im7 IIbm7 VIm7 IVm7 -\"\n      .split(\" \")\n      .map(romanInTonic),\n  };\n}\n\n/**\n * Get minor key properties in a given tonic\n * @param tonic\n */\nexport function minorKey(tnc: string): MinorKey {\n  const pc = note(tnc).pc;\n  if (!pc) return NoMinorKey;\n\n  const alteration = distInFifths(\"C\", pc) - 3;\n  return {\n    type: \"minor\",\n    tonic: pc,\n    relativeMajor: transpose(pc, \"3m\"),\n    alteration,\n    keySignature: altToAcc(alteration),\n    natural: NaturalScale(pc),\n    harmonic: HarmonicScale(pc),\n    melodic: MelodicScale(pc),\n  };\n}\n\n/**\n * Given a key signature, returns the tonic of the major key\n * @param sigature\n * @example\n * majorTonicFromKeySignature('###') // => 'A'\n */\nexport function majorTonicFromKeySignature(\n  sig: string | number\n): string | null {\n  if (typeof sig === \"number\") {\n    return transposeFifths(\"C\", sig);\n  } else if (typeof sig === \"string\" && /^b+|#+$/.test(sig)) {\n    return transposeFifths(\"C\", accToAlt(sig));\n  }\n  return null;\n}\n\nexport default { majorKey, majorTonicFromKeySignature, minorKey };\n","// index.ts\nimport {\n  note as props,\n  transpose as _tr\n} from \"@tonaljs/core\";\nimport { freqToMidi, midiToNoteName } from \"@tonaljs/midi\";\nvar NAMES = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\nvar toName = (n) => n.name;\nvar onlyNotes = (array) => array.map(props).filter((n) => !n.empty);\nfunction names(array) {\n  if (array === void 0) {\n    return NAMES.slice();\n  } else if (!Array.isArray(array)) {\n    return [];\n  } else {\n    return onlyNotes(array).map(toName);\n  }\n}\nvar get = props;\nvar name = (note) => get(note).name;\nvar pitchClass = (note) => get(note).pc;\nvar accidentals = (note) => get(note).acc;\nvar octave = (note) => get(note).oct;\nvar midi = (note) => get(note).midi;\nvar freq = (note) => get(note).freq;\nvar chroma = (note) => get(note).chroma;\nfunction fromMidi(midi2) {\n  return midiToNoteName(midi2);\n}\nfunction fromFreq(freq2) {\n  return midiToNoteName(freqToMidi(freq2));\n}\nfunction fromFreqSharps(freq2) {\n  return midiToNoteName(freqToMidi(freq2), { sharps: true });\n}\nfunction fromMidiSharps(midi2) {\n  return midiToNoteName(midi2, { sharps: true });\n}\nvar transpose = _tr;\nvar tr = _tr;\nvar transposeBy = (interval) => (note) => transpose(note, interval);\nvar trBy = transposeBy;\nvar transposeFrom = (note) => (interval) => transpose(note, interval);\nvar trFrom = transposeFrom;\nfunction transposeFifths(noteName, fifths) {\n  return transpose(noteName, [fifths, 0]);\n}\nvar trFifths = transposeFifths;\nfunction transposeOctaves(noteName, octaves) {\n  return transpose(noteName, [0, octaves]);\n}\nvar ascending = (a, b) => a.height - b.height;\nvar descending = (a, b) => b.height - a.height;\nfunction sortedNames(notes, comparator) {\n  comparator = comparator || ascending;\n  return onlyNotes(notes).sort(comparator).map(toName);\n}\nfunction sortedUniqNames(notes) {\n  return sortedNames(notes, ascending).filter(\n    (n, i, a) => i === 0 || n !== a[i - 1]\n  );\n}\nvar simplify = (noteName) => {\n  const note = get(noteName);\n  if (note.empty) {\n    return \"\";\n  }\n  return midiToNoteName(note.midi || note.chroma, {\n    sharps: note.alt > 0,\n    pitchClass: note.midi === null\n  });\n};\nfunction enharmonic(noteName, destName) {\n  const src = get(noteName);\n  if (src.empty) {\n    return \"\";\n  }\n  const dest = get(\n    destName || midiToNoteName(src.midi || src.chroma, {\n      sharps: src.alt < 0,\n      pitchClass: true\n    })\n  );\n  if (dest.empty || dest.chroma !== src.chroma) {\n    return \"\";\n  }\n  if (src.oct === void 0) {\n    return dest.pc;\n  }\n  const srcChroma = src.chroma - src.alt;\n  const destChroma = dest.chroma - dest.alt;\n  const destOctOffset = srcChroma > 11 || destChroma < 0 ? -1 : srcChroma < 0 || destChroma > 11 ? 1 : 0;\n  const destOct = src.oct + destOctOffset;\n  return dest.pc + destOct;\n}\nvar note_default = {\n  names,\n  get,\n  name,\n  pitchClass,\n  accidentals,\n  octave,\n  midi,\n  ascending,\n  descending,\n  sortedNames,\n  sortedUniqNames,\n  fromMidi,\n  fromMidiSharps,\n  freq,\n  fromFreq,\n  fromFreqSharps,\n  chroma,\n  transpose,\n  tr,\n  transposeBy,\n  trBy,\n  transposeFrom,\n  trFrom,\n  transposeFifths,\n  transposeOctaves,\n  trFifths,\n  simplify,\n  enharmonic\n};\nexport {\n  accidentals,\n  ascending,\n  chroma,\n  note_default as default,\n  descending,\n  enharmonic,\n  freq,\n  fromFreq,\n  fromFreqSharps,\n  fromMidi,\n  fromMidiSharps,\n  get,\n  midi,\n  name,\n  names,\n  octave,\n  pitchClass,\n  simplify,\n  sortedNames,\n  sortedUniqNames,\n  tr,\n  trBy,\n  trFifths,\n  trFrom,\n  transpose,\n  transposeBy,\n  transposeFifths,\n  transposeFrom,\n  transposeOctaves\n};\n//# sourceMappingURL=index.mjs.map","import {\n  IntervalName,\n  Named,\n  Note,\n  note as props,\n  NoteLiteral,\n  NoteName,\n  Pitch,\n  transpose as _tr,\n} from \"@tonaljs/core\";\nimport { freqToMidi, midiToNoteName } from \"@tonaljs/midi\";\n\nconst NAMES = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\n\nconst toName = (n: Named) => n.name;\nconst onlyNotes = (array: any[]) =>\n  array.map(props).filter((n) => !n.empty) as Note[];\n\n/**\n * Return the natural note names without octave\n * @function\n * @example\n * Note.names(); // => [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"]\n */\nexport function names(array?: any[]): string[] {\n  if (array === undefined) {\n    return NAMES.slice();\n  } else if (!Array.isArray(array)) {\n    return [];\n  } else {\n    return onlyNotes(array).map(toName);\n  }\n}\n\n/**\n * Get a note from a note name\n *\n * @function\n * @example\n * Note.get('Bb4') // => { name: \"Bb4\", midi: 70, chroma: 10, ... }\n */\nexport const get = props;\n\n/**\n * Get the note name\n * @function\n */\nexport const name = (note: NoteLiteral) => get(note).name;\n\n/**\n * Get the note pitch class name\n * @function\n */\nexport const pitchClass = (note: NoteLiteral) => get(note).pc;\n\n/**\n * Get the note accidentals\n * @function\n */\nexport const accidentals = (note: NoteLiteral) => get(note).acc;\n\n/**\n * Get the note octave\n * @function\n */\nexport const octave = (note: NoteLiteral) => get(note).oct;\n\n/**\n * Get the note midi\n * @function\n */\nexport const midi = (note: NoteLiteral) => get(note).midi;\n\n/**\n * Get the note midi\n * @function\n */\nexport const freq = (note: NoteLiteral) => get(note).freq;\n\n/**\n * Get the note chroma\n * @function\n */\nexport const chroma = (note: NoteLiteral) => get(note).chroma;\n\n/**\n * Given a midi number, returns a note name. Uses flats for altered notes.\n *\n * @function\n * @param {number} midi - the midi note number\n * @return {string} the note name\n * @example\n * Note.fromMidi(61) // => \"Db4\"\n * Note.fromMidi(61.7) // => \"D4\"\n */\nexport function fromMidi(midi: number) {\n  return midiToNoteName(midi);\n}\n\n/**\n * Given a midi number, returns a note name. Uses flats for altered notes.\n */\nexport function fromFreq(freq: number) {\n  return midiToNoteName(freqToMidi(freq));\n}\n/**\n * Given a midi number, returns a note name. Uses flats for altered notes.\n */\nexport function fromFreqSharps(freq: number) {\n  return midiToNoteName(freqToMidi(freq), { sharps: true });\n}\n\n/**\n * Given a midi number, returns a note name. Uses flats for altered notes.\n *\n * @function\n * @param {number} midi - the midi note number\n * @return {string} the note name\n * @example\n * Note.fromMidiSharps(61) // => \"C#4\"\n */\n\nexport function fromMidiSharps(midi: number) {\n  return midiToNoteName(midi, { sharps: true });\n}\n\n/**\n * Transpose a note by an interval\n */\nexport const transpose = _tr;\nexport const tr = _tr;\n\n/**\n * Transpose by an interval.\n * @function\n * @param {string} interval\n * @return {function} a function that transposes by the given interval\n * @example\n * [\"C\", \"D\", \"E\"].map(Note.transposeBy(\"5P\"));\n * // => [\"G\", \"A\", \"B\"]\n */\nexport const transposeBy = (interval: IntervalName) => (note: NoteName) =>\n  transpose(note, interval);\nexport const trBy = transposeBy;\n\n/**\n * Transpose from a note\n * @function\n * @param {string} note\n * @return {function}  a function that transposes the the note by an interval\n * [\"1P\", \"3M\", \"5P\"].map(Note.transposeFrom(\"C\"));\n * // => [\"C\", \"E\", \"G\"]\n */\nexport const transposeFrom = (note: NoteName) => (interval: IntervalName) =>\n  transpose(note, interval);\nexport const trFrom = transposeFrom;\n\n/**\n * Transpose a note by a number of perfect fifths.\n *\n * @function\n * @param {string} note - the note name\n * @param {number} fifhts - the number of fifths\n * @return {string} the transposed note name\n *\n * @example\n * import { transposeFifths } from \"@tonaljs/note\"\n * transposeFifths(\"G4\", 1) // => \"D\"\n * [0, 1, 2, 3, 4].map(fifths => transposeFifths(\"C\", fifths)) // => [\"C\", \"G\", \"D\", \"A\", \"E\"]\n */\nexport function transposeFifths(noteName: NoteName, fifths: number): NoteName {\n  return transpose(noteName, [fifths, 0]);\n}\nexport const trFifths = transposeFifths;\n\n// TODO: documentation\nexport function transposeOctaves(\n  noteName: NoteName,\n  octaves: number\n): NoteName {\n  return transpose(noteName, [0, octaves]);\n}\n\nexport type NoteComparator = (a: Note, b: Note) => number;\n\nexport const ascending: NoteComparator = (a, b) => a.height - b.height;\nexport const descending: NoteComparator = (a, b) => b.height - a.height;\n\nexport function sortedNames(\n  notes: any[],\n  comparator?: NoteComparator\n): string[] {\n  comparator = comparator || ascending;\n  return onlyNotes(notes).sort(comparator).map(toName);\n}\n\nexport function sortedUniqNames(notes: any[]): string[] {\n  return sortedNames(notes, ascending).filter(\n    (n, i, a) => i === 0 || n !== a[i - 1]\n  );\n}\n\n/**\n * Simplify a note\n *\n * @function\n * @param {string} note - the note to be simplified\n * - sameAccType: default true. Use same kind of accidentals that source\n * @return {string} the simplified note or '' if not valid note\n * @example\n * simplify(\"C##\") // => \"D\"\n * simplify(\"C###\") // => \"D#\"\n * simplify(\"C###\")\n * simplify(\"B#4\") // => \"C5\"\n */\nexport const simplify = (noteName: NoteName | Pitch): string => {\n  const note = get(noteName);\n  if (note.empty) {\n    return \"\";\n  }\n  return midiToNoteName(note.midi || note.chroma, {\n    sharps: note.alt > 0,\n    pitchClass: note.midi === null,\n  });\n};\n/**\n * Get enharmonic of a note\n *\n * @function\n * @param {string} note\n * @param [string] - [optional] Destination pitch class\n * @return {string} the enharmonic note name or '' if not valid note\n * @example\n * Note.enharmonic(\"Db\") // => \"C#\"\n * Note.enharmonic(\"C\") // => \"C\"\n * Note.enharmonic(\"F2\",\"E#\") // => \"E#2\"\n */\nexport function enharmonic(noteName: string, destName?: string) {\n  const src = get(noteName);\n  if (src.empty) {\n    return \"\";\n  }\n\n  // destination: use given or generate one\n  const dest = get(\n    destName ||\n      midiToNoteName(src.midi || src.chroma, {\n        sharps: src.alt < 0,\n        pitchClass: true,\n      })\n  );\n\n  // ensure destination is valid\n  if (dest.empty || dest.chroma !== src.chroma) {\n    return \"\";\n  }\n\n  // if src has no octave, no need to calculate anything else\n  if (src.oct === undefined) {\n    return dest.pc;\n  }\n\n  // detect any octave overflow\n  const srcChroma = src.chroma - src.alt;\n  const destChroma = dest.chroma - dest.alt;\n  const destOctOffset =\n    srcChroma > 11 || destChroma < 0\n      ? -1\n      : srcChroma < 0 || destChroma > 11\n      ? +1\n      : 0;\n  // calculate the new octave\n  const destOct = src.oct + destOctOffset;\n  return dest.pc + destOct;\n}\n\nexport default {\n  names,\n  get,\n  name,\n  pitchClass,\n  accidentals,\n  octave,\n  midi,\n  ascending,\n  descending,\n  sortedNames,\n  sortedUniqNames,\n  fromMidi,\n  fromMidiSharps,\n  freq,\n  fromFreq,\n  fromFreqSharps,\n  chroma,\n  transpose,\n  tr,\n  transposeBy,\n  trBy,\n  transposeFrom,\n  trFrom,\n  transposeFifths,\n  transposeOctaves,\n  trFifths,\n  simplify,\n  enharmonic,\n};\n","// index.ts\nimport { note as props } from \"@tonaljs/core\";\nfunction isMidi(arg) {\n  return +arg >= 0 && +arg <= 127;\n}\nfunction toMidi(note) {\n  if (isMidi(note)) {\n    return +note;\n  }\n  const n = props(note);\n  return n.empty ? null : n.midi;\n}\nfunction midiToFreq(midi, tuning = 440) {\n  return Math.pow(2, (midi - 69) / 12) * tuning;\n}\nvar L2 = Math.log(2);\nvar L440 = Math.log(440);\nfunction freqToMidi(freq) {\n  const v = 12 * (Math.log(freq) - L440) / L2 + 69;\n  return Math.round(v * 100) / 100;\n}\nvar SHARPS = \"C C# D D# E F F# G G# A A# B\".split(\" \");\nvar FLATS = \"C Db D Eb E F Gb G Ab A Bb B\".split(\" \");\nfunction midiToNoteName(midi, options = {}) {\n  if (isNaN(midi) || midi === -Infinity || midi === Infinity)\n    return \"\";\n  midi = Math.round(midi);\n  const pcs = options.sharps === true ? SHARPS : FLATS;\n  const pc = pcs[midi % 12];\n  if (options.pitchClass) {\n    return pc;\n  }\n  const o = Math.floor(midi / 12) - 1;\n  return pc + o;\n}\nfunction chroma(midi) {\n  return midi % 12;\n}\nfunction pcsetFromChroma(chroma2) {\n  return chroma2.split(\"\").reduce((pcset2, val, index) => {\n    if (index < 12 && val === \"1\")\n      pcset2.push(index);\n    return pcset2;\n  }, []);\n}\nfunction pcsetFromMidi(midi) {\n  return midi.map(chroma).sort((a, b) => a - b).filter((n, i, a) => i === 0 || n !== a[i - 1]);\n}\nfunction pcset(notes) {\n  return Array.isArray(notes) ? pcsetFromMidi(notes) : pcsetFromChroma(notes);\n}\nfunction pcsetNearest(notes) {\n  const set = pcset(notes);\n  return (midi) => {\n    const ch = chroma(midi);\n    for (let i = 0; i < 12; i++) {\n      if (set.includes(ch + i))\n        return midi + i;\n      if (set.includes(ch - i))\n        return midi - i;\n    }\n    return void 0;\n  };\n}\nfunction pcsetSteps(notes, tonic) {\n  const set = pcset(notes);\n  const len = set.length;\n  return (step) => {\n    const index = step < 0 ? (len - -step % len) % len : step % len;\n    const octaves = Math.floor(step / len);\n    return set[index] + octaves * 12 + tonic;\n  };\n}\nfunction pcsetDegrees(notes, tonic) {\n  const steps = pcsetSteps(notes, tonic);\n  return (degree) => {\n    if (degree === 0)\n      return void 0;\n    return steps(degree > 0 ? degree - 1 : degree);\n  };\n}\nvar midi_default = {\n  chroma,\n  freqToMidi,\n  isMidi,\n  midiToFreq,\n  midiToNoteName,\n  pcsetNearest,\n  pcset,\n  pcsetDegrees,\n  pcsetSteps,\n  toMidi\n};\nexport {\n  chroma,\n  midi_default as default,\n  freqToMidi,\n  isMidi,\n  midiToFreq,\n  midiToNoteName,\n  pcset,\n  pcsetDegrees,\n  pcsetNearest,\n  pcsetSteps,\n  toMidi\n};\n//# sourceMappingURL=index.mjs.map","import { note as props, NoteName } from \"@tonaljs/core\";\n\ntype Midi = number;\n\nexport function isMidi(arg: any): arg is Midi {\n  return +arg >= 0 && +arg <= 127;\n}\n\n/**\n * Get the note midi number (a number between 0 and 127)\n *\n * It returns undefined if not valid note name\n *\n * @function\n * @param {string|number} note - the note name or midi number\n * @return {Integer} the midi number or undefined if not valid note\n * @example\n * import { toMidi } from '@tonaljs/midi'\n * toMidi(\"C4\") // => 60\n * toMidi(60) // => 60\n * toMidi('60') // => 60\n */\nexport function toMidi(note: NoteName | number): number | null {\n  if (isMidi(note)) {\n    return +note;\n  }\n  const n = props(note);\n  return n.empty ? null : n.midi;\n}\n\n/**\n * Get the frequency in hertzs from midi number\n *\n * @param {number} midi - the note midi number\n * @param {number} [tuning = 440] - A4 tuning frequency in Hz (440 by default)\n * @return {number} the frequency or null if not valid note midi\n * @example\n * import { midiToFreq} from '@tonaljs/midi'\n * midiToFreq(69) // => 440\n */\nexport function midiToFreq(midi: number, tuning = 440): number {\n  return Math.pow(2, (midi - 69) / 12) * tuning;\n}\n\nconst L2 = Math.log(2);\nconst L440 = Math.log(440);\n\n/**\n * Get the midi number from a frequency in hertz. The midi number can\n * contain decimals (with two digits precision)\n *\n * @param {number} frequency\n * @return {number}\n * @example\n * import { freqToMidi} from '@tonaljs/midi'\n * freqToMidi(220)); //=> 57\n * freqToMidi(261.62)); //=> 60\n * freqToMidi(261)); //=> 59.96\n */\nexport function freqToMidi(freq: number): number {\n  const v = (12 * (Math.log(freq) - L440)) / L2 + 69;\n  return Math.round(v * 100) / 100;\n}\n\nexport interface ToNoteNameOptions {\n  pitchClass?: boolean;\n  sharps?: boolean;\n}\n\nconst SHARPS = \"C C# D D# E F F# G G# A A# B\".split(\" \");\nconst FLATS = \"C Db D Eb E F Gb G Ab A Bb B\".split(\" \");\n/**\n * Given a midi number, returns a note name. The altered notes will have\n * flats unless explicitly set with the optional `useSharps` parameter.\n *\n * @function\n * @param {number} midi - the midi note number\n * @param {Object} options = default: `{ sharps: false, pitchClass: false }`\n * @param {boolean} useSharps - (Optional) set to true to use sharps instead of flats\n * @return {string} the note name\n * @example\n * import { midiToNoteName } from '@tonaljs/midi'\n * midiToNoteName(61) // => \"Db4\"\n * midiToNoteName(61, { pitchClass: true }) // => \"Db\"\n * midiToNoteName(61, { sharps: true }) // => \"C#4\"\n * midiToNoteName(61, { pitchClass: true, sharps: true }) // => \"C#\"\n * // it rounds to nearest note\n * midiToNoteName(61.7) // => \"D4\"\n */\nexport function midiToNoteName(midi: number, options: ToNoteNameOptions = {}) {\n  if (isNaN(midi) || midi === -Infinity || midi === Infinity) return \"\";\n  midi = Math.round(midi);\n  const pcs = options.sharps === true ? SHARPS : FLATS;\n  const pc = pcs[midi % 12];\n  if (options.pitchClass) {\n    return pc;\n  }\n  const o = Math.floor(midi / 12) - 1;\n  return pc + o;\n}\n\nexport function chroma(midi: number): number {\n  return midi % 12;\n}\n\nfunction pcsetFromChroma(chroma: string): number[] {\n  return chroma.split(\"\").reduce((pcset, val, index) => {\n    if (index < 12 && val === \"1\") pcset.push(index);\n    return pcset;\n  }, [] as number[]);\n}\n\nfunction pcsetFromMidi(midi: number[]): number[] {\n  return midi\n    .map(chroma)\n    .sort((a, b) => a - b)\n    .filter((n, i, a) => i === 0 || n !== a[i - 1]);\n}\n\n/**\n * Given a list of midi numbers, returns the pitch class set (unique chroma numbers)\n * @param midi\n * @example\n *\n */\nexport function pcset(notes: number[] | string): number[] {\n  return Array.isArray(notes) ? pcsetFromMidi(notes) : pcsetFromChroma(notes);\n}\n\nexport function pcsetNearest(notes: number[] | string) {\n  const set = pcset(notes);\n  return (midi: number): number | undefined => {\n    const ch = chroma(midi);\n    for (let i = 0; i < 12; i++) {\n      if (set.includes(ch + i)) return midi + i;\n      if (set.includes(ch - i)) return midi - i;\n    }\n    return undefined;\n  };\n}\n\nexport function pcsetSteps(notes: number[] | string, tonic: number) {\n  const set = pcset(notes);\n  const len = set.length;\n  return (step: number): number => {\n    const index = step < 0 ? (len - (-step % len)) % len : step % len;\n    const octaves = Math.floor(step / len);\n    return set[index] + octaves * 12 + tonic;\n  };\n}\n\nexport function pcsetDegrees(notes: number[] | string, tonic: number) {\n  const steps = pcsetSteps(notes, tonic);\n  return (degree: number): number | undefined => {\n    if (degree === 0) return undefined;\n    return steps(degree > 0 ? degree - 1 : degree);\n  };\n}\n\nexport default {\n  chroma,\n  freqToMidi,\n  isMidi,\n  midiToFreq,\n  midiToNoteName,\n  pcsetNearest,\n  pcset,\n  pcsetDegrees,\n  pcsetSteps,\n  toMidi,\n};\n","// index.ts\nimport {\n  accToAlt,\n  altToAcc,\n  deprecate,\n  interval,\n  isNamed,\n  isPitch\n} from \"@tonaljs/core\";\nvar NoRomanNumeral = { empty: true, name: \"\", chordType: \"\" };\nvar cache = {};\nfunction get(src) {\n  return typeof src === \"string\" ? cache[src] || (cache[src] = parse(src)) : typeof src === \"number\" ? get(NAMES[src] || \"\") : isPitch(src) ? fromPitch(src) : isNamed(src) ? get(src.name) : NoRomanNumeral;\n}\nvar romanNumeral = deprecate(\n  \"RomanNumeral.romanNumeral\",\n  \"RomanNumeral.get\",\n  get\n);\nfunction names(major = true) {\n  return (major ? NAMES : NAMES_MINOR).slice();\n}\nfunction fromPitch(pitch) {\n  return get(altToAcc(pitch.alt) + NAMES[pitch.step]);\n}\nvar REGEX = /^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;\nfunction tokenize(str) {\n  return REGEX.exec(str) || [\"\", \"\", \"\", \"\"];\n}\nvar ROMANS = \"I II III IV V VI VII\";\nvar NAMES = ROMANS.split(\" \");\nvar NAMES_MINOR = ROMANS.toLowerCase().split(\" \");\nfunction parse(src) {\n  const [name, acc, roman, chordType] = tokenize(src);\n  if (!roman) {\n    return NoRomanNumeral;\n  }\n  const upperRoman = roman.toUpperCase();\n  const step = NAMES.indexOf(upperRoman);\n  const alt = accToAlt(acc);\n  const dir = 1;\n  return {\n    empty: false,\n    name,\n    roman,\n    interval: interval({ step, alt, dir }).name,\n    acc,\n    chordType,\n    alt,\n    step,\n    major: roman === upperRoman,\n    oct: 0,\n    dir\n  };\n}\nvar roman_numeral_default = {\n  names,\n  get,\n  romanNumeral\n};\nexport {\n  roman_numeral_default as default,\n  get,\n  names,\n  tokenize\n};\n//# sourceMappingURL=index.mjs.map","import {\n  accToAlt,\n  altToAcc,\n  deprecate,\n  interval,\n  isNamed,\n  isPitch,\n  Named,\n  Pitch,\n} from \"@tonaljs/core\";\n\nexport interface RomanNumeral extends Pitch, Named {\n  readonly empty: boolean;\n  readonly roman: string;\n  readonly interval: string;\n  readonly acc: string;\n  readonly chordType: string;\n  readonly major: boolean;\n  readonly dir: 1;\n}\n\nexport interface NoRomanNumeral extends Partial<RomanNumeral> {\n  readonly empty: true;\n  readonly name: \"\";\n  readonly chordType: \"\";\n}\nconst NoRomanNumeral: NoRomanNumeral = { empty: true, name: \"\", chordType: \"\" };\n\nconst cache: Record<string, RomanNumeral | NoRomanNumeral> = {};\n\n/**\n * Get properties of a roman numeral string\n *\n * @function\n * @param {string} - the roman numeral string (can have type, like: Imaj7)\n * @return {Object} - the roman numeral properties\n * @param {string} name - the roman numeral (tonic)\n * @param {string} type - the chord type\n * @param {string} num - the number (1 = I, 2 = II...)\n * @param {boolean} major - major or not\n *\n * @example\n * romanNumeral(\"VIIb5\") // => { name: \"VII\", type: \"b5\", num: 7, major: true }\n */\nexport function get(src: any): RomanNumeral | NoRomanNumeral {\n  return typeof src === \"string\"\n    ? cache[src] || (cache[src] = parse(src))\n    : typeof src === \"number\"\n    ? get(NAMES[src] || \"\")\n    : isPitch(src)\n    ? fromPitch(src)\n    : isNamed(src)\n    ? get(src.name)\n    : NoRomanNumeral;\n}\n\nconst romanNumeral = deprecate(\n  \"RomanNumeral.romanNumeral\",\n  \"RomanNumeral.get\",\n  get\n);\n\n/**\n * Get roman numeral names\n *\n * @function\n * @param {boolean} [isMajor=true]\n * @return {Array<String>}\n *\n * @example\n * names() // => [\"I\", \"II\", \"III\", \"IV\", \"V\", \"VI\", \"VII\"]\n */\nexport function names(major = true) {\n  return (major ? NAMES : NAMES_MINOR).slice();\n}\n\nfunction fromPitch(pitch: Pitch): RomanNumeral | NoRomanNumeral {\n  return get(altToAcc(pitch.alt) + NAMES[pitch.step]);\n}\n\nconst REGEX =\n  /^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;\n\n// [name, accidentals, romanNumeral, chordType]\ntype RomanNumeralTokens = [string, string, string, string];\nexport function tokenize(str: string): RomanNumeralTokens {\n  return (REGEX.exec(str) || [\"\", \"\", \"\", \"\"]) as RomanNumeralTokens;\n}\n\nconst ROMANS = \"I II III IV V VI VII\";\nconst NAMES = ROMANS.split(\" \");\nconst NAMES_MINOR = ROMANS.toLowerCase().split(\" \");\n\nfunction parse(src: string): RomanNumeral | NoRomanNumeral {\n  const [name, acc, roman, chordType] = tokenize(src);\n  if (!roman) {\n    return NoRomanNumeral;\n  }\n\n  const upperRoman = roman.toUpperCase();\n  const step = NAMES.indexOf(upperRoman);\n  const alt = accToAlt(acc);\n  const dir = 1;\n  return {\n    empty: false,\n    name,\n    roman,\n    interval: interval({ step, alt, dir }).name,\n    acc,\n    chordType,\n    alt,\n    step,\n    major: roman === upperRoman,\n    oct: 0,\n    dir,\n  };\n}\n\nexport default {\n  names,\n  get,\n  // deprecated\n  romanNumeral,\n};\n","// index.ts\nimport { rotate } from \"@tonaljs/collection\";\nimport { deprecate, transpose } from \"@tonaljs/core\";\nimport { simplify, transposeFifths } from \"@tonaljs/interval\";\nimport { EmptyPcset } from \"@tonaljs/pcset\";\nimport { get as getType } from \"@tonaljs/scale-type\";\nvar MODES = [\n  [0, 2773, 0, \"ionian\", \"\", \"Maj7\", \"major\"],\n  [1, 2902, 2, \"dorian\", \"m\", \"m7\"],\n  [2, 3418, 4, \"phrygian\", \"m\", \"m7\"],\n  [3, 2741, -1, \"lydian\", \"\", \"Maj7\"],\n  [4, 2774, 1, \"mixolydian\", \"\", \"7\"],\n  [5, 2906, 3, \"aeolian\", \"m\", \"m7\", \"minor\"],\n  [6, 3434, 5, \"locrian\", \"dim\", \"m7b5\"]\n];\nvar NoMode = {\n  ...EmptyPcset,\n  name: \"\",\n  alt: 0,\n  modeNum: NaN,\n  triad: \"\",\n  seventh: \"\",\n  aliases: []\n};\nvar modes = MODES.map(toMode);\nvar index = {};\nmodes.forEach((mode2) => {\n  index[mode2.name] = mode2;\n  mode2.aliases.forEach((alias) => {\n    index[alias] = mode2;\n  });\n});\nfunction get(name) {\n  return typeof name === \"string\" ? index[name.toLowerCase()] || NoMode : name && name.name ? get(name.name) : NoMode;\n}\nvar mode = deprecate(\"Mode.mode\", \"Mode.get\", get);\nfunction all() {\n  return modes.slice();\n}\nvar entries = deprecate(\"Mode.mode\", \"Mode.all\", all);\nfunction names() {\n  return modes.map((mode2) => mode2.name);\n}\nfunction toMode(mode2) {\n  const [modeNum, setNum, alt, name, triad, seventh, alias] = mode2;\n  const aliases = alias ? [alias] : [];\n  const chroma = Number(setNum).toString(2);\n  const intervals = getType(name).intervals;\n  return {\n    empty: false,\n    intervals,\n    modeNum,\n    chroma,\n    normalized: chroma,\n    name,\n    setNum,\n    alt,\n    triad,\n    seventh,\n    aliases\n  };\n}\nfunction notes(modeName, tonic) {\n  return get(modeName).intervals.map((ivl) => transpose(tonic, ivl));\n}\nfunction chords(chords2) {\n  return (modeName, tonic) => {\n    const mode2 = get(modeName);\n    if (mode2.empty)\n      return [];\n    const triads2 = rotate(mode2.modeNum, chords2);\n    const tonics = mode2.intervals.map((i) => transpose(tonic, i));\n    return triads2.map((triad, i) => tonics[i] + triad);\n  };\n}\nvar triads = chords(MODES.map((x) => x[4]));\nvar seventhChords = chords(MODES.map((x) => x[5]));\nfunction distance(destination, source) {\n  const from = get(source);\n  const to = get(destination);\n  if (from.empty || to.empty)\n    return \"\";\n  return simplify(transposeFifths(\"1P\", to.alt - from.alt));\n}\nfunction relativeTonic(destination, source, tonic) {\n  return transpose(tonic, distance(destination, source));\n}\nvar mode_default = {\n  get,\n  names,\n  all,\n  distance,\n  relativeTonic,\n  notes,\n  triads,\n  seventhChords,\n  entries,\n  mode\n};\nexport {\n  all,\n  mode_default as default,\n  distance,\n  entries,\n  get,\n  mode,\n  names,\n  notes,\n  relativeTonic,\n  seventhChords,\n  triads\n};\n//# sourceMappingURL=index.mjs.map","import { rotate } from \"@tonaljs/collection\";\nimport { deprecate, Named, NoteName, transpose } from \"@tonaljs/core\";\nimport { simplify, transposeFifths } from \"@tonaljs/interval\";\nimport { EmptyPcset, Pcset } from \"@tonaljs/pcset\";\nimport { get as getType } from \"@tonaljs/scale-type\";\n\nconst MODES = [\n  [0, 2773, 0, \"ionian\", \"\", \"Maj7\", \"major\"],\n  [1, 2902, 2, \"dorian\", \"m\", \"m7\"],\n  [2, 3418, 4, \"phrygian\", \"m\", \"m7\"],\n  [3, 2741, -1, \"lydian\", \"\", \"Maj7\"],\n  [4, 2774, 1, \"mixolydian\", \"\", \"7\"],\n  [5, 2906, 3, \"aeolian\", \"m\", \"m7\", \"minor\"],\n  [6, 3434, 5, \"locrian\", \"dim\", \"m7b5\"],\n] as const;\n\ntype ModeDatum = typeof MODES[number];\n\nexport interface Mode extends Pcset {\n  readonly name: string;\n  readonly modeNum: number;\n  readonly alt: number; // number of alterations === number of fiths\n  readonly triad: string;\n  readonly seventh: string;\n  readonly aliases: string[];\n}\n\nconst NoMode: Mode = {\n  ...EmptyPcset,\n  name: \"\",\n  alt: 0,\n  modeNum: NaN,\n  triad: \"\",\n  seventh: \"\",\n  aliases: [],\n};\n\nconst modes: Mode[] = MODES.map(toMode);\nconst index: Record<string, Mode> = {};\nmodes.forEach((mode) => {\n  index[mode.name] = mode;\n  mode.aliases.forEach((alias) => {\n    index[alias] = mode;\n  });\n});\n\ntype ModeLiteral = string | Named;\n\n/**\n * Get a Mode by it's name\n *\n * @example\n * get('dorian')\n * // =>\n * // {\n * //   intervals: [ '1P', '2M', '3m', '4P', '5P', '6M', '7m' ],\n * //   modeNum: 1,\n * //   chroma: '101101010110',\n * //   normalized: '101101010110',\n * //   name: 'dorian',\n * //   setNum: 2902,\n * //   alt: 2,\n * //   triad: 'm',\n * //   seventh: 'm7',\n * //   aliases: []\n * // }\n */\nexport function get(name: ModeLiteral): Mode {\n  return typeof name === \"string\"\n    ? index[name.toLowerCase()] || NoMode\n    : name && name.name\n    ? get(name.name)\n    : NoMode;\n}\n\nexport const mode = deprecate(\"Mode.mode\", \"Mode.get\", get);\n\n/**\n * Get a list of all modes\n */\nexport function all() {\n  return modes.slice();\n}\nexport const entries = deprecate(\"Mode.mode\", \"Mode.all\", all);\n\n/**\n * Get a list of all mode names\n */\nexport function names() {\n  return modes.map((mode) => mode.name);\n}\n\nfunction toMode(mode: ModeDatum): Mode {\n  const [modeNum, setNum, alt, name, triad, seventh, alias] = mode;\n  const aliases = alias ? [alias] : [];\n  const chroma = Number(setNum).toString(2);\n  const intervals = getType(name).intervals;\n  return {\n    empty: false,\n    intervals,\n    modeNum,\n    chroma,\n    normalized: chroma,\n    name,\n    setNum,\n    alt,\n    triad,\n    seventh,\n    aliases,\n  };\n}\n\nexport function notes(modeName: ModeLiteral, tonic: NoteName) {\n  return get(modeName).intervals.map((ivl) => transpose(tonic, ivl));\n}\n\nfunction chords(chords: string[]) {\n  return (modeName: ModeLiteral, tonic: NoteName) => {\n    const mode = get(modeName);\n    if (mode.empty) return [];\n    const triads = rotate(mode.modeNum, chords);\n    const tonics = mode.intervals.map((i) => transpose(tonic, i));\n    return triads.map((triad, i) => tonics[i] + triad);\n  };\n}\n\nexport const triads = chords(MODES.map((x) => x[4]));\nexport const seventhChords = chords(MODES.map((x) => x[5]));\n\nexport function distance(destination: ModeLiteral, source: ModeLiteral) {\n  const from = get(source);\n  const to = get(destination);\n  if (from.empty || to.empty) return \"\";\n  return simplify(transposeFifths(\"1P\", to.alt - from.alt));\n}\n\nexport function relativeTonic(\n  destination: ModeLiteral,\n  source: ModeLiteral,\n  tonic: NoteName\n) {\n  return transpose(tonic, distance(destination, source));\n}\n\nexport default {\n  get,\n  names,\n  all,\n  distance,\n  relativeTonic,\n  notes,\n  triads,\n  seventhChords,\n  // deprecated\n  entries,\n  mode,\n};\n","// index.ts\nimport { tokenize } from \"@tonaljs/chord\";\nimport { distance, interval, transpose } from \"@tonaljs/core\";\nimport { get as romanNumeral } from \"@tonaljs/roman-numeral\";\nfunction fromRomanNumerals(tonic, chords) {\n  const romanNumerals = chords.map(romanNumeral);\n  return romanNumerals.map(\n    (rn) => transpose(tonic, interval(rn)) + rn.chordType\n  );\n}\nfunction toRomanNumerals(tonic, chords) {\n  return chords.map((chord) => {\n    const [note, chordType] = tokenize(chord);\n    const intervalName = distance(tonic, note);\n    const roman = romanNumeral(interval(intervalName));\n    return roman.name + chordType;\n  });\n}\nvar progression_default = { fromRomanNumerals, toRomanNumerals };\nexport {\n  progression_default as default,\n  fromRomanNumerals,\n  toRomanNumerals\n};\n//# sourceMappingURL=index.mjs.map","import { tokenize } from \"@tonaljs/chord\";\nimport { distance, interval, NoteLiteral, transpose } from \"@tonaljs/core\";\nimport { get as romanNumeral } from \"@tonaljs/roman-numeral\";\n\n/**\n * Given a tonic and a chord list expressed with roman numeral notation\n * returns the progression expressed with leadsheet chords symbols notation\n * @example\n * fromRomanNumerals(\"C\", [\"I\", \"IIm7\", \"V7\"]);\n * // => [\"C\", \"Dm7\", \"G7\"]\n */\nexport function fromRomanNumerals(\n  tonic: NoteLiteral,\n  chords: string[]\n): string[] {\n  const romanNumerals = chords.map(romanNumeral);\n  return romanNumerals.map(\n    (rn) => transpose(tonic, interval(rn)) + rn.chordType\n  );\n}\n\n/**\n * Given a tonic and a chord list with leadsheet symbols notation,\n * return the chord list with roman numeral notation\n * @example\n * toRomanNumerals(\"C\", [\"CMaj7\", \"Dm7\", \"G7\"]);\n * // => [\"IMaj7\", \"IIm7\", \"V7\"]\n */\nexport function toRomanNumerals(\n  tonic: NoteLiteral,\n  chords: string[]\n): string[] {\n  return chords.map((chord) => {\n    const [note, chordType] = tokenize(chord);\n    const intervalName = distance(tonic, note);\n    const roman = romanNumeral(interval(intervalName));\n    return roman.name + chordType;\n  });\n}\n\nexport default { fromRomanNumerals, toRomanNumerals };\n","// index.ts\nimport { compact, range } from \"@tonaljs/collection\";\nimport { midiToNoteName, toMidi } from \"@tonaljs/midi\";\nfunction numeric(notes) {\n  const midi = compact(\n    notes.map((note) => typeof note === \"number\" ? note : toMidi(note))\n  );\n  if (!notes.length || midi.length !== notes.length) {\n    return [];\n  }\n  return midi.reduce(\n    (result, note) => {\n      const last = result[result.length - 1];\n      return result.concat(range(last, note).slice(1));\n    },\n    [midi[0]]\n  );\n}\nfunction chromatic(notes, options) {\n  return numeric(notes).map((midi) => midiToNoteName(midi, options));\n}\nvar range_default = { numeric, chromatic };\nexport {\n  chromatic,\n  range_default as default,\n  numeric\n};\n//# sourceMappingURL=index.mjs.map","import { compact, range } from \"@tonaljs/collection\";\nimport { midiToNoteName, toMidi, ToNoteNameOptions } from \"@tonaljs/midi\";\n\n/**\n * Create a numeric range. You supply a list of notes or numbers and it will\n * be connected to create complex ranges.\n *\n * @param {Array} notes - the list of notes or midi numbers used\n * @return {Array} an array of numbers or empty array if not valid parameters\n *\n * @example\n * numeric([\"C5\", \"C4\"]) // => [ 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60 ]\n * // it works midi notes\n * numeric([10, 5]) // => [ 10, 9, 8, 7, 6, 5 ]\n * // complex range\n * numeric([\"C4\", \"E4\", \"Bb3\"]) // => [60, 61, 62, 63, 64, 63, 62, 61, 60, 59, 58]\n */\nexport function numeric(notes: (string | number)[]): number[] {\n  const midi: number[] = compact(\n    notes.map((note) => (typeof note === \"number\" ? note : toMidi(note)))\n  );\n  if (!notes.length || midi.length !== notes.length) {\n    // there is no valid notes\n    return [];\n  }\n\n  return midi.reduce(\n    (result, note) => {\n      const last: number = result[result.length - 1];\n      return result.concat(range(last, note).slice(1));\n    },\n    [midi[0]]\n  );\n}\n\n/**\n * Create a range of chromatic notes. The altered notes will use flats.\n *\n * @function\n * @param {Array} notes - the list of notes or midi note numbers to create a range from\n * @param {Object} options - The same as `midiToNoteName` (`{ sharps: boolean, pitchClass: boolean }`)\n * @return {Array} an array of note names\n *\n * @example\n * Range.chromatic([\"C2, \"E2\", \"D2\"]) // => [\"C2\", \"Db2\", \"D2\", \"Eb2\", \"E2\", \"Eb2\", \"D2\"]\n * // with sharps\n * Range.chromatic([\"C2\", \"C3\"], { sharps: true }) // => [ \"C2\", \"C#2\", \"D2\", \"D#2\", \"E2\", \"F2\", \"F#2\", \"G2\", \"G#2\", \"A2\", \"A#2\", \"B2\", \"C3\" ]\n */\nexport function chromatic(\n  notes: (string | number)[],\n  options?: ToNoteNameOptions\n): string[] {\n  return numeric(notes).map((midi) => midiToNoteName(midi, options));\n}\n\nexport default { numeric, chromatic };\n","// index.ts\nimport { all as chordTypes } from \"@tonaljs/chord-type\";\nimport { range as nums, rotate } from \"@tonaljs/collection\";\nimport {\n  deprecate,\n  note,\n  tonicIntervalsTransposer,\n  transpose\n} from \"@tonaljs/core\";\nimport { enharmonic, fromMidi, sortedUniqNames } from \"@tonaljs/note\";\nimport {\n  chroma,\n  isChroma,\n  isSubsetOf,\n  isSupersetOf,\n  modes\n} from \"@tonaljs/pcset\";\nimport {\n  all,\n  all as scaleTypes,\n  get as getScaleType,\n  names as scaleTypeNames\n} from \"@tonaljs/scale-type\";\nvar NoScale = {\n  empty: true,\n  name: \"\",\n  type: \"\",\n  tonic: null,\n  setNum: NaN,\n  chroma: \"\",\n  normalized: \"\",\n  aliases: [],\n  notes: [],\n  intervals: []\n};\nfunction tokenize(name) {\n  if (typeof name !== \"string\") {\n    return [\"\", \"\"];\n  }\n  const i = name.indexOf(\" \");\n  const tonic = note(name.substring(0, i));\n  if (tonic.empty) {\n    const n = note(name);\n    return n.empty ? [\"\", name] : [n.name, \"\"];\n  }\n  const type = name.substring(tonic.name.length + 1);\n  return [tonic.name, type.length ? type : \"\"];\n}\nvar names = scaleTypeNames;\nfunction get(src) {\n  const tokens = Array.isArray(src) ? src : tokenize(src);\n  const tonic = note(tokens[0]).name;\n  const st = getScaleType(tokens[1]);\n  if (st.empty) {\n    return NoScale;\n  }\n  const type = st.name;\n  const notes = tonic ? st.intervals.map((i) => transpose(tonic, i)) : [];\n  const name = tonic ? tonic + \" \" + type : type;\n  return { ...st, name, type, tonic, notes };\n}\nvar scale = deprecate(\"Scale.scale\", \"Scale.get\", get);\nfunction detect(notes, options = {}) {\n  const notesChroma = chroma(notes);\n  const tonic = note(options.tonic ?? notes[0] ?? \"\");\n  const tonicChroma = tonic.chroma;\n  if (tonicChroma === void 0) {\n    return [];\n  }\n  const pitchClasses = notesChroma.split(\"\");\n  pitchClasses[tonicChroma] = \"1\";\n  const scaleChroma = rotate(tonicChroma, pitchClasses).join(\"\");\n  const match = all().find((scaleType) => scaleType.chroma === scaleChroma);\n  const results = [];\n  if (match) {\n    results.push(tonic.name + \" \" + match.name);\n  }\n  if (options.match === \"exact\") {\n    return results;\n  }\n  extended(scaleChroma).forEach((scaleName) => {\n    results.push(tonic.name + \" \" + scaleName);\n  });\n  return results;\n}\nfunction scaleChords(name) {\n  const s = get(name);\n  const inScale = isSubsetOf(s.chroma);\n  return chordTypes().filter((chord) => inScale(chord.chroma)).map((chord) => chord.aliases[0]);\n}\nfunction extended(name) {\n  const chroma2 = isChroma(name) ? name : get(name).chroma;\n  const isSuperset = isSupersetOf(chroma2);\n  return scaleTypes().filter((scale2) => isSuperset(scale2.chroma)).map((scale2) => scale2.name);\n}\nfunction reduced(name) {\n  const isSubset = isSubsetOf(get(name).chroma);\n  return scaleTypes().filter((scale2) => isSubset(scale2.chroma)).map((scale2) => scale2.name);\n}\nfunction scaleNotes(notes) {\n  const pcset = notes.map((n) => note(n).pc).filter((x) => x);\n  const tonic = pcset[0];\n  const scale2 = sortedUniqNames(pcset);\n  return rotate(scale2.indexOf(tonic), scale2);\n}\nfunction modeNames(name) {\n  const s = get(name);\n  if (s.empty) {\n    return [];\n  }\n  const tonics = s.tonic ? s.notes : s.intervals;\n  return modes(s.chroma).map((chroma2, i) => {\n    const modeName = get(chroma2).name;\n    return modeName ? [tonics[i], modeName] : [\"\", \"\"];\n  }).filter((x) => x[0]);\n}\nfunction getNoteNameOf(scale2) {\n  const names2 = Array.isArray(scale2) ? scaleNotes(scale2) : get(scale2).notes;\n  const chromas = names2.map((name) => note(name).chroma);\n  return (noteOrMidi) => {\n    const currNote = typeof noteOrMidi === \"number\" ? note(fromMidi(noteOrMidi)) : note(noteOrMidi);\n    const height = currNote.height;\n    if (height === void 0)\n      return void 0;\n    const chroma2 = height % 12;\n    const position = chromas.indexOf(chroma2);\n    if (position === -1)\n      return void 0;\n    return enharmonic(currNote.name, names2[position]);\n  };\n}\nfunction rangeOf(scale2) {\n  const getName = getNoteNameOf(scale2);\n  return (fromNote, toNote) => {\n    const from = note(fromNote).height;\n    const to = note(toNote).height;\n    if (from === void 0 || to === void 0)\n      return [];\n    return nums(from, to).map(getName).filter((x) => x);\n  };\n}\nfunction degrees(scaleName) {\n  const { intervals, tonic } = get(scaleName);\n  const transpose2 = tonicIntervalsTransposer(intervals, tonic);\n  return (degree) => degree ? transpose2(degree > 0 ? degree - 1 : degree) : \"\";\n}\nfunction steps(scaleName) {\n  const { intervals, tonic } = get(scaleName);\n  return tonicIntervalsTransposer(intervals, tonic);\n}\nvar scale_default = {\n  degrees,\n  detect,\n  extended,\n  get,\n  modeNames,\n  names,\n  rangeOf,\n  reduced,\n  scaleChords,\n  scaleNotes,\n  steps,\n  tokenize,\n  // deprecated\n  scale\n};\nexport {\n  scale_default as default,\n  degrees,\n  detect,\n  extended,\n  get,\n  modeNames,\n  names,\n  rangeOf,\n  reduced,\n  scale,\n  scaleChords,\n  scaleNotes,\n  steps,\n  tokenize\n};\n//# sourceMappingURL=index.mjs.map","/**\n * References:\n * - https://www.researchgate.net/publication/327567188_An_Algorithm_for_Spelling_the_Pitches_of_Any_Musical_Scale\n * @module scale\n */\nimport { all as chordTypes } from \"@tonaljs/chord-type\";\nimport { range as nums, rotate } from \"@tonaljs/collection\";\nimport {\n  deprecate,\n  note,\n  NoteName,\n  tonicIntervalsTransposer,\n  transpose,\n} from \"@tonaljs/core\";\nimport { enharmonic, fromMidi, sortedUniqNames } from \"@tonaljs/note\";\nimport {\n  chroma,\n  isChroma,\n  isSubsetOf,\n  isSupersetOf,\n  modes,\n} from \"@tonaljs/pcset\";\nimport {\n  all,\n  all as scaleTypes,\n  get as getScaleType,\n  names as scaleTypeNames,\n  ScaleType,\n} from \"@tonaljs/scale-type\";\n\ntype ScaleName = string;\ntype ScaleNameTokens = [string, string]; // [TONIC, SCALE TYPE]\n\nexport interface Scale extends ScaleType {\n  tonic: string | null;\n  type: string;\n  notes: NoteName[];\n}\n\nconst NoScale: Scale = {\n  empty: true,\n  name: \"\",\n  type: \"\",\n  tonic: null,\n  setNum: NaN,\n  chroma: \"\",\n  normalized: \"\",\n  aliases: [],\n  notes: [],\n  intervals: [],\n};\n\n/**\n * Given a string with a scale name and (optionally) a tonic, split\n * that components.\n *\n * It retuns an array with the form [ name, tonic ] where tonic can be a\n * note name or null and name can be any arbitrary string\n * (this function doesn\"t check if that scale name exists)\n *\n * @function\n * @param {string} name - the scale name\n * @return {Array} an array [tonic, name]\n * @example\n * tokenize(\"C mixolydean\") // => [\"C\", \"mixolydean\"]\n * tokenize(\"anything is valid\") // => [\"\", \"anything is valid\"]\n * tokenize() // => [\"\", \"\"]\n */\nexport function tokenize(name: ScaleName): ScaleNameTokens {\n  if (typeof name !== \"string\") {\n    return [\"\", \"\"];\n  }\n  const i = name.indexOf(\" \");\n  const tonic = note(name.substring(0, i));\n  if (tonic.empty) {\n    const n = note(name);\n    return n.empty ? [\"\", name] : [n.name, \"\"];\n  }\n\n  const type = name.substring(tonic.name.length + 1);\n  return [tonic.name, type.length ? type : \"\"];\n}\n\n/**\n * Get all scale names\n * @function\n */\nexport const names = scaleTypeNames;\n\n/**\n * Get a Scale from a scale name.\n */\nexport function get(src: ScaleName | ScaleNameTokens): Scale {\n  const tokens = Array.isArray(src) ? src : tokenize(src);\n  const tonic = note(tokens[0]).name;\n  const st = getScaleType(tokens[1]);\n  if (st.empty) {\n    return NoScale;\n  }\n\n  const type = st.name;\n  const notes: string[] = tonic\n    ? st.intervals.map((i) => transpose(tonic, i))\n    : [];\n\n  const name = tonic ? tonic + \" \" + type : type;\n\n  return { ...st, name, type, tonic, notes };\n}\n\nexport const scale = deprecate(\"Scale.scale\", \"Scale.get\", get);\n\nexport function detect(\n  notes: string[],\n  options: { tonic?: string; match?: \"exact\" | \"fit\" } = {}\n): string[] {\n  const notesChroma = chroma(notes);\n  const tonic = note(options.tonic ?? notes[0] ?? \"\");\n  const tonicChroma = tonic.chroma;\n  if (tonicChroma === undefined) {\n    return [];\n  }\n\n  const pitchClasses = notesChroma.split(\"\");\n  pitchClasses[tonicChroma] = \"1\";\n  const scaleChroma = rotate(tonicChroma, pitchClasses).join(\"\");\n  const match = all().find((scaleType) => scaleType.chroma === scaleChroma);\n\n  const results: string[] = [];\n  if (match) {\n    results.push(tonic.name + \" \" + match.name);\n  }\n  if (options.match === \"exact\") {\n    return results;\n  }\n\n  extended(scaleChroma).forEach((scaleName) => {\n    results.push(tonic.name + \" \" + scaleName);\n  });\n\n  return results;\n}\n\n/**\n * Get all chords that fits a given scale\n *\n * @function\n * @param {string} name - the scale name\n * @return {Array<string>} - the chord names\n *\n * @example\n * scaleChords(\"pentatonic\") // => [\"5\", \"64\", \"M\", \"M6\", \"Madd9\", \"Msus2\"]\n */\nexport function scaleChords(name: string): string[] {\n  const s = get(name);\n  const inScale = isSubsetOf(s.chroma);\n  return chordTypes()\n    .filter((chord) => inScale(chord.chroma))\n    .map((chord) => chord.aliases[0]);\n}\n/**\n * Get all scales names that are a superset of the given one\n * (has the same notes and at least one more)\n *\n * @function\n * @param {string} name\n * @return {Array} a list of scale names\n * @example\n * extended(\"major\") // => [\"bebop\", \"bebop dominant\", \"bebop major\", \"chromatic\", \"ichikosucho\"]\n */\nexport function extended(name: string): string[] {\n  const chroma = isChroma(name) ? name : get(name).chroma;\n  const isSuperset = isSupersetOf(chroma);\n  return scaleTypes()\n    .filter((scale) => isSuperset(scale.chroma))\n    .map((scale) => scale.name);\n}\n\n/**\n * Find all scales names that are a subset of the given one\n * (has less notes but all from the given scale)\n *\n * @function\n * @param {string} name\n * @return {Array} a list of scale names\n *\n * @example\n * reduced(\"major\") // => [\"ionian pentatonic\", \"major pentatonic\", \"ritusen\"]\n */\nexport function reduced(name: string): string[] {\n  const isSubset = isSubsetOf(get(name).chroma);\n  return scaleTypes()\n    .filter((scale) => isSubset(scale.chroma))\n    .map((scale) => scale.name);\n}\n\n/**\n * Given an array of notes, return the scale: a pitch class set starting from\n * the first note of the array\n *\n * @function\n * @param {string[]} notes\n * @return {string[]} pitch classes with same tonic\n * @example\n * scaleNotes(['C4', 'c3', 'C5', 'C4', 'c4']) // => [\"C\"]\n * scaleNotes(['D4', 'c#5', 'A5', 'F#6']) // => [\"D\", \"F#\", \"A\", \"C#\"]\n */\nexport function scaleNotes(notes: NoteName[]) {\n  const pcset: string[] = notes.map((n) => note(n).pc).filter((x) => x);\n  const tonic = pcset[0];\n  const scale = sortedUniqNames(pcset);\n  return rotate(scale.indexOf(tonic), scale);\n}\n\ntype ScaleMode = [string, string];\n/**\n * Find mode names of a scale\n *\n * @function\n * @param {string} name - scale name\n * @example\n * modeNames(\"C pentatonic\") // => [\n *   [\"C\", \"major pentatonic\"],\n *   [\"D\", \"egyptian\"],\n *   [\"E\", \"malkos raga\"],\n *   [\"G\", \"ritusen\"],\n *   [\"A\", \"minor pentatonic\"]\n * ]\n */\nexport function modeNames(name: string): ScaleMode[] {\n  const s = get(name);\n  if (s.empty) {\n    return [];\n  }\n\n  const tonics = s.tonic ? s.notes : s.intervals;\n  return modes(s.chroma)\n    .map((chroma: string, i: number): ScaleMode => {\n      const modeName = get(chroma).name;\n      return modeName ? [tonics[i], modeName] : [\"\", \"\"];\n    })\n    .filter((x) => x[0]);\n}\n\nfunction getNoteNameOf(scale: string | string[]) {\n  const names = Array.isArray(scale) ? scaleNotes(scale) : get(scale).notes;\n  const chromas = names.map((name) => note(name).chroma);\n\n  return (noteOrMidi: string | number): string | undefined => {\n    const currNote =\n      typeof noteOrMidi === \"number\"\n        ? note(fromMidi(noteOrMidi))\n        : note(noteOrMidi);\n    const height = currNote.height;\n\n    if (height === undefined) return undefined;\n    const chroma = height % 12;\n    const position = chromas.indexOf(chroma);\n    if (position === -1) return undefined;\n    return enharmonic(currNote.name, names[position]);\n  };\n}\n\nexport function rangeOf(scale: string | string[]) {\n  const getName = getNoteNameOf(scale);\n  return (fromNote: string, toNote: string) => {\n    const from = note(fromNote).height;\n    const to = note(toNote).height;\n    if (from === undefined || to === undefined) return [];\n\n    return nums(from, to)\n      .map(getName)\n      .filter((x) => x);\n  };\n}\n\n/**\n * Returns a function to get a note name from the scale degree.\n *\n * @example\n * [1, 2, 3].map(Scale.degrees(\"C major\")) => [\"C\", \"D\", \"E\"]\n * [1, 2, 3].map(Scale.degrees(\"C4 major\")) => [\"C4\", \"D4\", \"E4\"]\n */\nexport function degrees(scaleName: string | ScaleNameTokens) {\n  const { intervals, tonic } = get(scaleName);\n  const transpose = tonicIntervalsTransposer(intervals, tonic);\n  return (degree: number) =>\n    degree ? transpose(degree > 0 ? degree - 1 : degree) : \"\";\n}\n\n/**\n * Sames as `degree` but with 0-based index\n */\nexport function steps(scaleName: string | ScaleNameTokens) {\n  const { intervals, tonic } = get(scaleName);\n  return tonicIntervalsTransposer(intervals, tonic);\n}\n\nexport default {\n  degrees,\n  detect,\n  extended,\n  get,\n  modeNames,\n  names,\n  rangeOf,\n  reduced,\n  scaleChords,\n  scaleNotes,\n  steps,\n  tokenize,\n\n  // deprecated\n  scale,\n};\n","// index.ts\nvar NONE = {\n  empty: true,\n  name: \"\",\n  upper: void 0,\n  lower: void 0,\n  type: void 0,\n  additive: []\n};\nvar NAMES = [\"4/4\", \"3/4\", \"2/4\", \"2/2\", \"12/8\", \"9/8\", \"6/8\", \"3/8\"];\nfunction names() {\n  return NAMES.slice();\n}\nvar REGEX = /^(\\d*\\d(?:\\+\\d)*)\\/(\\d+)$/;\nvar CACHE = /* @__PURE__ */ new Map();\nfunction get(literal) {\n  const stringifiedLiteral = JSON.stringify(literal);\n  const cached = CACHE.get(stringifiedLiteral);\n  if (cached) {\n    return cached;\n  }\n  const ts = build(parse(literal));\n  CACHE.set(stringifiedLiteral, ts);\n  return ts;\n}\nfunction parse(literal) {\n  if (typeof literal === \"string\") {\n    const [_, up2, low] = REGEX.exec(literal) || [];\n    return parse([up2, low]);\n  }\n  const [up, down] = literal;\n  const denominator = +down;\n  if (typeof up === \"number\") {\n    return [up, denominator];\n  }\n  const list = up.split(\"+\").map((n) => +n);\n  return list.length === 1 ? [list[0], denominator] : [list, denominator];\n}\nvar time_signature_default = { names, parse, get };\nvar isPowerOfTwo = (x) => Math.log(x) / Math.log(2) % 1 === 0;\nfunction build([up, down]) {\n  const upper = Array.isArray(up) ? up.reduce((a, b) => a + b, 0) : up;\n  const lower = down;\n  if (upper === 0 || lower === 0) {\n    return NONE;\n  }\n  const name = Array.isArray(up) ? `${up.join(\"+\")}/${down}` : `${up}/${down}`;\n  const additive = Array.isArray(up) ? up : [];\n  const type = lower === 4 || lower === 2 ? \"simple\" : lower === 8 && upper % 3 === 0 ? \"compound\" : isPowerOfTwo(lower) ? \"irregular\" : \"irrational\";\n  return {\n    empty: false,\n    name,\n    type,\n    upper,\n    lower,\n    additive\n  };\n}\nexport {\n  time_signature_default as default,\n  get,\n  names,\n  parse\n};\n//# sourceMappingURL=index.mjs.map","// TYPES: PARSING\nexport type TimeSignatureLiteral = string | [number, number] | [string, string];\ntype ParsedTimeSignature = [number | number[], number];\n\n// TYPES: PROPERTIES\nexport type ValidTimeSignature = {\n  readonly empty: false;\n  readonly name: string;\n  readonly upper: number | number[];\n  readonly lower: number;\n  readonly type: \"simple\" | \"compound\" | \"irregular\" | \"irrational\";\n  readonly additive: number[];\n};\n\nexport type InvalidTimeSignature = {\n  readonly empty: true;\n  readonly name: \"\";\n  readonly upper: undefined;\n  readonly lower: undefined;\n  readonly type: undefined;\n  readonly additive: [];\n};\n\nexport type TimeSignature = ValidTimeSignature | InvalidTimeSignature;\n\n// CONSTANTS\nconst NONE: InvalidTimeSignature = {\n  empty: true,\n  name: \"\",\n  upper: undefined,\n  lower: undefined,\n  type: undefined,\n  additive: [],\n};\n\nconst NAMES = [\"4/4\", \"3/4\", \"2/4\", \"2/2\", \"12/8\", \"9/8\", \"6/8\", \"3/8\"];\n\n// PUBLIC API\n\nexport function names() {\n  return NAMES.slice();\n}\n\nconst REGEX = /^(\\d*\\d(?:\\+\\d)*)\\/(\\d+)$/;\nconst CACHE = new Map<TimeSignatureLiteral, TimeSignature>();\n\nexport function get(literal: TimeSignatureLiteral): TimeSignature {\n  const stringifiedLiteral = JSON.stringify(literal);\n  const cached = CACHE.get(stringifiedLiteral);\n  if (cached) {\n    return cached;\n  }\n\n  const ts = build(parse(literal));\n  CACHE.set(stringifiedLiteral, ts);\n  return ts;\n}\n\nexport function parse(literal: TimeSignatureLiteral): ParsedTimeSignature {\n  if (typeof literal === \"string\") {\n    const [_, up, low] = REGEX.exec(literal) || [];\n    return parse([up, low]);\n  }\n\n  const [up, down] = literal;\n  const denominator = +down;\n  if (typeof up === \"number\") {\n    return [up, denominator];\n  }\n\n  const list = up.split(\"+\").map((n) => +n);\n  return list.length === 1 ? [list[0], denominator] : [list, denominator];\n}\n\nexport default { names, parse, get };\n\n// PRIVATE\n\nconst isPowerOfTwo = (x: number) => (Math.log(x) / Math.log(2)) % 1 === 0;\n\nfunction build([up, down]: ParsedTimeSignature): TimeSignature {\n  const upper = Array.isArray(up) ? up.reduce((a, b) => a + b, 0) : up;\n  const lower = down;\n  if (upper === 0 || lower === 0) {\n    return NONE;\n  }\n\n  const name = Array.isArray(up) ? `${up.join(\"+\")}/${down}` : `${up}/${down}`;\n  const additive = Array.isArray(up) ? up : [];\n  const type =\n    lower === 4 || lower === 2\n      ? \"simple\"\n      : lower === 8 && upper % 3 === 0\n      ? \"compound\"\n      : isPowerOfTwo(lower)\n      ? \"irregular\"\n      : \"irrational\";\n\n  return {\n    empty: false,\n    name,\n    type,\n    upper,\n    lower,\n    additive,\n  };\n}\n","import m from \"mithril\";\nimport { Note } from \"tonal\";\n\nimport Util from \"../Util\";\n\nexport default class Row {\n  cells: Cell[];\n\n  constructor() {\n    this.cells = new Array(7).fill().map((_, i) => new Cell(i));\n  }\n\n  compareWithAnswer(answerScale) {\n    const answerMidis = Util.toMidiArray(answerScale.notes);\n    const guessMidis = Util.toMidiArray(this.getNotes());\n\n    return Util.calculateGuess(guessMidis, answerMidis);\n  }\n\n  getNotes() {\n    const octave = 5; // Doesn't matter\n    const notes = this.cells.map((cell) => Note.get(`${cell.value}${octave}`));\n    return notes;\n  }\n\n  setValue(value: string) {\n    const cell = this.nextEmptyCell();\n    if (cell) {\n      cell.setValue(value);\n    }\n  }\n\n  displayResults(results) {\n    this.cells.forEach((cell, i) => cell.setStatus(results[i]));\n  }\n\n  clearLast() {\n    const cell = this.lastCell();\n    if (cell) {\n      cell.setValue(null);\n    }\n  }\n\n  getNextCellIndex() {\n    for (let i = 0; i < this.cells.length; i++) {\n      if (this.cells[i].isEmpty()) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  // Returns last filled cell\n  lastCell() {\n    const i = this.getNextCellIndex();\n\n    if (i === -1) {\n      // All cells filled, so return last\n      return this.cells[this.cells.length - 1];\n    }\n    else if (i === 0) {\n      // All cells empty\n      return;\n    }\n\n    return this.cells[i - 1];\n  }\n\n  nextEmptyCell() {\n    const i = this.getNextCellIndex();\n    if (i === -1) {\n      return null;\n    }\n\n    return this.cells[i];\n  }\n\n  isFilled(): boolean {\n    return !this.nextEmptyCell();\n  }\n\n  view() {\n    return m(\"div.row\", this.cells.map((box) => m(box)));\n  }\n}\n\nclass Cell {\n  value: string;\n  status: string;\n\n  // Corresponding CSS classes\n  static readonly STATUS_CLASSES = {\n    \"C\": \"correct\",\n    \"W\": \"wrong-position\",\n    \"X\": \"wrong\",\n    \" \": \"none\"\n  }\n\n  constructor(column) {\n    this.column = column; // Used for css delay\n\n    this.value = null;\n    this.status = \" \";\n\n    this.flipped = false;\n  }\n\n  setValue(value: string) {\n    this.value = value;\n  }\n\n  setStatus(status: string) {\n    this.status = status;\n\n    this.flipped = true;\n  }\n\n  isEmpty() {\n    return this.value === null;\n  }\n\n  view() {\n    return m(\"div.cell\", [\n      m(`div.delay${this.column}`, { class: this.flipped ? \"inner-flipped\" : \"inner\" }, [\n        m(\"div.front\", this.value),\n        m(\"div.back\", { class: Cell.STATUS_CLASSES[this.status] }, this.value)\n      ])\n    ]);\n  }\n}\n\n","import m from \"mithril\";\n\nimport Util from \"../Util\";\n\nexport default class GameEndContent {\n  static readonly SHARE_ICON = `<svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"20\" height=\"30\" viewBox=\"0 0 30 30\"> <path d=\"M 23 3 A 4 4 0 0 0 19 7 A 4 4 0 0 0 19.09375 7.8359375 L 10.011719 12.376953 A 4 4 0 0 0 7 11 A 4 4 0 0 0 3 15 A 4 4 0 0 0 7 19 A 4 4 0 0 0 10.013672 17.625 L 19.089844 22.164062 A 4 4 0 0 0 19 23 A 4 4 0 0 0 23 27 A 4 4 0 0 0 27 23 A 4 4 0 0 0 23 19 A 4 4 0 0 0 19.986328 20.375 L 10.910156 15.835938 A 4 4 0 0 0 11 15 A 4 4 0 0 0 10.90625 14.166016 L 19.988281 9.625 A 4 4 0 0 0 23 11 A 4 4 0 0 0 27 7 A 4 4 0 0 0 23 3 z\"></path></svg>`;\n\n  constructor(onreset, answerScaleName, shareable) {\n    this.onreset = onreset;\n    this.answerScaleName = answerScaleName;\n    this.shareable = shareable;\n  }\n\n  async onshare() {\n    await navigator.clipboard.writeText(this.shareable);\n  }\n\n  view() {\n    return [\n      m(\"h1\", Util.normalizeScaleName(this.answerScaleName)),\n      m(\"div.button\", { onclick: this.onshare.bind(this) }, [\n        m(\"span.share\", \"Share\"),\n        m.trust(GameEndContent.SHARE_ICON)\n      ]),\n      m(\"div.button\", { onclick: () => { this.onreset() } }, \"Next Scale-dle!\"),\n    ];\n  }\n}\n","import m from \"mithril\";\n\nexport default class HelpContent {\n  static readonly CONTENT = `\n  <h1>How to Play</h1>\n  <p>\n  Guess the Scale-dle in 6 tries.\n  </p>\n\n  <p>\n  Possible scale types are:\n  <a href=\"https://en.wikipedia.org/wiki/Major_scale\" target=\"_blank\">major</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Minor_scale\" target=\"_blank\">minor</a> (natural),\n  <a href=\"https://en.wikipedia.org/wiki/Harmonic_minor_scale\" target=\"_blank\">harmonic minor</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Minor_scale#Melodic_minor_scale\" target=\"_blank\">melodic minor</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Dorian_mode#Renaissance_Dorian_anchor\" target=\"_blank\">dorian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Phrygian_mode\" target=\"_blank\">phrygian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Lydian_mode\" target=\"_blank\">lydian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Mixolydian_mode\" target=\"_blank\">mixolydian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Locrian_mode\" target=\"_blank\">locrian</a>,\n  <a href=\"https://en.wikipedia.org/wiki/Pentatonic_scale#Major_pentatonic_scale\" target=\"_blank\">pentatonic</a>, and\n  <a href=\"https://en.wikipedia.org/wiki/Octatonic_scale\" target=\"_blank\">octatonic</a> (whole-half and half-whole).\n  </p>\n\n  <p>\n  In this game, all scales are 7 notes and ascending. For the octatonic scale, only the first 7 notes are used, and for the pentatonic scale, the 6th and 7th notes repeat the 1st and 2nd notes.\n  </p>\n\n  <p>\n  Scale-dle was inspired by\n  <a href=\"https://www.nytimes.com/games/wordle/\">Wordle</a>\n  and was created for the 2023 GitHub Game Off.\n  </p>\n\n  <p>\n  Check out the code on <a href=\"https://github.com/seanyeh/scaledle\">GitHub!</a>\n  </p>\n  `;\n\n  view() {\n    return m.trust(HelpContent.CONTENT);\n  }\n}\n"],"names":["modules","entry","mainEntry","parcelRequireName","globalName","globalObject","globalThis","self","window","global","previousRequire","cache","nodeRequire","module","require","bind","newRequire","name","jumped","currentRequire","err","Error","code","localRequire","resolve","x","id","Module","call","exports","res","isParcelRequire","moduleName","bundle","parent","register","Object","defineProperty","get","i","length","mainExports","define","amd","parcelHelpers","_mithril","_mithrilDefault","interopDefault","_mainPage","_mainPageDefault","default","route","document","body","hyperscript","request","mountRedraw","m","apply","arguments","trust","fragment","Fragment","mount","render","redraw","jsonp","parseQueryString","buildQueryString","parsePathname","buildPathname","vnode","PromisePolyfill","censor","Vnode","hyperscriptVnode","hasOwn","selectorParser","selectorCache","isEmpty","object","key","selector","view","children","normalizeChildren","execSelector","state","attrs","hasClass","className","class","tag","newAttrs","String","compileSelector","match","classes","exec","type","value","push","attrValue","replace","join","text","dom","domSize","undefined","events","instance","normalize","node","Array","isArray","input","isKeyed","TypeError","start","hasOwnProperty","html","Promise","prototype","finally","executor","resolvers","rejectors","resolveCurrent","handler","rejectCurrent","_instance","callAsync","setImmediate","setTimeout","list","shouldAbsorb","execute","then","executeOnce","console","error","retry","e","runs","run","fn","onerror","onFulfilled","onRejection","resolveNext","rejectNext","handle","callback","next","promise","reject","catch","reason","all","total","count","values","consume","race","requestAnimationFrame","$window","currentRedraw","currentDOM","$doc","nameSpace","svg","math","getNameSpace","xmlns","checkState","original","callHook","activeElement","createNodes","vnodes","end","hooks","nextSibling","ns","createNode","initLifecycle","createTextNode","insertNode","createHTML","createFragment","createDocumentFragment","firstChild","childNodes","createElement","is","element","createElementNS","setAttrs","setAttribute","isFileInput","setAttr","maybeSetContentEditable","setLateSelectAttrs","selectedIndex","normalized","initComponent","sentinel","create","$$reentrantLock$$","possibleParents","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","child","temp","innerHTML","appendChild","updateNodes","old","removeNodes","isOldKeyed","oldStart","map","o","v","oe","ve","topSibling","oldEnd","updateNode","getNextSibling","moveNodes","lisIndices","originalNextSibling","vnodesLength","oldIndices","li","pos","matched","getKeyMap","oldIndex","makeLisIndices","a","result","u","il","lisTemp","j","c","commonLength","removeNode","oldTag","shouldNotUpdate","onbeforeupdate","force","updateLifecycle","toString","nodeValue","removeHTML","updateFragment","updateAttrs","warn","val","removeAttr","isLifecycleMethod","updateEvent","updateStyle","hasPropertyKey","nsLastIndex","indexOf","slice","removeAttribute","updateComponent","frag","moveChildToFrag","parentNode","insertBefore","contenteditable","contentEditable","content","stateResult","attrsResult","mask","onbeforeremove","reallyRemove","onremove","removeChild","attr","setAttributeNS","uppercaseRegex","toLowerCase","capital","normalizeKey","style","cssText","setProperty","removeProperty","EventDict","_","addEventListener","removeEventListener","source","oninit","oncreate","onupdate","handleEvent","ev","currentTarget","preventDefault","stopPropagation","contains","prevRedraw","prevDOM","active","namespace","namespaceURI","textContent","focus","schedule","subscriptions","pending","offset","sync","root","component","index","splice","oncompletion","callbackCount","PromiseProxy","makeRequest","factory","url","args","params","data","background","complete","wrap","constructor","hasHeader","headers","__proto__","replacedAbort","method","toUpperCase","assumeJSON","serialize","JSON","FormData","URLSearchParams","responseType","extract","xhr","XMLHttpRequest","aborted","isTimeout","abort","open","async","user","password","setRequestHeader","deserialize","withCredentials","timeout","onreadystatechange","target","readyState","message","success","status","test","response","parse","responseText","completeErrorResponse","ontimeout","config","send","stringify","callbackName","Math","round","random","script","src","encodeURIComponent","callbackKey","documentElement","assign","template","SyntaxError","queryIndex","hashIndex","queryEnd","pathEnd","path","query","resolved","variadic","newQueryIndex","newHashIndex","newQueryEnd","newPathEnd","querystring","destructure","compileTemplate","decodeURIComponentSave","decodeURIComponent","compiled","fallbackRoute","currentPath","lastUpdate","p","scheduled","ready","currentResolver","RouterRoot","fireAsync","resolveRoute","SKIP","prefix","location","hash","search","pathname","concat","setPath","history","loop","check","payload","matchedRoute","localComp","update","comp","onmatch","options","title","replaceState","pushState","href","defaultRoute","routes","keys","defaultData","some","ReferenceError","set","Link","onclick","disabled","Boolean","defaultPrevented","button","which","ctrlKey","metaKey","shiftKey","altKey","param","str","string","charAt","entries","split","counters","levels","cursor","pop","level","nextLevel","isNumber","isNaN","parseInt","desc","getOwnPropertyDescriptor","templateData","templateKeys","regexp","RegExp","extra","k","r","magic","extras","defineInteropFlag","_controlButtons","_controlButtonsDefault","_modal","_modalDefault","_gameEndContent","_gameEndContentDefault","_helpContent","_helpContentDefault","_keyboard","_keyboardDefault","_row","_rowDefault","_util","_utilDefault","MainPage","MAX_ROWS","_1","HELP_ICON","keyboard","setValue","controlButtons","onEnter","onBackspace","scaleNumber","Number","reset","isInteger","modal","closeModal","M","rows","fill","isFinished","currentRowIndex","getRandomScaleNumber","answerScale","getScaleByNumber","modalContent","openHelpModal","openEndGameModal","getShareable","currentRow","isFilled","submitGuess","clearLast","fullResults","row","compareWithAnswer","resultsToShareable","results","displayResults","every","__esModule","exportAll","dest","forEach","enumerable","export","destName","onclose","initShapes","ctx","width","canvas","clientWidth","height","clientHeight","keyWidth","blackKeys","offsets","whiteKeys","_inBounds","px","py","y","w","h","offsetX","offsetY","findIndex","BLACK_NOTES","WHITE_NOTES","drawKeyboard","fillStyle","textAlign","fillRect","beginPath","moveTo","lineTo","stroke","font","fillText","BLACK_NOTES_FLAT","getContext","_tonal","Util","SCALE_TYPES","ROOTS","_2","_3","_4","floor","scaleType","Scale","toMidiArray","notes","noteName","Note","midi","calculateGuess","guess","rawAnswer","answer","answerMap","note","_5","EMOJI_MAP","_6","URL","resultsList","puzzleNumber","tries","resultsStr","normalizeScaleName","scaleName","newName","includes","_abcNotationDefault","_array","_chordDefault","ChordDictionary","_chordTypeDefault","_collectionDefault","_core","_durationValueDefault","_intervalDefault","_keyDefault","_midiDefault","_modeDefault","_noteDefault","PcSet","_pcsetDefault","_progressionDefault","_rangeDefault","_romanNumeralDefault","_scaleDefault","ScaleDictionary","_scaleTypeDefault","_timeSignatureDefault","Tonal","_abcNotation","_chord","_chordType","_collection","_durationValue","_interval","_key","_midi","_mode","_note","_pcset","_progression","_range","_romanNumeral","_scale","_scaleType","_timeSignature","abcToScientificNotation","abc_notation_default","distance","scientificToAbcNotation","tokenize","transpose","fillStr","character","times","REGEX","acc","letter","oct","charCodeAt","n","empty","l","note2","interval","from","to","accToAlt","altToAcc","coordToInterval","coordToNote","decode","deprecate","encode","isNamed","isPitch","stepToLetter","tokenizeInterval","tokenizeNote","tonicIntervalsTransposer","s","abs","alternative","pitch","step","alt","FIFTHS","STEPS_TO_OCTS","fifths","dir","f","FIFTHS_TO_STEPS","coord","unaltered","NoNote","pc","Map","stringSrc","cached","tokens","octStr","chroma","SEMI","mod","freq","pow","pitchName","props","noteCoord","NoInterval","REGEX2","cache2","parse2","num","q","t","TYPES","simple","semitones","SIZES","pitchName2","calcNum","d","forceDescending","isDescending","ivl","intervalName","intervalCoord","intervals","tonic","len","fromNote","toNote","fcoord","tcoord","octs","compact","permutations","arr","reduce","perm","newPerm","range","rotate","shuffle","sortedNoteNames","sortedUniqNoteNames","ascR","b","descR","filter","valid","sort","rnd","chord","chordScales","chord_default","degrees","_chordDetect","detect","extended","getChord","reduced","steps","NoChord","symbol","rootDegree","setNum","NaN","quality","aliases","chord2","typeName","optionalTonic","optionalRoot","rootInterval","newNum","shift","chordName","isChordIncluded","isSupersetOf","scale","isSuperset","isSubset","isSubsetOf","transpose2","degree","chord_detect_default","namedSet","pcToName","record","found","findMatches","weight","tonicChroma","allModes","modes","mode","modeWithPerfectFifth","assumePerfectFifth","withPerfectFifth","chromaNumber","hasNonPerfectFifth","chordTypes","chordType","hasAnyThirdAndPerfectFifthAndAnySeventh","hasAnyThird","hasPerfectFifth","hasAnySeventh","baseNote","isInversion","BITMASK","anyThirds","perfectFifth","nonPerfectFifths","anySeventh","testChromaNumber","bitmask","add","addAlias","chord_type_default","names","removeAll","symbols","NoChordType","EmptyPcset","dictionary","fullName","getQuality","has","alias","data_default","ivls","names2","chromaToIntervals","chromas","pcset_default","isChroma","isEqual","isNoteIncludedIn","pcset","setNumToChroma","num2","chromaToNumber","chroma2","isPcsetNum","isPcset","listToChroma","binary","chromaToPcset","normalizedNum","chromaRotations","intervals2","IVLS","pcs","s1","s2","isIncluded","collection_default","NoScaleType","scale_type_default","duration_value_default","fraction","shorthands","VALUES","denominator","shorthand","dots","NoDuration","duration","dur","base","find","fraction2","calcDots","numerator","value2","addTo","interval_default","fromSemitones","invert","simplify","substract","transposeFifths","name2","IN","IQ","semitones2","combinator","other","nFifths","nOcts","coordA","coordB","key_default","majorKey","majorTonicFromKeySignature","minorKey","Empty","freeze","NoKey","alteration","keySignature","NoKeyScale","grades","triads","chords","chordsHarmonicFunction","NoMajorKey","minorRelative","secondaryDominants","secondaryDominantsMinorRelative","substituteDominants","substituteDominantsMinorRelative","NoMinorKey","relativeMajor","natural","harmonic","melodic","mapScaleToType","sep","keyScale","harmonicFunctions","gr","distInFifths","MajorScale","NaturalScale","HarmonicScale","MelodicScale","keyScale2","romanInTonic","tnc","sig","accidentals","ascending","note_default","descending","enharmonic","fromFreq","fromFreqSharps","fromMidi","fromMidiSharps","octave","pitchClass","sortedNames","sortedUniqNames","trBy","trFifths","trFrom","transposeBy","transposeFrom","transposeOctaves","NAMES","toName","onlyNotes","array","midi2","midiToNoteName","freq2","freqToMidi","sharps","octaves","comparator","srcChroma","destChroma","destOct","midi_default","isMidi","midiToFreq","pcsetDegrees","pcsetNearest","pcsetSteps","toMidi","arg","tuning","L2","log","L440","SHARPS","FLATS","Infinity","pcset2","ch","roman_numeral_default","NoRomanNumeral","roman","upperRoman","major","romanNumeral","NAMES_MINOR","ROMANS","mode_default","relativeTonic","seventhChords","MODES","NoMode","modeNum","triad","seventh","mode2","modeName","chords2","triads2","tonics","destination","progression_default","fromRomanNumerals","toRomanNumerals","romanNumerals","rn","chromatic","range_default","numeric","last","scale_default","modeNames","rangeOf","scaleChords","scaleNotes","NoScale","substring","st","notesChroma","pitchClasses","scaleChroma","inScale","scale2","getName","getNoteNameOf","noteOrMidi","currNote","position","time_signature_default","NONE","upper","lower","additive","CACHE","literal","stringifiedLiteral","ts","build","up","down","isPowerOfTwo","up2","low","cells","Cell","answerMidis","guessMidis","getNotes","cell","nextEmptyCell","setStatus","lastCell","getNextCellIndex","box","STATUS_CLASSES","column","flipped","GameEndContent","SHARE_ICON","onreset","answerScaleName","shareable","onshare","navigator","clipboard","writeText","HelpContent","CONTENT"],"version":3,"file":"index.14c6f0a4.js.map"}