!// modules are defined as an array
// [ module function, map of requires ]
//
// map of requires is short require name -> numeric require
//
// anything defined in a previous bundle is accessed via the
// orig method which is the require for previous bundles
function(e,t,n,r,o){/* eslint-disable no-undef */var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof a[r]&&a[r],l=i.cache||{},s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,n){if(!l[t]){if(!e[t]){// if we cannot find the module within our internal map or
// cache jump to the current global require ie. the last bundle
// that was added to the page.
var o="function"==typeof a[r]&&a[r];if(!n&&o)return o(t,!0);// If there are other bundles on this page the require from the
// previous one is saved to 'previousRequire'. Repeat this as
// many times as there are bundles until the module is found or
// we exhaust the require chain.
if(i)return i(t,!0);// Try the node require function if it exists.
if(s&&"string"==typeof t)return s(t);var u=Error("Cannot find module '"+t+"'");throw u.code="MODULE_NOT_FOUND",u}f.resolve=function(n){var r=e[t][1][n];return null!=r?r:n},f.cache={};var m=l[t]=new c.Module(t);e[t][0].call(m.exports,f,m,m.exports,this)}return l[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=l,c.parent=i,c.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},Object.defineProperty(c,"root",{get:function(){return a[r]}}),a[r]=c;for(var u=0;u<t.length;u++)c(t[u]);if(n){// Expose entry point to Node, AMD or browser globals
// Based on https://github.com/ForbesLindesay/umd/blob/master/template.js
var m=c(n);// CommonJS
"object"==typeof exports&&"undefined"!=typeof module?module.exports=m:"function"==typeof define&&define.amd?define(function(){return m}):o&&(this[o]=m)}}({bn6ru:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js"),o=e("mithril"),a=r.interopDefault(o),i=e("./components/MainPage"),l=r.interopDefault(i);// Set up routing by connecting components to routes
(0,a.default).route(document.body,"/",{"/":l.default})},{mithril:"13PaA","./components/MainPage":"fepoz","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"13PaA":[function(e,t,n){var r=e("93549bebb559a185"),o=e("ffc931a12fb92780"),a=e("3c155dd1af211f5d"),i=function(){return r.apply(this,arguments)};i.m=r,i.trust=r.trust,i.fragment=r.fragment,i.Fragment="[",i.mount=a.mount,i.route=e("1f0fc3bbca8278a1"),i.render=e("c1148290e36671bb"),i.redraw=a.redraw,i.request=o.request,i.jsonp=o.jsonp,i.parseQueryString=e("b348d752473aa042"),i.buildQueryString=e("6fda30db2e0aba2d"),i.parsePathname=e("4410a62b9aac3465"),i.buildPathname=e("e25eb55f7e8253db"),i.vnode=e("4fa5caca81091144"),i.PromisePolyfill=e("1957dc4f39cb285f"),i.censor=e("d0598fefc1e3090e"),t.exports=i},{"93549bebb559a185":"dHWmr",ffc931a12fb92780:"lsk1L","3c155dd1af211f5d":"aBC6V","1f0fc3bbca8278a1":"hiLSa",c1148290e36671bb:"b64hn",b348d752473aa042:"juUuV","6fda30db2e0aba2d":"i28pn","4410a62b9aac3465":"5bNaX",e25eb55f7e8253db:"6Sp6O","4fa5caca81091144":"3MB60","1957dc4f39cb285f":"b2FhZ",d0598fefc1e3090e:"a4I0S"}],dHWmr:[function(e,t,n){var r=e("f0f774058bea2afe");r.trust=e("66380fad4f676f97"),r.fragment=e("249e7d359e55d495"),t.exports=r},{f0f774058bea2afe:"5U6pe","66380fad4f676f97":"cVuFq","249e7d359e55d495":"f9Dy7"}],"5U6pe":[function(e,t,n){var r=e("67d1a8f028b8c23a"),o=e("310598f2e22371a7"),a=e("46da15ad2a627b49"),i=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,l={};function s(e){for(var t in e)if(a.call(e,t))return!1;return!0}t.exports=function(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=o.apply(1,arguments);return"string"==typeof e&&(t.children=r.normalizeChildren(t.children),"["!==e)?function(e,t){var n=t.attrs,r=a.call(n,"class"),o=r?n.class:n.className;if(t.tag=e.tag,t.attrs={},!s(e.attrs)&&!s(n)){var i={};for(var l in n)a.call(n,l)&&(i[l]=n[l]);n=i}for(var l in e.attrs)a.call(e.attrs,l)&&"className"!==l&&!a.call(n,l)&&(n[l]=e.attrs[l]);for(var l in(null!=o||null!=e.attrs.className)&&(n.className=null!=o?null!=e.attrs.className?String(e.attrs.className)+" "+String(o):o:null!=e.attrs.className?e.attrs.className:null),r&&(n.class=null),n)if(a.call(n,l)&&"key"!==l){t.attrs=n;break}return t}(l[e]||function(e){for(var t,n="div",r=[],o={};t=i.exec(e);){var a=t[1],s=t[2];if(""===a&&""!==s)n=s;else if("#"===a)o.id=s;else if("."===a)r.push(s);else if("["===t[3][0]){var c=t[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?r.push(c):o[t[4]]=""===c?c:c||!0}}return r.length>0&&(o.className=r.join(" ")),l[e]={tag:n,attrs:o}}(e),t):(t.tag=e,t)}},{"67d1a8f028b8c23a":"3MB60","310598f2e22371a7":"jteII","46da15ad2a627b49":"1qiWM"}],"3MB60":[function(e,t,n){function r(e,t,n,r,o,a){return{tag:e,key:t,attrs:n,children:r,text:o,dom:a,domSize:void 0,state:void 0,events:void 0,instance:void 0}}r.normalize=function(e){return Array.isArray(e)?r("[",void 0,void 0,r.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:r("#",void 0,void 0,String(e),void 0,void 0)},r.normalizeChildren=function(e){var t=[];if(e.length){// Note: this is a *very* perf-sensitive check.
// Fun fact: merging the loop like this is somehow faster than splitting
// it, noticeably so.
for(var n=null!=e[0]&&null!=e[0].key,o=1;o<e.length;o++)if((null!=e[o]&&null!=e[o].key)!==n)throw TypeError(n&&(null!=e[o]||"boolean"==typeof e[o])?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var o=0;o<e.length;o++)t[o]=r.normalize(e[o])}return t},t.exports=r},{}],jteII:[function(e,t,n){var r=e("f1426f9dc42d73e");// Call via `hyperscriptVnode.apply(startOffset, arguments)`
//
// The reason I do it this way, forwarding the arguments and passing the start
// offset in `this`, is so I don't have to create a temporary array in a
// performance-critical path.
//
// In native ES6, I'd instead add a final `...args` parameter to the
// `hyperscript` and `fragment` factories and define this as
// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But
// ES5 (what Mithril.js requires thanks to IE support) doesn't give me that luxury,
// and engines aren't nearly intelligent enough to do either of these:
//
// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to
//    another function only to be indexed.
// 2. Elide an `arguments` allocation when it's passed to any function other
//    than `Function.prototype.apply` or `Reflect.apply`.
//
// In ES6, it'd probably look closer to this (I'd need to profile it, though):
// module.exports = function(attrs, ...children) {
//     if (attrs == null || typeof attrs === "object" && attrs.tag == null && !Array.isArray(attrs)) {
//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]
//     } else {
//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]
//         attrs = undefined
//     }
//
//     if (attrs == null) attrs = {}
//     return Vnode("", attrs.key, attrs, children)
// }
t.exports=function(){var e,t=arguments[this],n=this+1;if(null==t?t={}:("object"!=typeof t||null!=t.tag||Array.isArray(t))&&(t={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return r("",t.key,t,e)}},{f1426f9dc42d73e:"3MB60"}],"1qiWM":[function(e,t,n){t.exports=({}).hasOwnProperty},{}],cVuFq:[function(e,t,n){var r=e("d026f8a7e33fcbb9");t.exports=function(e){return null==e&&(e=""),r("<",void 0,void 0,e,void 0,void 0)}},{d026f8a7e33fcbb9:"3MB60"}],f9Dy7:[function(e,t,n){var r=e("50a8ddcebd144f63"),o=e("39de75837a549ccc");t.exports=function(){var e=o.apply(0,arguments);return e.tag="[",e.children=r.normalizeChildren(e.children),e}},{"50a8ddcebd144f63":"3MB60","39de75837a549ccc":"jteII"}],lsk1L:[function(e,t,n){var r=e("a9d8fbae64b1b7e8"),o=e("64666c357cfd1bd3");t.exports=e("20cfea52190c88b7")("undefined"!=typeof window?window:null,r,o.redraw)},{a9d8fbae64b1b7e8:"9Z5xX","64666c357cfd1bd3":"aBC6V","20cfea52190c88b7":"dWcdG"}],"9Z5xX":[function(e,t,n){/* global window */var r=arguments[3],o=e("5a96f0df8de3693c");"undefined"!=typeof window?(void 0===window.Promise?window.Promise=o:window.Promise.prototype.finally||(window.Promise.prototype.finally=o.prototype.finally),t.exports=window.Promise):void 0!==r?(void 0===r.Promise?r.Promise=o:r.Promise.prototype.finally||(r.Promise.prototype.finally=o.prototype.finally),t.exports=r.Promise):t.exports=o},{"5a96f0df8de3693c":"b2FhZ"}],b2FhZ:[function(e,t,n){/** @constructor */var r=function(e){if(!(this instanceof r))throw Error("Promise must be called with 'new'.");if("function"!=typeof e)throw TypeError("executor must be a function.");var t=this,n=[],o=[],a=c(n,!0),i=c(o,!1),l=t._instance={resolvers:n,rejectors:o},s="function"==typeof setImmediate?setImmediate:setTimeout;function c(e,r){return function a(c){var m;try{if(r&&null!=c&&("object"==typeof c||"function"==typeof c)&&"function"==typeof(m=c.then)){if(c===t)throw TypeError("Promise can't be resolved with itself.");u(m.bind(c))}else s(function(){r||0!==e.length||console.error("Possible unhandled promise rejection:",c);for(var t=0;t<e.length;t++)e[t](c);n.length=0,o.length=0,l.state=r,l.retry=function(){a(c)}})}catch(e){i(e)}}}function u(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var r=n(i);try{e(n(a),r)}catch(e){r(e)}}u(e)};r.prototype.then=function(e,t){var n,o,a=this._instance;function i(e,t,r,i){t.push(function(t){if("function"!=typeof e)r(t);else try{n(e(t))}catch(e){o&&o(e)}}),"function"==typeof a.retry&&i===a.state&&a.retry()}var l=new r(function(e,t){n=e,o=t});return i(e,a.resolvers,n,!0),i(t,a.rejectors,o,!1),l},r.prototype.catch=function(e){return this.then(null,e)},r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){return r.reject(t)})})},r.resolve=function(e){return e instanceof r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.all=function(e){return new r(function(t,n){var r=e.length,o=0,a=[];if(0===e.length)t([]);else for(var i=0;i<e.length;i++)!function(i){function l(e){o++,a[i]=e,o===r&&t(a)}null!=e[i]&&("object"==typeof e[i]||"function"==typeof e[i])&&"function"==typeof e[i].then?e[i].then(l,n):l(e[i])}(i)})},r.race=function(e){return new r(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},t.exports=r},{}],aBC6V:[function(e,t,n){var r=e("e9eb48dd8cedc516");t.exports=e("856b9fa9d93f38f3")(r,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null)},{e9eb48dd8cedc516:"b64hn","856b9fa9d93f38f3":"a3OiH"}],b64hn:[function(e,t,n){t.exports=e("5ce98d5aeb50f0a6")("undefined"!=typeof window?window:null)},{"5ce98d5aeb50f0a6":"eygmT"}],eygmT:[function(e,t,n){var r=e("8c1a3af9d274e105");t.exports=function(e){var t,n,o=e&&e.document,a={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(e){return e.attrs&&e.attrs.xmlns||a[e.tag]}//sanity check to discourage people from doing `vnode.state = ...`
function l(e,t){if(e.state!==t)throw Error("'vnode.state' must not be modified.")}//Note: the hook is passed as the `this` argument to allow proxying the
//arguments without requiring a full array allocation to do so. It also
//takes advantage of the fact the current `vnode` is the first argument in
//all lifecycle methods.
function s(e){var t=e.state;try{return this.apply(t,arguments)}finally{l(e,t)}}// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when
// inside an iframe. Catch and swallow this error, and heavy-handidly return null.
function c(){try{return o.activeElement}catch(e){return null}}//create
function u(e,t,n,r,o,a,i){for(var l=n;l<r;l++){var s=t[l];null!=s&&m(e,s,o,i,a)}}function m(e,t,n,a,l){var c=t.tag;if("string"==typeof c)switch(t.state={},null!=t.attrs&&O(t.attrs,t,n),c){case"#":t.dom=o.createTextNode(t.children),P(e,t.dom,l);break;case"<":d(e,t,a,l);break;case"[":!function(e,t,n,r,a){var i=o.createDocumentFragment();if(null!=t.children){var l=t.children;u(i,l,0,l.length,n,null,r)}t.dom=i.firstChild,t.domSize=i.childNodes.length,P(e,i,a)}(e,t,n,a,l);break;default:!function(e,t,n,r,a){var l=t.tag,s=t.attrs,c=s&&s.is,m=(r=i(t)||r)?c?o.createElementNS(r,l,{is:c}):o.createElementNS(r,l):c?o.createElement(l,{is:c}):o.createElement(l);if(t.dom=m,null!=s&&//attrs
function(e,t,n){// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.
//
// Also, the DOM does things to inputs based on the value, so it needs set first.
// See: https://github.com/MithrilJS/mithril.js/issues/2622
"input"===e.tag&&null!=t.type&&e.dom.setAttribute("type",t.type);var r=null!=t&&"input"===e.tag&&"file"===t.type;for(var o in t)I(e,o,null,t[o],n,r)}(t,s,r),P(e,m,a),!b(t)&&null!=t.children){var f=t.children;u(m,f,0,f.length,n,null,r),"select"===t.tag&&null!=s&&function(e,t){if("value"in t){if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value// eslint-disable-line no-implicit-coercion
;(e.dom.value!==n||-1===e.dom.selectedIndex)&&(e.dom.value=n)}}"selectedIndex"in t&&I(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,s)}}(e,t,n,a,l)}else!function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(O(e.state,e,t),null!=e.attrs&&O(e.attrs,e,t),e.instance=r.normalize(s.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null}(t,n),null!=t.instance?(m(e,t.instance,n,a,l),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function d(e,t,n,r){var a,i=t.children.match(/^\s*?<(\w+)/im)||[],l=o.createElement(f[i[1]]||"div");"http://www.w3.org/2000/svg"===n?(l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",l=l.firstChild):l.innerHTML=t.children,t.dom=l.firstChild,t.domSize=l.childNodes.length,// Capture nodes to remove, so we don't confuse them.
t.instance=[];for(var s=o.createDocumentFragment();a=l.firstChild;)t.instance.push(a),s.appendChild(a);P(e,s,r)}//update
/**
	 * @param {Element|Fragment} parent - the parent element
	 * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for
	 *                               this part of the tree
	 * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.
	 * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)
	 * @param {Element | null} nextSibling - the next DOM node if we're dealing with a
	 *                                       fragment that is not the last item in its
	 *                                       parent
	 * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any
	 * @returns void
	 */// This function diffs and patches lists of vnodes, both keyed and unkeyed.
//
// We will:
//
// 1. describe its general structure
// 2. focus on the diff algorithm optimizations
// 3. discuss DOM node operations.
// ## Overview:
//
// The updateNodes() function:
// - deals with trivial cases
// - determines whether the lists are keyed or unkeyed based on the first non-null node
//   of each list.
// - diffs them and patches the DOM if needed (that's the brunt of the code)
// - manages the leftovers: after diffing, are there:
//   - old nodes left to remove?
// 	 - new nodes to insert?
// 	 deal with them!
//
// The lists are only iterated over once, with an exception for the nodes in `old` that
// are visited in the fourth part of the diff and in the `removeNodes` loop.
// ## Diffing
//
// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837
// may be good for context on longest increasing subsequence-based logic for moving nodes.
//
// In order to diff keyed lists, one has to
//
// 1) match nodes in both lists, per key, and update them accordingly
// 2) create the nodes present in the new list, but absent in the old one
// 3) remove the nodes present in the old list, but absent in the new one
// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.
//
// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate
// over the new list and for each new vnode, find the corresponding vnode in the old list using
// the map.
// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new
// and must be created.
// For the removals, we actually remove the nodes that have been updated from the old list.
// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.
// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)
// algorithm.
//
// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going
// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices
// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would
//  match the above lists, for example).
//
// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We
// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.
//
// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually
// the longest increasing subsequence *of old nodes still present in the new list*).
//
// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation
// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,
// the `LIS` and a temporary one to create the LIS).
//
// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of
// the LIS and can be updated without moving them.
//
// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with
// the exception of the last node if the list is fully reversed).
//
// ## Finding the next sibling.
//
// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.
// When the list is being traversed top-down, at any index, the DOM nodes up to the previous
// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old
// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.
//
// In the other scenarios (swaps, upwards traversal, map-based diff),
// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the
// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node
// as the next sibling (cached in the `nextSibling` variable).
// ## DOM node moves
//
// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,
// this is not the case if the node moved (second and fourth part of the diff algo). We move
// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`
// variable rather than fetching it using `getNextSibling()`.
//
// The fourth part of the diff currently inserts nodes unconditionally, leading to issues
// like #1791 and #1999. We need to be smarter about those situations where adjascent old
// nodes remain together in the new list in a way that isn't covered by parts one and
// three of the diff algo.
function p(e,t,n,r,o,a){if(t!==n&&(null!=t||null!=n)){if(null==t||0===t.length)u(e,n,0,n.length,r,o,a);else if(null==n||0===n.length)g(e,t,0,t.length);else{var i=null!=t[0]&&null!=t[0].key,l=null!=n[0]&&null!=n[0].key,s=0,c=0;if(!i)for(;c<t.length&&null==t[c];)c++;if(!l)for(;s<n.length&&null==n[s];)s++;if(i!==l)g(e,t,c,t.length),u(e,n,s,n.length,r,o,a);else if(l){// bottom-up
for(// keyed diff
var f,d,p,P,b,j,A=t.length-1,w=n.length-1;A>=c&&w>=s&&(P=t[A],b=n[w],P.key===b.key);)P!==b&&h(e,P,b,r,o,a),null!=b.dom&&(o=b.dom),A--,w--;// top-down
for(;A>=c&&w>=s&&(d=t[c],p=n[s],d.key===p.key);)c++,s++,d!==p&&h(e,d,p,r,y(t,c,o),a);// swaps and list reversals
for(;A>=c&&w>=s&&s!==w&&d.key===b.key&&P.key===p.key;)M(e,P,j=y(t,c,o)),P!==p&&h(e,P,p,r,j,a),++s<=--w&&M(e,d,o),d!==b&&h(e,d,b,r,o,a),null!=b.dom&&(o=b.dom),c++,P=t[--A],b=n[w],d=t[c],p=n[s];// bottom up once again
for(;A>=c&&w>=s&&P.key===b.key;)P!==b&&h(e,P,b,r,o,a),null!=b.dom&&(o=b.dom),A--,w--,P=t[A],b=n[w];if(s>w)g(e,t,c,A+1);else if(c>A)u(e,n,s,w+1,r,o,a);else{// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul
var f,I,S=o,k=w-s+1,T=Array(k),N=0,E=0,C=2147483647,D=0;for(E=0;E<k;E++)T[E]=-1;for(E=w;E>=s;E--){null==f&&(f=function(e,t,n){for(var r=Object.create(null);t<n;t++){var o=e[t];if(null!=o){var a=o.key;null!=a&&(r[a]=t)}}return r}(t,c,A+1));var F=f[(b=n[E]).key];null!=F&&(C=F<C?F:-1// becomes -1 if nodes were re-ordered
,T[E-s]=F,P=t[F],t[F]=null,P!==b&&h(e,P,b,r,o,a),null!=b.dom&&(o=b.dom),D++)}if(o=S,D!==A-c+1&&g(e,t,c,A+1),0===D)u(e,n,s,w+1,r,o,a);else if(-1===C)for(N=// the indices of the indices of the items that are part of the
// longest increasing subsequence in the oldIndices list
(I=function(e){for(var t=[0],n=0,r=0,o=0,a=v.length=e.length,o=0;o<a;o++)v[o]=e[o];for(var o=0;o<a;++o)if(-1!==e[o]){var i=t[t.length-1];if(e[i]<e[o]){v[o]=i,t.push(o);continue}for(n=0,r=t.length-1;n<r;){// Fast integer average without overflow.
// eslint-disable-next-line no-bitwise
var l=(n>>>1)+(r>>>1)+(n&r&1);e[t[l]]<e[o]?n=l+1:r=l}e[o]<e[t[n]]&&(n>0&&(v[o]=t[n-1]),t[n]=o)}for(n=t.length,r=t[n-1];n-- >0;)t[n]=r,r=v[r];return v.length=0,t}(T)).length-1,E=w;E>=s;E--)p=n[E],-1===T[E-s]?m(e,p,r,a,o):I[N]===E-s?N--:M(e,p,o),null!=p.dom&&(o=n[E].dom);else for(E=w;E>=s;E--)p=n[E],-1===T[E-s]&&m(e,p,r,a,o),null!=p.dom&&(o=n[E].dom)}}else{// Don't index past the end of either list (causes deopts).
var O=t.length<n.length?t.length:n.length;for(// Rewind if necessary to the first non-null index on either side.
// We could alternatively either explicitly create or remove nodes when `start !== oldStart`
// but that would be optimizing for sparse lists which are more rare than dense ones.
s=s<c?s:c;s<O;s++)(d=t[s])!==(p=n[s])&&(null!=d||null!=p)&&(null==d?m(e,p,r,a,y(t,s+1,o)):null==p?x(e,d):h(e,d,p,r,y(t,s+1,o),a));t.length>O&&g(e,t,s,t.length),n.length>O&&u(e,n,s,n.length,r,o,a)}}}}function h(e,t,n,o,a,l){var u,f,v=t.tag;if(v===n.tag){if(n.state=t.state,n.events=t.events,function(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=s.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=s.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(!1)// eslint-disable-line no-constant-condition
return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,// One would think having the actual latest attributes would be ideal,
// but it doesn't let us properly diff based on our current internal
// representation. We have to save not only the old DOM info, but also
// the attributes used to create it, as we diff *that*, not against the
// DOM directly (with a few exceptions in `setAttr`). And, of course, we
// need to save the children and text as they are conceptually not
// unlike special "attributes" internally.
e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(n,t))return;if("string"==typeof v)switch(null!=n.attrs&&V(n.attrs,n,o),v){case"#":t.children.toString()!==n.children.toString()&&(t.dom.nodeValue=n.children),n.dom=t.dom;break;case"<":t.children!==n.children?(j(e,t),d(e,n,l,a)):(n.dom=t.dom,n.domSize=t.domSize,n.instance=t.instance);break;case"[":!function(e,t,n,r,o,a){p(e,t.children,n.children,r,o,a);var i=0,l=n.children;if(n.dom=null,null!=l){for(var s=0;s<l.length;s++){var c=l[s];null!=c&&null!=c.dom&&(null==n.dom&&(n.dom=c.dom),i+=c.domSize||1)}1!==i&&(n.domSize=i)}}(e,t,n,o,a,l);break;default:u=l,f=n.dom=t.dom,u=i(n)||u,"textarea"===n.tag&&null==n.attrs&&(n.attrs={}),function(e,t,n,r){if(t&&t===n&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),null!=n){// If you assign an input type that is not supported by IE 11 with an assignment expression, an error will occur.
//
// Also, the DOM does things to inputs based on the value, so it needs set first.
// See: https://github.com/MithrilJS/mithril.js/issues/2622
"input"===e.tag&&null!=n.type&&e.dom.setAttribute("type",n.type);var o,a="input"===e.tag&&"file"===n.type;for(var i in n)I(e,i,t&&t[i],n[i],r,a)}if(null!=t)for(var i in t)null!=(o=t[i])&&(null==n||null==n[i])&&function(e,t,n,r){if(!("key"===t||"is"===t||null==n||S(t))){if("o"===t[0]&&"n"===t[1])F(e,t,void 0);else if("style"===t)C(e.dom,n,null);else if(k(e,t,r)&&"className"!==t&&"title"// creates "null" as title
!==t&&("value"!==t||"option"!==e.tag&&("select"!==e.tag||-1!==e.dom.selectedIndex||e.dom!==c()))&&("input"!==e.tag||"type"!==t))e.dom[t]=null;else{var o=t.indexOf(":");-1!==o&&(t=t.slice(o+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}}}(e,i,o,r)}(n,t.attrs,n.attrs,u),b(n)||p(f,t.children,n.children,o,null,u)}else!function(e,t,n,o,a,i){if(n.instance=r.normalize(s.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");V(n.state,n,o),null!=n.attrs&&V(n.attrs,n,o),null!=n.instance?(null==t.instance?m(e,n.instance,o,i,a):h(e,t.instance,n.instance,o,a,i),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=t.instance?(x(e,t.instance),n.dom=void 0,n.domSize=0):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,n,o,a,l)}else x(e,t),m(e,n,o,l,a)}// Lifted from ivi https://github.com/ivijs/ivi/
// takes a list of unique numbers (-1 is special and can
// occur multiple times) and returns an array with the indices
// of the items that are part of the longest increasing
// subsequence
var v=[];function y(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}// This covers a really specific edge case:
// - Parent node is keyed and contains child
// - Child is removed, returns unresolved promise in `onbeforeremove`
// - Parent node is moved in keyed diff
// - Remaining children still need moved appropriately
//
// Ideally, I'd track removed nodes as well, but that introduces a lot more
// complexity and I'm not exactly interested in doing that.
function M(e,t,n){var r=o.createDocumentFragment();(function e(t,n,r){// Dodge the recursion overhead in a few of the most common cases.
for(;null!=r.dom&&r.dom.parentNode===t;){if("string"!=typeof r.tag){if(null!=(r=r.instance))continue}else if("<"===r.tag)for(var o=0;o<r.instance.length;o++)n.appendChild(r.instance[o]);else if("["!==r.tag)n.appendChild(r.dom);else if(1===r.children.length){if(null!=(r=r.children[0]))continue}else for(var o=0;o<r.children.length;o++){var a=r.children[o];null!=a&&e(t,n,a)}break}})(e,r,t),P(e,r,n)}function P(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function b(e){if(null==e.attrs||null==e.attrs.contenteditable&&// attribute
null// property
==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=t&&0!==t.length)throw Error("Child node of a contenteditable must be trusted.");return!0}//remove
function g(e,t,n,r){for(var o=n;o<r;o++){var a=t[o];null!=a&&x(e,a)}}function x(e,t){var n,r,o=0,a=t.state;if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove){var i=s.call(t.state.onbeforeremove,t);null!=i&&"function"==typeof i.then&&(o=1,n=i)}if(t.attrs&&"function"==typeof t.attrs.onbeforeremove){var i=s.call(t.attrs.onbeforeremove,t);null!=i&&"function"==typeof i.then&&(// eslint-disable-next-line no-bitwise
o|=2,r=i)}// If we can, try to fast-path it and avoid all the overhead of awaiting
if(l(t,a),o){if(null!=n){var c=function(){// eslint-disable-next-line no-bitwise
!(1&o)||(o&=2)||u()};n.then(c,c)}if(null!=r){var c=function(){// eslint-disable-next-line no-bitwise
!(2&o)||(o&=1)||u()};r.then(c,c)}}else w(t),A(e,t);function u(){l(t,a),w(t),A(e,t)}}function j(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function A(e,t){// Dodge the recursion overhead in a few of the most common cases.
for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)j(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var r=t.children[n];null!=r&&A(e,r)}}break}}function w(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&s.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&s.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&w(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];null!=r&&w(r)}}}function I(e,t,n,r,a,i){if(!("key"===t||"is"===t||null==r||S(t))&&(n!==r||"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===c()||"option"===e.tag&&e.dom.parentNode===o.activeElement||"object"==typeof r)&&("type"!==t||"input"!==e.tag)){if("o"===t[0]&&"n"===t[1])return F(e,t,r);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),r);else if("style"===t)C(e.dom,n,r);else if(k(e,t,a)){if("value"===t){// Only do the coercion if we're actually going to check the value.
/* eslint-disable no-implicit-coercion *///setting input[value] to same value by typing on focused element moves cursor to end in Chrome
//setting input[type=file][value] to same value causes an error to be generated if it's non-empty
if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+r&&(i||e.dom===c())||"select"===e.tag&&null!==n&&e.dom.value===""+r||"option"===e.tag&&null!==n&&e.dom.value===""+r)return;//setting input[type=file][value] to different value is an error if it's non-empty
// Not ideal, but it at least works around the most common source of uncaught exceptions for now.
if(i&&""+r!=""){console.error("`value` is read-only on file inputs!");return}/* eslint-enable no-implicit-coercion */}e.dom[t]=r}else"boolean"==typeof r?r?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,r)}}function S(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function k(e,t,n){// Filter out namespaced keys
return void 0===n&&// If it's a custom element, just keep it.
(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||// If it's a normal element, let's try to avoid a few browser bugs.
"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"// && key !== "type"
!==t)&&t in e.dom}//style
var T=/[A-Z]/g;function N(e){return"-"+e.toLowerCase()}function E(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(T,N)}function C(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!=typeof n)e.style.cssText=n;else if(null==t||"object"!=typeof t)// Add new style properties
for(var r in // `old` is missing or a string, `style` is an object.
e.style.cssText="",n){var o=n[r];null!=o&&e.style.setProperty(E(r),String(o))}else{// Both old & new are (different) objects.
// Update style properties that have changed
for(var r in n){var o=n[r];null!=o&&(o=String(o))!==String(t[r])&&e.style.setProperty(E(r),o)}// Remove style properties that no longer exist
for(var r in t)null!=t[r]&&null==n[r]&&e.style.removeProperty(E(r))}}// Here's an explanation of how this works:
// 1. The event names are always (by design) prefixed by `on`.
// 2. The EventListener interface accepts either a function or an object
//    with a `handleEvent` method.
// 3. The object does not inherit from `Object.prototype`, to avoid
//    any potential interference with that (e.g. setters).
// 4. The event name is remapped to the handler before calling it.
// 5. In function-based event handlers, `ev.target === this`. We replicate
//    that below.
// 6. In function-based event handlers, `return false` prevents the default
//    action and stops event propagation. We replicate that below.
function D(){// Save this, so the current redraw is correctly tracked.
this._=t}//event
function F(e,n,r){null!=e.events?(e.events._=t,e.events[n]!==r&&(null!=r&&("function"==typeof r||"object"==typeof r)?(null==e.events[n]&&e.dom.addEventListener(n.slice(2),e.events,!1),e.events[n]=r):(null!=e.events[n]&&e.dom.removeEventListener(n.slice(2),e.events,!1),e.events[n]=void 0))):null!=r&&("function"==typeof r||"object"==typeof r)&&(e.events=new D,e.dom.addEventListener(n.slice(2),e.events,!1),e.events[n]=r)}//lifecycle
function O(e,t,n){"function"==typeof e.oninit&&s.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(s.bind(e.oncreate,t))}function V(e,t,n){"function"==typeof e.onupdate&&n.push(s.bind(e.onupdate,t))}return D.prototype=Object.create(null),D.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,o,a){if(!e)throw TypeError("DOM element being rendered to does not exist.");if(null!=n&&e.contains(n))throw TypeError("Node is currently being rendered to and thus is locked.");var i=t,l=n,s=[],u=c(),m=e.namespaceURI;n=e,t="function"==typeof a?a:void 0;try{null==e.vnodes&&(e.textContent=""),o=r.normalizeChildren(Array.isArray(o)?o:[o]),p(e,e.vnodes,o,s,null,"http://www.w3.org/1999/xhtml"===m?void 0:m),e.vnodes=o,null!=u&&c()!==u&&"function"==typeof u.focus&&u.focus();for(var f=0;f<s.length;f++)s[f]()}finally{t=i,n=l}}}},{"8c1a3af9d274e105":"3MB60"}],a3OiH:[function(e,t,n){var r=e("467dc3c2fbf7fe6a");t.exports=function(e,t,n){var o=[],a=!1,i=-1;function l(){for(i=0;i<o.length;i+=2)try{e(o[i],r(o[i+1]),s)}catch(e){n.error(e)}i=-1}function s(){a||(a=!0,t(function(){a=!1,l()}))}return s.sync=l,{mount:function(t,n){if(null!=n&&null==n.view&&"function"!=typeof n)throw TypeError("m.mount expects a component, not a vnode.");var a=o.indexOf(t);a>=0&&(o.splice(a,2),a<=i&&(i-=2),e(t,[])),null!=n&&(o.push(t,n),e(t,r(n),s))},redraw:s}}},{"467dc3c2fbf7fe6a":"3MB60"}],dWcdG:[function(e,t,n){var r=e("8978bad752a3e24e"),o=e("68d5fe67225153a7");t.exports=function(e,t,n){var a=0;function i(e){return new t(e)}function l(e){return function(o,a){"string"!=typeof o?(a=o,o=o.url):null==a&&(a={});var l=new t(function(t,n){e(r(o,a.params),a,function(e){if("function"==typeof a.type){if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new a.type(e[n]);else e=new a.type(e)}t(e)},n)});if(!0===a.background)return l;var s=0;function c(){0==--s&&"function"==typeof n&&n()}return function e(t){var n=t.then;return(// Set the constructor, so engines know to not await or resolve
// this as a native promise. At the time of writing, this is
// only necessary for V8, but their behavior is the correct
// behavior per spec. See this spec issue for more details:
// https://github.com/tc39/ecma262/issues/1577. Also, see the
// corresponding comment in `request/tests/test-request.js` for
// a bit more background on the issue at hand.
t.constructor=i,t.then=function(){s++;var r=n.apply(t,arguments);return r.then(c,function(e){if(c(),0===s)throw e}),e(r)},t)}(l)}}function s(e,t){for(var n in e.headers)if(o.call(e.headers,n)&&n.toLowerCase()===t)return!0;return!1}return(// In case the global Promise is some userland library's where they rely on
// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or
// similar. Let's *not* break them.
i.prototype=t.prototype,i.__proto__=t// eslint-disable-line no-proto
,{request:l(function(t,n,r,a){var i,l=null!=n.method?n.method.toUpperCase():"GET",c=n.body,u=(null==n.serialize||n.serialize===JSON.serialize)&&!(c instanceof e.FormData||c instanceof e.URLSearchParams),m=n.responseType||("function"==typeof n.extract?"":"json"),f=new e.XMLHttpRequest,d=!1,p=!1,h=f,v=f.abort;for(var y in f.abort=function(){d=!0,v.call(this)},f.open(l,t,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),u&&null!=c&&!s(n,"content-type")&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||s(n,"accept")||f.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(f.withCredentials=n.withCredentials),n.timeout&&(f.timeout=n.timeout),f.responseType=m,n.headers)o.call(n.headers,y)&&f.setRequestHeader(y,n.headers[y]);f.onreadystatechange=function(e){// Don't throw errors on xhr.abort().
if(!d&&4===e.target.readyState)try{var o,i=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(t),l=e.target.response;if("json"===m)// For IE and Edge, which don't implement
// `responseType: "json"`.
{if(!e.target.responseType&&"function"!=typeof n.extract)try{l=JSON.parse(e.target.responseText)}catch(e){l=null}}else m&&"text"!==m||null!=l||(l=e.target.responseText);if("function"==typeof n.extract?(l=n.extract(e.target,n),i=!0):"function"==typeof n.deserialize&&(l=n.deserialize(l)),i)r(l);else{var s=function(){try{o=e.target.responseText}catch(e){o=l}var t=Error(o);t.code=e.target.status,t.response=l,a(t)};0===f.status?// This allows `xhr.ontimeout` to run in the case that there is a timeout
// Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject
// as `xhr.onreadystatechange` will run before it
setTimeout(function(){p||s()}):s()}}catch(e){a(e)}},f.ontimeout=function(e){p=!0;var t=Error("Request timed out");t.code=e.target.status,a(t)},"function"==typeof n.config&&(f=n.config(f,n,t)||f)!==h&&(i=f.abort,f.abort=function(){d=!0,i.call(this)}),null==c?f.send():"function"==typeof n.serialize?f.send(n.serialize(c)):c instanceof e.FormData||c instanceof e.URLSearchParams?f.send(c):f.send(JSON.stringify(c))}),jsonp:l(function(t,n,r,o){var i=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+a++,l=e.document.createElement("script");e[i]=function(t){delete e[i],l.parentNode.removeChild(l),r(t)},l.onerror=function(){delete e[i],l.parentNode.removeChild(l),o(Error("JSONP request failed"))},l.src=t+(0>t.indexOf("?")?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(i),e.document.documentElement.appendChild(l)})})}},{"8978bad752a3e24e":"6Sp6O","68d5fe67225153a7":"1qiWM"}],"6Sp6O":[function(e,t,n){var r=e("70a4649d20f83b8a"),o=e("888e60f1722c8b46");// Returns `path` from `template` + `params`
t.exports=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(null==t)return e;var n=e.indexOf("?"),a=e.indexOf("#"),i=a<0?e.length:a,l=n<0?i:n,s=e.slice(0,l),c={};o(c,t);var u=s.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,n,r){return(// If no such parameter exists, don't interpolate it.
(delete c[n],null==t[n])?e:r?t[n]:encodeURIComponent(String(t[n])))}),m=u.indexOf("?"),f=u.indexOf("#"),d=f<0?u.length:f,p=m<0?d:m,h=u.slice(0,p);n>=0&&(h+=e.slice(n,i)),m>=0&&(h+=(n<0?"?":"&")+u.slice(m,d));var v=r(c);return v&&(h+=(n<0&&m<0?"?":"&")+v),a>=0&&(h+=e.slice(a)),f>=0&&(h+=(a<0?"":"&")+u.slice(f)),h}},{"70a4649d20f83b8a":"i28pn","888e60f1722c8b46":"jBAA8"}],i28pn:[function(e,t,n){t.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)!function e(n,r){if(Array.isArray(r))for(var o=0;o<r.length;o++)e(n+"["+o+"]",r[o]);else if("[object Object]"===Object.prototype.toString.call(r))for(var o in r)e(n+"["+o+"]",r[o]);else t.push(encodeURIComponent(n)+(null!=r&&""!==r?"="+encodeURIComponent(r):""))}(n,e[n]);return t.join("&")}},{}],jBAA8:[function(e,t,n){var r=e("658fcf17ed001102");t.exports=Object.assign||function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n])}},{"658fcf17ed001102":"1qiWM"}],hiLSa:[function(e,t,n){var r=e("4fdedb338340a3f3");t.exports=e("9c1b8b10412e09b2")("undefined"!=typeof window?window:null,r)},{"4fdedb338340a3f3":"aBC6V","9c1b8b10412e09b2":"2m6Wv"}],"2m6Wv":[function(e,t,n){var r=e("68465c675053e055"),o=e("adb1374fbd62ddb4"),a=e("dd5e4296bf8c58a8"),i=e("f15df7f3b1724444"),l=e("730e93a5d59ec1d9"),s=e("829227ed273d4a02"),c=e("bc482b3d75b86f47"),u=e("ba0f83b8edd5bfe2"),m={};function f(e){try{return decodeURIComponent(e)}catch(t){return e}}t.exports=function(e,t){var n,d,p,h,v,y,M=null==e?null:"function"==typeof e.setImmediate?e.setImmediate:e.setTimeout,P=a.resolve(),b=!1,g=!1,x=0,j=m,A={onbeforeupdate:function(){return!(!(x=x?2:1)||m===j)},onremove:function(){e.removeEventListener("popstate",S,!1),e.removeEventListener("hashchange",I,!1)},view:function(){if(x&&m!==j){// Wrap in a fragment to preserve existing key semantics
var e=[r(p,h.key,h)];return j&&(e=j.render(e[0])),e}}},w=T.SKIP={};function I(){b=!1;// Consider the pathname holistically. The prefix might even be invalid,
// but that's not our problem.
var r=e.location.hash;"#"!==T.prefix[0]&&(r=e.location.search+r,"?"!==T.prefix[0]&&"/"!==(r=e.location.pathname+r)[0]&&(r="/"+r));// This seemingly useless `.concat()` speeds up the tests quite a bit,
// since the representation is consistently a relatively poorly
// optimized cons string.
var o=r.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,f).slice(T.prefix.length),a=l(o);function i(e){console.error(e),k(d,null,{replace:!0})}c(a.params,e.history.state),function e(r){// state === 0: init
// state === 1: scheduled
// state === 2: done
for(;r<n.length;r++)if(n[r].check(a)){var l=n[r].component,s=n[r].route,c=l,u=y=function(n){if(u===y){if(n===w)return e(r+1);p=null!=n&&("function"==typeof n.view||"function"==typeof n)?n:"div",h=a.params,v=o,y=null,j=l.render?l:null,2===x?t.redraw():(x=2,t.redraw.sync())}};// There's no understating how much I *wish* I could
// use `async`/`await` here...
l.view||"function"==typeof l?(l={},u(c)):l.onmatch?P.then(function(){return l.onmatch(a.params,o,s)}).then(u,o===d?null:i):u("div");return}if(o===d)throw Error("Could not resolve default route "+d+".");k(d,null,{replace:!0})}(0)}// Set it unconditionally so `m.route.set` and `m.route.Link` both work,
// even if neither `pushState` nor `hashchange` are supported. It's
// cleared if `hashchange` is used, since that makes it automatically
// async.
function S(){b||(b=!0,// TODO: just do `mountRedraw.redraw()` here and elide the timer
// dependency. Note that this will muck with tests a *lot*, so it's
// not as easy of a change as it sounds.
M(I))}function k(t,n,r){if(t=i(t,n),g){S();var o=r?r.state:null,a=r?r.title:null;r&&r.replace?e.history.replaceState(o,a,T.prefix+t):e.history.pushState(o,a,T.prefix+t)}else e.location.href=T.prefix+t}function T(r,o,a){if(!r)throw TypeError("DOM element being rendered to does not exist.");if(n=Object.keys(a).map(function(e){if("/"!==e[0])throw SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:e,component:a[e],check:s(e)}}),d=o,null!=o){var i=l(o);if(!n.some(function(e){return e.check(i)}))throw ReferenceError("Default route doesn't match any known routes.")}"function"==typeof e.history.pushState?e.addEventListener("popstate",S,!1):"#"===T.prefix[0]&&e.addEventListener("hashchange",I,!1),g=!0,t.mount(r,A),I()}return T.set=function(e,t,n){null!=y&&((n=n||{}).replace=!0),y=null,k(e,t,n)},T.get=function(){return v},T.prefix="#!",T.Link={view:function(e){// Omit the used parameters from the rendered element - they are
// internal. Also, censor the various lifecycle methods.
//
// We don't strip the other parameters because for convenience we
// let them be specified in the selector as well.
var t,n,r,a=o(e.attrs.selector||"a",u(e.attrs,["options","params","selector","onclick"]),e.children);return(a.attrs.disabled=!!a.attrs.disabled)?(a.attrs.href=null,a.attrs["aria-disabled"]="true"):(t=e.attrs.options,n=e.attrs.onclick,// Easier to build it now to keep it isomorphic.
r=i(a.attrs.href,e.attrs.params),a.attrs.href=T.prefix+r,a.attrs.onclick=function(e){var o;"function"==typeof n?o=n.call(e.currentTarget,e):null==n||"object"!=typeof n||"function"==typeof n.handleEvent&&n.handleEvent(e),!1===o||e.defaultPrevented||// Ignore everything but left clicks
0!==e.button&&0!==e.which&&1!==e.which||// Let the browser handle `target=_blank`, etc.
e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,T.set(r,null,t))}),a}},T.param=function(e){return h&&null!=e?h[e]:h},T}},{"68465c675053e055":"3MB60",adb1374fbd62ddb4:"5U6pe",dd5e4296bf8c58a8:"9Z5xX",f15df7f3b1724444:"6Sp6O","730e93a5d59ec1d9":"5bNaX","829227ed273d4a02":"3FUTG",bc482b3d75b86f47:"jBAA8",ba0f83b8edd5bfe2:"a4I0S"}],"5bNaX":[function(e,t,n){var r=e("8660a02beda9c833");// Returns `{path, params}` from `url`
t.exports=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),o=n<0?e.length:n,a=t<0?o:t,i=e.slice(0,a).replace(/\/{2,}/g,"/");return i?("/"!==i[0]&&(i="/"+i),i.length>1&&"/"===i[i.length-1]&&(i=i.slice(0,-1))):i="/",{path:i,params:t<0?{}:r(e.slice(t+1,o))}}},{"8660a02beda9c833":"juUuV"}],juUuV:[function(e,t,n){function r(e){try{return decodeURIComponent(e)}catch(t){return e}}t.exports=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},o={},a=0;a<t.length;a++){var i=t[a].split("="),l=r(i[0]),s=2===i.length?r(i[1]):"";"true"===s?s=!0:"false"===s&&(s=!1);var c=l.split(/\]\[?|\[/),u=o;l.indexOf("[")>-1&&c.pop();for(var m=0;m<c.length;m++){var f=c[m],d=c[m+1],p=""==d||!isNaN(parseInt(d,10));if(""===f){var l=c.slice(0,m).join();null==n[l]&&(n[l]=Array.isArray(u)?u.length:0),f=n[l]++}else if("__proto__"===f)break;if(m===c.length-1)u[f]=s;else{// Read own properties exclusively to disallow indirect
// prototype pollution
var h=Object.getOwnPropertyDescriptor(u,f);null!=h&&(h=h.value),null==h&&(u[f]=h=p?[]:{}),u=h}}}return o}},{}],"3FUTG":[function(e,t,n){var r=e("738f895382d52b2b");// Compiles a template into a function that takes a resolved path (without query
// strings) and returns an object containing the template parameters with their
// parsed values. This expects the input of the compiled template to be the
// output of `parsePathname`. Note that it does *not* remove query parameters
// specified in the template.
t.exports=function(e){var t=r(e),n=Object.keys(t.params),o=[],a=RegExp("^"+t.path.replace(// `:lang-:locale` in routes. This is all merged into one pass so I
// don't also accidentally escape `-` and make it harder to detect it to
// ban it from template parameters.
/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(o.push({k:t,r:"..."===n}),"..."===n)?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||"")})+"$");return function(e){// First, check the params. Usually, there isn't any, and it's just
// checking a static set.
for(var r=0;r<n.length;r++)if(t.params[n[r]]!==e.params[n[r]])return!1;// If no interpolations exist, let's skip all the ceremony
if(!o.length)return a.test(e.path);var i=a.exec(e.path);if(null==i)return!1;for(var r=0;r<o.length;r++)e.params[o[r].k]=o[r].r?i[r+1]:decodeURIComponent(i[r+1]);return!0}}},{"738f895382d52b2b":"5bNaX"}],a4I0S:[function(e,t,n){// Note: this is mildly perf-sensitive.
//
// It does *not* use `delete` - dynamic `delete`s usually cause objects to bail
// out into dictionary mode and just generally cause a bunch of optimization
// issues within engines.
//
// Ideally, I would've preferred to do this, if it weren't for the optimization
// issues:
//
// ```js
// const hasOwn = require("./hasOwn")
// const magic = [
//     "key", "oninit", "oncreate", "onbeforeupdate", "onupdate",
//     "onbeforeremove", "onremove",
// ]
// module.exports = (attrs, extras) => {
//     const result = Object.assign(Object.create(null), attrs)
//     for (const key of magic) delete result[key]
//     if (extras != null) for (const key of extras) delete result[key]
//     return result
// }
// ```
var r=e("ea1ad0c0d427959"),o=RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");t.exports=function(e,t){var n={};if(null!=t)for(var a in e)r.call(e,a)&&!o.test(a)&&0>t.indexOf(a)&&(n[a]=e[a]);else for(var a in e)r.call(e,a)&&!o.test(a)&&(n[a]=e[a]);return n}},{ea1ad0c0d427959:"1qiWM"}],fepoz:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var o=e("mithril"),a=r.interopDefault(o),i=e("./ControlButtons"),l=r.interopDefault(i),s=e("./Modal"),c=r.interopDefault(s),u=e("./Keyboard"),m=r.interopDefault(u),f=e("./Row"),d=r.interopDefault(f),p=e("../Util"),h=r.interopDefault(p);class v{static #e=this.MAX_ROWS=6;constructor(){// Init components
this.keyboard=new m.default(this.setValue.bind(this)),this.controlButtons=new l.default(this.onEnter.bind(this),this.onBackspace.bind(this));let e=Number((0,a.default).route.param("id"));this.reset(Number.isInteger(e)?e:null),// Debug
window.M=this}reset(e=null){this.rows=Array(v.MAX_ROWS).fill().map(()=>new d.default),this.isFinished=!1,this.currentRowIndex=0,this.scaleNumber=null===e?(0,h.default).getRandomScaleNumber():e,this.answerScale=(0,h.default).getScaleByNumber(this.scaleNumber),this.modal=null,(0,a.default).redraw()}openModal(){// Add delay to show animation
window.setTimeout(()=>{this.modal=new c.default(this.closeModal.bind(this),this.reset.bind(this),this.answerScale.name,this.getShareable()),(0,a.default).redraw()},2500)}closeModal(){this.modal=null}onEnter(){!this.isFinished&&this.currentRow().isFilled()&&this.submitGuess()}onBackspace(){this.isFinished||this.currentRow().clearLast()}currentRow(){return this.rows[this.currentRowIndex]}getShareable(){let e=this.rows.slice(0,this.currentRowIndex),t=e.map(e=>e.compareWithAnswer(this.answerScale));return(0,h.default).resultsToShareable(t,this.scaleNumber)}submitGuess(){let e=this.currentRow().compareWithAnswer(this.answerScale);this.currentRow().displayResults(e),this.currentRowIndex++,(0,a.default).redraw(),e.every(e=>"C"===e)?(this.isFinished=!0,this.openModal()):this.currentRowIndex>=v.MAX_ROWS&&(this.isFinished=!0,this.openModal())}setValue(e){this.isFinished||(this.currentRow().setValue(e),(0,a.default).redraw())}view(){return[(0,a.default)("h1","Scale-dle"),this.modal?(0,a.default)(this.modal):null,(0,a.default)("div.grid",this.rows.map(e=>(0,a.default)(e))),(0,a.default)(this.controlButtons),(0,a.default)(this.keyboard)]}}n.default=v},{mithril:"13PaA","./ControlButtons":"9DvoC","./Modal":"hw4GM","./Keyboard":"iTjWi","./Row":"agpaG","../Util":"dMJ8U","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9DvoC":[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var o=e("mithril"),a=r.interopDefault(o);n.default=class{constructor(e,t){this.onEnter=e,this.onBackspace=t}view(){return(0,a.default)("div#control",[(0,a.default)("div.button",{onclick:this.onEnter},"enter"),(0,a.default)("div.button",{onclick:this.onBackspace},"")])}}},{mithril:"13PaA","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],k3151:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}],hw4GM:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var o=e("mithril"),a=r.interopDefault(o),i=e("../Util"),l=r.interopDefault(i);class s{constructor(e,t,n,r){this.onclose=e,this.onreset=t,this.answerScaleName=n,this.shareable=r}static #e=this.SHARE_ICON='<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="30" viewBox="0 0 30 30"> <path d="M 23 3 A 4 4 0 0 0 19 7 A 4 4 0 0 0 19.09375 7.8359375 L 10.011719 12.376953 A 4 4 0 0 0 7 11 A 4 4 0 0 0 3 15 A 4 4 0 0 0 7 19 A 4 4 0 0 0 10.013672 17.625 L 19.089844 22.164062 A 4 4 0 0 0 19 23 A 4 4 0 0 0 23 27 A 4 4 0 0 0 27 23 A 4 4 0 0 0 23 19 A 4 4 0 0 0 19.986328 20.375 L 10.910156 15.835938 A 4 4 0 0 0 11 15 A 4 4 0 0 0 10.90625 14.166016 L 19.988281 9.625 A 4 4 0 0 0 23 11 A 4 4 0 0 0 27 7 A 4 4 0 0 0 23 3 z"></path></svg>';async onshare(){await navigator.clipboard.writeText(this.shareable)}view(){return(0,a.default)("div.modal",[(0,a.default)("span.close",{onclick:this.onclose},"X"),(0,a.default)("div.content",[(0,a.default)("h1",(0,l.default).normalizeScaleName(this.answerScaleName)),(0,a.default)("div.button",{onclick:this.onshare.bind(this)},[(0,a.default)("span.share","Share"),(0,a.default).trust(s.SHARE_ICON)]),(0,a.default)("div.button",{onclick:()=>{this.onreset()}},"Next Scale-dle!")])])}}n.default=s},{mithril:"13PaA","../Util":"dMJ8U","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dMJ8U:[function(e,t,n){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(n);var r=e("tonal");class o{static #e=this.SCALE_TYPES=["major","minor","harmonic minor","melodic minor","dorian","phrygian","lydian","mixolydian","locrian","pentatonic","whole-half diminished","half-whole diminished"];static #t=this.ROOTS=["A","Bb","B","C","C#","D","Eb","E","F","F#","G","Ab"];static #n=this.BLACK_NOTES=["C#","D#","F#","G#","A#"];static #r=this.BLACK_NOTES_FLAT=["Db","Eb","Gb","Ab","Bb"];static #o=this.WHITE_NOTES=["C","D","E","F","G","A","B"];static getRandomScaleNumber(){// TODO: use the proper algorithm rather than assuming 12 roots and scale types
return Math.floor(144*Math.random())}static getScaleByNumber(e){// TODO: use the proper algorithm rather than assuming 12 roots and scale types
let t=this.ROOTS[e%12],n=this.SCALE_TYPES[Math.floor(e/12)];return(0,r.Scale).get(`${t}5 ${n}`)}// Get midi array
static toMidiArray(e){return e.map(e=>(0,r.Note).get(e).midi%12)}// Returns an array of results:
// "C": correct,
// "W": wrong spot,
// "X": does not exist
static calculateGuess(e,t){// Normalize correct to be same length as guess
let n=t.concat(t).slice(0,e.length),r={};n.forEach(e=>{e in r||(r[e]=0),r[e]++});let o=Array(e.length);return(// First pass to find correct notes
e.forEach((e,t)=>{e===n[t]&&(o[t]="C",r[e]--)}),// Second pass to figure out the other results
e.forEach((e,t)=>{"C"!==o[t]&&(r[e]?(o[t]="W",r[e]--):o[t]="X")}),o)}static #a=this.EMOJI_MAP={C:"\uD83D\uDFE9",W:"\uD83D\uDFE8",X:""};static #i=this.URL="seanyeh.github.io/scaledle";static resultsToShareable(e,t){let n=e.length,r=e.map(e=>`${e.map(e=>o.EMOJI_MAP[e]).join("")}
`).join("");return`Scale-dle #${t} ${n}/6
${r}
${o.URL}`}static normalizeScaleName(e){// Remove octave from name
let t=e.replace(/[0-9]/,"");return t.includes("half-whole diminished")?t=t.replace("half-whole diminished","octatonic (half-whole)"):t.includes("diminished")&&(t=t.replace("diminished","octatonic (whole-half)")),t}}n.default=o},{tonal:"ekC5i","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ekC5i:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"AbcNotation",()=>a.default),r.export(n,"Array",()=>i),r.export(n,"Chord",()=>s.default),r.export(n,"ChordDictionary",()=>_),r.export(n,"ChordType",()=>u.default),r.export(n,"Collection",()=>f.default),r.export(n,"Core",()=>d),r.export(n,"DurationValue",()=>h.default),r.export(n,"Interval",()=>y.default),r.export(n,"Key",()=>P.default),r.export(n,"Midi",()=>g.default),r.export(n,"Mode",()=>j.default),r.export(n,"Note",()=>w.default),r.export(n,"PcSet",()=>L),r.export(n,"Pcset",()=>S.default),r.export(n,"Progression",()=>T.default),r.export(n,"Range",()=>E.default),r.export(n,"RomanNumeral",()=>D.default),r.export(n,"Scale",()=>O.default),r.export(n,"ScaleDictionary",()=>B),r.export(n,"ScaleType",()=>R.default),r.export(n,"TimeSignature",()=>U.default),r.export(n,"Tonal",()=>z);var o=e("@tonaljs/abc-notation"),a=r.interopDefault(o),i=e("@tonaljs/array"),l=e("@tonaljs/chord"),s=r.interopDefault(l),c=e("@tonaljs/chord-type"),u=r.interopDefault(c),m=e("@tonaljs/collection"),f=r.interopDefault(m),d=e("@tonaljs/core"),p=e("@tonaljs/duration-value"),h=r.interopDefault(p),v=e("@tonaljs/interval"),y=r.interopDefault(v),M=e("@tonaljs/key"),P=r.interopDefault(M),b=e("@tonaljs/midi"),g=r.interopDefault(b),x=e("@tonaljs/mode"),j=r.interopDefault(x),A=e("@tonaljs/note"),w=r.interopDefault(A),I=e("@tonaljs/pcset"),S=r.interopDefault(I),k=e("@tonaljs/progression"),T=r.interopDefault(k),N=e("@tonaljs/range"),E=r.interopDefault(N),C=e("@tonaljs/roman-numeral"),D=r.interopDefault(C),F=e("@tonaljs/scale"),O=r.interopDefault(F),V=e("@tonaljs/scale-type"),R=r.interopDefault(V),$=e("@tonaljs/time-signature"),U=r.interopDefault($);r.exportAll(d,n);var z=d,L=S.default,_=u.default,B=R.default},{"@tonaljs/abc-notation":"6sQhe","@tonaljs/array":"3Q6Mr","@tonaljs/chord":"a8kbl","@tonaljs/chord-type":"eTgcZ","@tonaljs/collection":"1Wcp8","@tonaljs/core":"bWVEi","@tonaljs/duration-value":"cN44L","@tonaljs/interval":"4MaG0","@tonaljs/key":"eKRUz","@tonaljs/midi":"aFX9F","@tonaljs/mode":"9UAbq","@tonaljs/note":"7cXrC","@tonaljs/pcset":"YAaan","@tonaljs/progression":"awNwV","@tonaljs/range":"clvSL","@tonaljs/roman-numeral":"ajhQU","@tonaljs/scale":"gaA4q","@tonaljs/scale-type":"dBTmw","@tonaljs/time-signature":"3z6jp","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"6sQhe":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"abcToScientificNotation",()=>s),r.export(n,"default",()=>f),r.export(n,"distance",()=>m),r.export(n,"scientificToAbcNotation",()=>c),r.export(n,"tokenize",()=>l),r.export(n,"transpose",()=>u);var o=e("@tonaljs/core"),a=(e,t)=>Array(t+1).join(e),i=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function l(e){let t=i.exec(e);return t?[t[1],t[2],t[3]]:["","",""]}function s(e){let[t,n,r]=l(e);if(""===n)return"";let o=4;for(let e=0;e<r.length;e++)o+=","===r.charAt(e)?-1:1;let a="_"===t[0]?t.replace(/_/g,"b"):"^"===t[0]?t.replace(/\^/g,"#"):"";return n.charCodeAt(0)>96?n.toUpperCase()+a+(o+1):n+a+o}function c(e){let t=(0,o.note)(e);if(t.empty||!t.oct&&0!==t.oct)return"";let{letter:n,acc:r,oct:i}=t,l="b"===r[0]?r.replace(/b/g,"_"):r.replace(/#/g,"^"),s=i>4?n.toLowerCase():n,c=5===i?"":i>4?a("'",i-5):a(",",4-i);return l+s+c}function u(e,t){return c((0,o.transpose)(s(e),t))}function m(e,t){return(0,o.distance)(s(e),s(t))}var f={abcToScientificNotation:s,scientificToAbcNotation:c,tokenize:l,transpose:u,distance:m}},{"@tonaljs/core":"bWVEi","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],bWVEi:[function(e,t,n){// src/utils.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"accToAlt",()=>y),r.export(n,"altToAcc",()=>v),r.export(n,"coordToInterval",()=>E),r.export(n,"coordToNote",()=>g),r.export(n,"decode",()=>f),r.export(n,"deprecate",()=>a),r.export(n,"distance",()=>F),r.export(n,"encode",()=>u),r.export(n,"fillStr",()=>o),r.export(n,"interval",()=>k),r.export(n,"isNamed",()=>i),r.export(n,"isPitch",()=>l),r.export(n,"note",()=>M),r.export(n,"stepToLetter",()=>h),r.export(n,"tokenizeInterval",()=>I),r.export(n,"tokenizeNote",()=>b),r.export(n,"tonicIntervalsTransposer",()=>D),r.export(n,"transpose",()=>C);var o=(e,t)=>Array(Math.abs(t)+1).join(e);function a(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}// src/named.ts
function i(e){return null!==e&&"object"==typeof e&&"string"==typeof e.name}// src/pitch.ts
function l(e){return null!==e&&"object"==typeof e&&"number"==typeof e.step&&"number"==typeof e.alt}var s=[0,2,4,-1,1,3,5],c=s.map(e=>Math.floor(7*e/12));function u(e){let{step:t,alt:n,oct:r,dir:o=1}=e,a=s[t]+7*n;if(void 0===r)return[o*a];let i=r-c[t]-4*n;return[o*a,o*i]}var m=[3,0,4,1,5,2,6];function f(e){let[t,n,r]=e,o=m[function(e){let t=(e+1)%7;return t<0?7+t:t}(t)],a=Math.floor((t+1)/7);if(void 0===n)return{step:o,alt:a,dir:r};let i=n+4*a+c[o];return{step:o,alt:a,oct:i,dir:r}}// src/note.ts
var d={empty:!0,name:"",pc:"",acc:""},p=/* @__PURE__ */new Map,h=e=>"CDEFGAB".charAt(e),v=e=>e<0?o("b",-e):o("#",e),y=e=>"b"===e[0]?-e.length:e.length;function M(e){let t=JSON.stringify(e),n=p.get(t);if(n)return n;let r="string"==typeof e?function(e){let t=b(e);if(""===t[0]||""!==t[3])return d;let n=t[0],r=t[1],o=t[2],a=(n.charCodeAt(0)+3)%7,i=y(r),l=o.length?+o:void 0,s=u({step:a,alt:i,oct:l}),c=n+r+o,m=n+r,f=(j[a]+i+120)%12,p=void 0===l?x(j[a]+i,12)-1188:j[a]+i+12*(l+1),h=void 0===l?null:440*Math.pow(2,(p-69)/12);return{empty:!1,acc:r,alt:i,chroma:f,coord:s,freq:h,height:p,letter:n,midi:p>=0&&p<=127?p:null,name:c,oct:l,pc:m,step:a}}(e):l(e)?M(function(e){let{step:t,alt:n,oct:r}=e,o=h(t);if(!o)return"";let a=o+v(n);return r||0===r?a+r:a}(e)):i(e)?M(e.name):d;return p.set(t,r),r}var P=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function b(e){let t=P.exec(e);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}function g(e){return M(f(e))}var x=(e,t)=>(e%t+t)%t,j=[0,2,4,5,7,9,11],A={empty:!0,name:"",acc:""},w=RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$");function I(e){let t=w.exec(`${e}`);return null===t?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var S={};function k(e){return"string"==typeof e?S[e]||(S[e]=function(e){let t=I(e);if(""===t[0])return A;let n=+t[0],r=t[1],o=(Math.abs(n)-1)%7,a=N[o];if("M"===a&&"P"===r)return A;let i="M"===a?"majorable":"perfectable",l=""+n+r,s=n<0?-1:1,c=8===n||-8===n?n:s*(o+1),m="M"===r&&"majorable"===i||"P"===r&&"perfectable"===i?0:"m"===r&&"majorable"===i?-1:/^A+$/.test(r)?r.length:/^d+$/.test(r)?-1*("perfectable"===i?r.length:r.length+1):0,f=Math.floor((Math.abs(n)-1)/7),d=s*(T[o]+m+12*f),p=(s*(T[o]+m)%12+12)%12,h=u({step:o,alt:m,oct:f,dir:s});return{empty:!1,name:l,num:n,q:r,step:o,alt:m,dir:s,type:i,simple:c,semitones:d,chroma:p,coord:h,oct:f}}(e)):l(e)?k(function(e){let{step:t,alt:n,oct:r=0,dir:a}=e;if(!a)return"";let i=t+1+7*r,l="M"===N[t]?"majorable":"perfectable",s=(a<0?"-":"")+(0===i?t+1:i)+(0===n?"majorable"===l?"M":"P":-1===n&&"majorable"===l?"m":n>0?o("A",n):o("d","perfectable"===l?n:n+1));return s}(e)):i(e)?k(e.name):A}var T=[0,2,4,5,7,9,11],N="PMMPPMM";function E(e,t){let[n,r=0]=e,o=7*n+12*r<0,a=t||o?[-n,-r,-1]:[n,r,1];return k(f(a))}// src/distance.ts
function C(e,t){let n=M(e),r=Array.isArray(t)?t:k(t).coord;if(n.empty||!r||r.length<2)return"";let o=n.coord,a=1===o.length?[o[0]+r[0]]:[o[0]+r[0],o[1]+r[1]];return g(a).name}function D(e,t){let n=e.length;return r=>{if(!t)return"";let o=C(t,[0,Math.floor(r/n)]);return C(o,e[r<0?(n- -r%n)%n:r%n])}}function F(e,t){let n=M(e),r=M(t);if(n.empty||r.empty)return"";let o=n.coord,a=r.coord,i=a[0]-o[0],l=2===o.length&&2===a.length?a[1]-o[1]:-Math.floor(7*i/12),s=r.height===n.height&&null!==r.midi&&null!==n.midi&&n.step>r.step;return E([i,l],s).name}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"3Q6Mr":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"compact",()=>l),r.export(n,"permutations",()=>function e(t){return 0===t.length?[[]]:e(t.slice(1)).reduce((e,n)=>e.concat(t.map((e,r)=>{let o=n.slice();return o.splice(r,0,t[0]),o})),[])}),r.export(n,"range",()=>a),r.export(n,"rotate",()=>i),r.export(n,"shuffle",()=>u),r.export(n,"sortedNoteNames",()=>s),r.export(n,"sortedUniqNoteNames",()=>c);var o=e("@tonaljs/core");function a(e,t){return e<t?function(e,t){let n=[];for(;t--;n[t]=t+e);return n}(e,t-e+1):function(e,t){let n=[];for(;t--;n[t]=e-t);return n}(e,e-t+1)}function i(e,t){let n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function l(e){return e.filter(e=>0===e||e)}function s(e){let t=e.map(e=>(0,o.note)(e)).filter(e=>!e.empty);return t.sort((e,t)=>e.height-t.height).map(e=>e.name)}function c(e){return s(e).filter((e,t,n)=>0===t||e!==n[t-1])}function u(e,t=Math.random){let n,r;let o=e.length;for(;o;)n=Math.floor(t()*o--),r=e[o],e[o]=e[n],e[n]=r;return e}},{"@tonaljs/core":"bWVEi","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],a8kbl:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"chord",()=>d),r.export(n,"chordScales",()=>h),r.export(n,"default",()=>b),r.export(n,"degrees",()=>M),r.export(n,"detect",()=>o.detect),r.export(n,"extended",()=>v),r.export(n,"get",()=>m),r.export(n,"getChord",()=>f),r.export(n,"reduced",()=>y),r.export(n,"steps",()=>P),r.export(n,"tokenize",()=>u),r.export(n,"transpose",()=>p);var o=e("@tonaljs/chord-detect"),a=e("@tonaljs/chord-type"),i=e("@tonaljs/core"),l=e("@tonaljs/pcset"),s=e("@tonaljs/scale-type"),c={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function u(e){let[t,n,r,o]=(0,i.tokenizeNote)(e);return""===t?["",e]:"A"===t&&"ug"===o?["","aug"]:[t+n,r+o]}function m(e){if(""===e)return c;if(Array.isArray(e)&&2===e.length)return f(e[1],e[0]);{let[t,n]=u(e),r=f(n,t);return r.empty?f(e):r}}function f(e,t,n){let r=(0,a.get)(e),o=(0,i.note)(t||""),l=(0,i.note)(n||"");if(r.empty||t&&o.empty||n&&l.empty)return c;let s=(0,i.distance)(o.pc,l.pc),u=r.intervals.indexOf(s)+1;if(!l.empty&&!u)return c;let m=Array.from(r.intervals);for(let e=1;e<u;e++){let e=m[0][0],t=m[0][1],n=parseInt(e,10)+7;m.push(`${n}${t}`),m.shift()}let f=o.empty?[]:m.map(e=>(0,i.transpose)(o,e));e=-1!==r.aliases.indexOf(e)?e:r.aliases[0];let d=`${o.empty?"":o.pc}${e}${l.empty||u<=1?"":"/"+l.pc}`,p=`${t?o.pc+" ":""}${r.name}${u>1&&n?" over "+l.pc:""}`;return{...r,name:p,symbol:d,type:r.name,root:l.name,intervals:m,rootDegree:u,tonic:o.name,notes:f}}var d=(0,i.deprecate)("Chord.chord","Chord.get",m);function p(e,t){let[n,r]=u(e);return n?(0,i.transpose)(n,t)+r:e}function h(e){let t=m(e),n=(0,l.isSupersetOf)(t.chroma);return(0,s.all)().filter(e=>n(e.chroma)).map(e=>e.name)}function v(e){let t=m(e),n=(0,l.isSupersetOf)(t.chroma);return(0,a.all)().filter(e=>n(e.chroma)).map(e=>t.tonic+e.aliases[0])}function y(e){let t=m(e),n=(0,l.isSubsetOf)(t.chroma);return(0,a.all)().filter(e=>n(e.chroma)).map(e=>t.tonic+e.aliases[0])}function M(e){let{intervals:t,tonic:n}=m(e),r=(0,i.tonicIntervalsTransposer)(t,n);return e=>e?r(e>0?e-1:e):""}function P(e){let{intervals:t,tonic:n}=m(e);return(0,i.tonicIntervalsTransposer)(t,n)}var b={getChord:f,get:m,detect:o.detect,chordScales:h,extended:v,reduced:y,tokenize:u,transpose:p,degrees:M,steps:P,// deprecate
chord:d}},{"@tonaljs/chord-detect":"8596r","@tonaljs/chord-type":"eTgcZ","@tonaljs/core":"bWVEi","@tonaljs/pcset":"YAaan","@tonaljs/scale-type":"dBTmw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"8596r":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"default",()=>h),r.export(n,"detect",()=>s);var o=e("@tonaljs/chord-type"),a=e("@tonaljs/core"),i=e("@tonaljs/pcset"),l=e=>{let t=e.reduce((e,t)=>{let n=(0,a.note)(t).chroma;return void 0!==n&&(e[n]=e[n]||(0,a.note)(t).name),e},{});return e=>t[e]};function s(e,t={}){let n=e.map(e=>(0,a.note)(e).pc).filter(e=>e);if(0===a.note.length)return[];let r=function(e,t,n){let r=e[0],s=(0,a.note)(r).chroma,c=l(e),u=(0,i.modes)(e,!1),h=[];return u.forEach((e,a)=>{let i=n.assumePerfectFifth&&function(e){let t=parseInt(e,2);return p(t)?e:(16|t).toString(2)}(e),l=(0,o.all)().filter(t=>n.assumePerfectFifth&&function(e){let t=parseInt(e.chroma,2);return m(t)&&f(t)&&d(t)}(t)?t.chroma===i:t.chroma===e);l.forEach(e=>{let n=e.aliases[0],o=c(a),i=a!==s;i?h.push({weight:.5*t,name:`${o}${n}/${r}`}):h.push({weight:1*t,name:`${o}${n}`})})}),h}(n,1,t);return r.filter(e=>e.weight).sort((e,t)=>t.weight-e.weight).map(e=>e.name)}var c={// 3m 000100000000
// 3M 000010000000
anyThirds:384,// 5P 000000010000
perfectFifth:16,// 5d 000000100000
// 5A 000000001000
nonPerfectFifths:40,anySeventh:3},u=e=>t=>!!(t&e),m=u(c.anyThirds),f=u(c.perfectFifth),d=u(c.anySeventh),p=u(c.nonPerfectFifths),h={detect:s}},{"@tonaljs/chord-type":"eTgcZ","@tonaljs/core":"bWVEi","@tonaljs/pcset":"YAaan","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],eTgcZ:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"add",()=>y),r.export(n,"addAlias",()=>M),r.export(n,"all",()=>p),r.export(n,"chordType",()=>u),r.export(n,"default",()=>P),r.export(n,"entries",()=>h),r.export(n,"get",()=>c),r.export(n,"keys",()=>d),r.export(n,"names",()=>m),r.export(n,"removeAll",()=>v),r.export(n,"symbols",()=>f);var o=e("@tonaljs/core"),a=e("@tonaljs/pcset"),i={...a.EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]},l=[],s={};function c(e){return s[e]||i}var u=(0,o.deprecate)("ChordType.chordType","ChordType.get",c);function m(){return l.map(e=>e.name).filter(e=>e)}function f(){return l.map(e=>e.aliases[0]).filter(e=>e)}function d(){return Object.keys(s)}function p(){return l.slice()}var h=(0,o.deprecate)("ChordType.entries","ChordType.all",p);function v(){l=[],s={}}function y(e,t,n){let r=function(e){let t=t=>-1!==e.indexOf(t);return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}(e),o={...(0,a.get)(e),name:n||"",quality:r,intervals:e,aliases:t};l.push(o),o.name&&(s[o.name]=o),s[o.setNum]=o,s[o.chroma]=o,o.aliases.forEach(e=>{s[e]=o})}function M(e,t){s[t]=e}[// ==Major==
["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],// ==Minor==
// '''Normal'''
["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],// '''Diminished'''
["1P 3m 5d","diminished","dim \xb0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xb07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xf8 -7b5 h7 h"],// ==Dominant/Seventh==
// '''Normal'''
["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],// '''Altered'''
["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],// '''Suspended'''
["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],// ==Other==
["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],// ==Legacy==
["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]].forEach(([e,t,n])=>y(e.split(" "),n.split(" "),t)),l.sort((e,t)=>e.setNum-t.setNum);var P={names:m,symbols:f,get:c,all:p,add:y,removeAll:v,keys:d,// deprecated
entries:h,chordType:u}},{"@tonaljs/core":"bWVEi","@tonaljs/pcset":"YAaan","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],YAaan:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"EmptyPcset",()=>i),r.export(n,"chroma",()=>v),r.export(n,"chromaToIntervals",()=>M),r.export(n,"chromas",()=>P),r.export(n,"default",()=>S),r.export(n,"filter",()=>I),r.export(n,"get",()=>p),r.export(n,"includes",()=>w),r.export(n,"isChroma",()=>u),r.export(n,"isEqual",()=>g),r.export(n,"isNoteIncludedIn",()=>A),r.export(n,"isSubsetOf",()=>x),r.export(n,"isSupersetOf",()=>j),r.export(n,"modes",()=>b),r.export(n,"pcset",()=>h);var o=e("@tonaljs/collection"),a=e("@tonaljs/core"),i={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},l=e=>Number(e).toString(2),s=e=>parseInt(e,2),c=/^[01]{12}$/;function u(e){return c.test(e)}var m=e=>"number"==typeof e&&e>=0&&e<=4095,f=e=>e&&u(e.chroma),d={[i.chroma]:i};function p(e){let t=u(e)?e:m(e)?l(e):Array.isArray(e)?function(e){let t;if(0===e.length)return i.chroma;let n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)(t=(0,a.note)(e[r])).empty&&(t=(0,a.interval)(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}(e):f(e)?e.chroma:i.chroma;return d[t]=d[t]||function(e){let t=s(e),n=(function(e){let t=e.split("");return t.map((e,n)=>(0,o.rotate)(n,t).join(""))})(e).map(s).filter(e=>e>=2048).sort()[0],r=l(n),a=M(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:a}}(t)}var h=(0,a.deprecate)("Pcset.pcset","Pcset.get",p),v=e=>p(e).chroma,y=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function M(e){let t=[];for(let n=0;n<12;n++)"1"===e.charAt(n)&&t.push(y[n]);return t}function P(){return(0,o.range)(2048,4095).map(l)}function b(e,t=!0){let n=p(e),r=n.chroma.split("");return(0,o.compact)(r.map((e,n)=>{let a=(0,o.rotate)(n,r);return t&&"0"===a[0]?null:a.join("")}))}function g(e,t){return p(e).setNum===p(t).setNum}function x(e){let t=p(e).setNum;return e=>{let n=p(e).setNum;return t&&t!==n&&(n&t)===n}}function j(e){let t=p(e).setNum;return e=>{let n=p(e).setNum;return t&&t!==n&&(n|t)===n}}function A(e){let t=p(e);return e=>{let n=(0,a.note)(e);return t&&!n.empty&&"1"===t.chroma.charAt(n.chroma)}}var w=A;function I(e){let t=A(e);return e=>e.filter(t)}var S={get:p,chroma:v,num:e=>p(e).setNum,intervals:e=>p(e).intervals,chromas:P,isSupersetOf:j,isSubsetOf:x,isNoteIncludedIn:A,isEqual:g,filter:I,modes:b,pcset:h}},{"@tonaljs/collection":"1Wcp8","@tonaljs/core":"bWVEi","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"1Wcp8":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");function o(e,t){return e<t?function(e,t){let n=[];for(;t--;n[t]=t+e);return n}(e,t-e+1):function(e,t){let n=[];for(;t--;n[t]=e-t);return n}(e,e-t+1)}function a(e,t){let n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function i(e){return e.filter(e=>0===e||e)}function l(e,t=Math.random){let n,r;let o=e.length;for(;o;)n=Math.floor(t()*o--),r=e[o],e[o]=e[n],e[n]=r;return e}function s(e){return 0===e.length?[[]]:s(e.slice(1)).reduce((t,n)=>t.concat(e.map((t,r)=>{let o=n.slice();return o.splice(r,0,e[0]),o})),[])}r.defineInteropFlag(n),r.export(n,"compact",()=>i),r.export(n,"default",()=>c),r.export(n,"permutations",()=>s),r.export(n,"range",()=>o),r.export(n,"rotate",()=>a),r.export(n,"shuffle",()=>l);var c={compact:i,permutations:s,range:o,rotate:a,shuffle:l}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],dBTmw:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"NoScaleType",()=>i),r.export(n,"add",()=>v),r.export(n,"addAlias",()=>y),r.export(n,"all",()=>f),r.export(n,"default",()=>M),r.export(n,"entries",()=>d),r.export(n,"get",()=>u),r.export(n,"keys",()=>p),r.export(n,"names",()=>c),r.export(n,"removeAll",()=>h),r.export(n,"scaleType",()=>m);var o=e("@tonaljs/core"),a=e("@tonaljs/pcset"),i={...a.EmptyPcset,intervals:[],aliases:[]},l=[],s={};function c(){return l.map(e=>e.name)}function u(e){return s[e]||i}var m=(0,o.deprecate)("ScaleDictionary.scaleType","ScaleType.get",u);function f(){return l.slice()}var d=(0,o.deprecate)("ScaleDictionary.entries","ScaleType.all",f);function p(){return Object.keys(s)}function h(){l=[],s={}}function v(e,t,n=[]){let r={...(0,a.get)(e),name:t,intervals:e,aliases:n};return l.push(r),s[r.name]=r,s[r.setNum]=r,s[r.chroma]=r,r.aliases.forEach(e=>{s[e]=r}),r}function y(e,t){s[t]=e}[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]].forEach(([e,t,...n])=>v(e.split(" "),t,n));var M={names:c,get:u,all:f,add:v,removeAll:h,keys:p,entries:d,scaleType:m}},{"@tonaljs/core":"bWVEi","@tonaljs/pcset":"YAaan","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],cN44L:[function(e,t,n){// data.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"default",()=>f),r.export(n,"fraction",()=>m),r.export(n,"get",()=>c),r.export(n,"names",()=>i),r.export(n,"shorthands",()=>l),r.export(n,"value",()=>u);// index.ts
var o=[];[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]].forEach(([e,t,n])=>{o.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:t,names:n})});var a={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function i(){return o.reduce((e,t)=>(t.names.forEach(t=>e.push(t)),e),[])}function l(){return o.map(e=>e.shorthand)}var s=/^([^.]+)(\.*)$/;function c(e){let[t,n,r]=s.exec(e)||[],i=o.find(e=>e.shorthand===n||e.names.includes(n));if(!i)return a;let l=function(e,t){let n=Math.pow(2,t),r=e[0]*n,o=e[1]*n,a=r;for(let e=0;e<t;e++)r+=a/Math.pow(2,e+1);for(;r%2==0&&o%2==0;)r/=2,o/=2;return[r,o]}(i.fraction,r.length),c=l[0]/l[1];return{...i,name:e,dots:r,value:c,fraction:l}}var u=e=>c(e).value,m=e=>c(e).fraction,f={names:i,shorthands:l,get:c,value:u,fraction:m}},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"4MaG0":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"add",()=>y),r.export(n,"addTo",()=>M),r.export(n,"default",()=>g),r.export(n,"distance",()=>v),r.export(n,"fromSemitones",()=>h),r.export(n,"get",()=>i),r.export(n,"invert",()=>f),r.export(n,"name",()=>l),r.export(n,"names",()=>a),r.export(n,"num",()=>u),r.export(n,"quality",()=>c),r.export(n,"semitones",()=>s),r.export(n,"simplify",()=>m),r.export(n,"substract",()=>P),r.export(n,"transposeFifths",()=>b);var o=e("@tonaljs/core");function a(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var i=o.interval,l=e=>(0,o.interval)(e).name,s=e=>(0,o.interval)(e).semitones,c=e=>(0,o.interval)(e).q,u=e=>(0,o.interval)(e).num;function m(e){let t=(0,o.interval)(e);return t.empty?"":t.simple+t.q}function f(e){let t=(0,o.interval)(e);if(t.empty)return"";let n=(7-t.step)%7,r="perfectable"===t.type?-t.alt:-(t.alt+1);return(0,o.interval)({step:n,alt:r,oct:t.oct,dir:t.dir}).name}var d=[1,2,2,3,3,4,5,5,6,6,7,7],p="P m M m M P d P m M m M".split(" ");function h(e){let t=Math.abs(e),n=t%12;return(e<0?-1:1)*(d[n]+7*Math.floor(t/12))+p[n]}var v=o.distance,y=x((e,t)=>[e[0]+t[0],e[1]+t[1]]),M=e=>t=>y(e,t),P=x((e,t)=>[e[0]-t[0],e[1]-t[1]]);function b(e,t){let n=i(e);if(n.empty)return"";let[r,a,l]=n.coord;return(0,o.coordToInterval)([r+t,a,l]).name}var g={names:a,get:i,name:l,num:u,semitones:s,quality:c,fromSemitones:h,distance:v,invert:f,simplify:m,add:y,addTo:M,substract:P,transposeFifths:b};function x(e){return(t,n)=>{let r=(0,o.interval)(t).coord,a=(0,o.interval)(n).coord;if(r&&a){let t=e(r,a);return(0,o.coordToInterval)(t).name}}}},{"@tonaljs/core":"bWVEi","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],eKRUz:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"default",()=>x),r.export(n,"majorKey",()=>P),r.export(n,"majorTonicFromKeySignature",()=>g),r.export(n,"minorKey",()=>b);var o=e("@tonaljs/core"),a=e("@tonaljs/note"),i=e("@tonaljs/roman-numeral"),l=Object.freeze([]),s={type:"major",tonic:"",alteration:0,keySignature:""},c={tonic:"",grades:l,intervals:l,scale:l,triads:l,chords:l,chordsHarmonicFunction:l,chordScales:l},u={...s,...c,type:"major",minorRelative:"",scale:l,secondaryDominants:l,secondaryDominantsMinorRelative:l,substituteDominants:l,substituteDominantsMinorRelative:l},m={...s,type:"minor",relativeMajor:"",natural:c,harmonic:c,melodic:c},f=(e,t,n="")=>t.map((t,r)=>`${e[r]}${n}${t}`);function d(e,t,n,r,a){return l=>{let s=e.map(e=>(0,i.get)(e).interval||""),c=s.map(e=>(0,o.transpose)(l,e));return{tonic:l,grades:e,intervals:s,scale:c,triads:f(c,t),chords:f(c,n),chordsHarmonicFunction:r.slice(),chordScales:f(c,a," ")}}}var p=(e,t)=>{let n=(0,o.note)(e),r=(0,o.note)(t);return n.empty||r.empty?0:r.coord[0]-n.coord[0]},h=d("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),v=d("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),y=d("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),M=d("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function P(e){let t=(0,o.note)(e).pc;if(!t)return u;let n=h(t),r=p("C",t),a=t=>{let n=(0,i.get)(t);return n.empty?"":(0,o.transpose)(e,n.interval)+n.chordType};return{...n,type:"major",minorRelative:(0,o.transpose)(t,"-3m"),alteration:r,keySignature:(0,o.altToAcc)(r),secondaryDominants:"- VI7 VII7 I7 II7 III7 -".split(" ").map(a),secondaryDominantsMinorRelative:"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ").map(a),substituteDominants:"- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ").map(a),substituteDominantsMinorRelative:"- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" ").map(a)}}function b(e){let t=(0,o.note)(e).pc;if(!t)return m;let n=p("C",t)-3;return{type:"minor",tonic:t,relativeMajor:(0,o.transpose)(t,"3m"),alteration:n,keySignature:(0,o.altToAcc)(n),natural:v(t),harmonic:y(t),melodic:M(t)}}function g(e){return"number"==typeof e?(0,a.transposeFifths)("C",e):"string"==typeof e&&/^b+|#+$/.test(e)?(0,a.transposeFifths)("C",(0,o.accToAlt)(e)):null}var x={majorKey:P,majorTonicFromKeySignature:g,minorKey:b}},{"@tonaljs/core":"bWVEi","@tonaljs/note":"7cXrC","@tonaljs/roman-numeral":"ajhQU","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"7cXrC":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"accidentals",()=>d),r.export(n,"ascending",()=>E),r.export(n,"chroma",()=>y),r.export(n,"default",()=>R),r.export(n,"descending",()=>C),r.export(n,"enharmonic",()=>V),r.export(n,"freq",()=>v),r.export(n,"fromFreq",()=>P),r.export(n,"fromFreqSharps",()=>b),r.export(n,"fromMidi",()=>M),r.export(n,"fromMidiSharps",()=>g),r.export(n,"get",()=>u),r.export(n,"midi",()=>h),r.export(n,"name",()=>m),r.export(n,"names",()=>c),r.export(n,"octave",()=>p),r.export(n,"pitchClass",()=>f),r.export(n,"simplify",()=>O),r.export(n,"sortedNames",()=>D),r.export(n,"sortedUniqNames",()=>F),r.export(n,"tr",()=>j),r.export(n,"trBy",()=>w),r.export(n,"trFifths",()=>T),r.export(n,"trFrom",()=>S),r.export(n,"transpose",()=>x),r.export(n,"transposeBy",()=>A),r.export(n,"transposeFifths",()=>k),r.export(n,"transposeFrom",()=>I),r.export(n,"transposeOctaves",()=>N);var o=e("@tonaljs/core"),a=e("@tonaljs/midi"),i=["C","D","E","F","G","A","B"],l=e=>e.name,s=e=>e.map(o.note).filter(e=>!e.empty);function c(e){return void 0===e?i.slice():Array.isArray(e)?s(e).map(l):[]}var u=o.note,m=e=>u(e).name,f=e=>u(e).pc,d=e=>u(e).acc,p=e=>u(e).oct,h=e=>u(e).midi,v=e=>u(e).freq,y=e=>u(e).chroma;function M(e){return(0,a.midiToNoteName)(e)}function P(e){return(0,a.midiToNoteName)((0,a.freqToMidi)(e))}function b(e){return(0,a.midiToNoteName)((0,a.freqToMidi)(e),{sharps:!0})}function g(e){return(0,a.midiToNoteName)(e,{sharps:!0})}var x=o.transpose,j=o.transpose,A=e=>t=>x(t,e),w=A,I=e=>t=>x(e,t),S=I;function k(e,t){return x(e,[t,0])}var T=k;function N(e,t){return x(e,[0,t])}var E=(e,t)=>e.height-t.height,C=(e,t)=>t.height-e.height;function D(e,t){return t=t||E,s(e).sort(t).map(l)}function F(e){return D(e,E).filter((e,t,n)=>0===t||e!==n[t-1])}var O=e=>{let t=u(e);return t.empty?"":(0,a.midiToNoteName)(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:null===t.midi})};function V(e,t){let n=u(e);if(n.empty)return"";let r=u(t||(0,a.midiToNoteName)(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(void 0===n.oct)return r.pc;let o=n.chroma-n.alt,i=r.chroma-r.alt,l=n.oct+(o>11||i<0?-1:o<0||i>11?1:0);return r.pc+l}var R={names:c,get:u,name:m,pitchClass:f,accidentals:d,octave:p,midi:h,ascending:E,descending:C,sortedNames:D,sortedUniqNames:F,fromMidi:M,fromMidiSharps:g,freq:v,fromFreq:P,fromFreqSharps:b,chroma:y,transpose:x,tr:j,transposeBy:A,trBy:w,transposeFrom:I,trFrom:S,transposeFifths:k,transposeOctaves:N,trFifths:T,simplify:O,enharmonic:V}},{"@tonaljs/core":"bWVEi","@tonaljs/midi":"aFX9F","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],aFX9F:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"chroma",()=>p),r.export(n,"default",()=>P),r.export(n,"freqToMidi",()=>u),r.export(n,"isMidi",()=>a),r.export(n,"midiToFreq",()=>l),r.export(n,"midiToNoteName",()=>d),r.export(n,"pcset",()=>h),r.export(n,"pcsetDegrees",()=>M),r.export(n,"pcsetNearest",()=>v),r.export(n,"pcsetSteps",()=>y),r.export(n,"toMidi",()=>i);var o=e("@tonaljs/core");function a(e){return+e>=0&&127>=+e}function i(e){if(a(e))return+e;let t=(0,o.note)(e);return t.empty?null:t.midi}function l(e,t=440){return Math.pow(2,(e-69)/12)*t}var s=Math.log(2),c=Math.log(440);function u(e){return Math.round(100*(12*(Math.log(e)-c)/s+69))/100}var m="C C# D D# E F F# G G# A A# B".split(" "),f="C Db D Eb E F Gb G Ab A Bb B".split(" ");function d(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);let n=!0===t.sharps?m:f,r=n[e%12];if(t.pitchClass)return r;let o=Math.floor(e/12)-1;return r+o}function p(e){return e%12}function h(e){return Array.isArray(e)?e.map(p).sort((e,t)=>e-t).filter((e,t,n)=>0===t||e!==n[t-1]):e.split("").reduce((e,t,n)=>(n<12&&"1"===t&&e.push(n),e),[])}function v(e){let t=h(e);return e=>{let n=p(e);for(let r=0;r<12;r++){if(t.includes(n+r))return e+r;if(t.includes(n-r))return e-r}}}function y(e,t){let n=h(e),r=n.length;return e=>n[e<0?(r- -e%r)%r:e%r]+12*Math.floor(e/r)+t}function M(e,t){let n=y(e,t);return e=>{if(0!==e)return n(e>0?e-1:e)}}var P={chroma:p,freqToMidi:u,isMidi:a,midiToFreq:l,midiToNoteName:d,pcsetNearest:v,pcset:h,pcsetDegrees:M,pcsetSteps:y,toMidi:i}},{"@tonaljs/core":"bWVEi","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],ajhQU:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"default",()=>h),r.export(n,"get",()=>l),r.export(n,"names",()=>c),r.export(n,"tokenize",()=>m);var o=e("@tonaljs/core"),a={empty:!0,name:"",chordType:""},i={};function l(e){return"string"==typeof e?i[e]||(i[e]=function(e){let[t,n,r,i]=m(e);if(!r)return a;let l=r.toUpperCase(),s=d.indexOf(l),c=(0,o.accToAlt)(n);return{empty:!1,name:t,roman:r,interval:(0,o.interval)({step:s,alt:c,dir:1}).name,acc:n,chordType:i,alt:c,step:s,major:r===l,oct:0,dir:1}}(e)):"number"==typeof e?l(d[e]||""):(0,o.isPitch)(e)?l((0,o.altToAcc)(e.alt)+d[e.step]):(0,o.isNamed)(e)?l(e.name):a}var s=(0,o.deprecate)("RomanNumeral.romanNumeral","RomanNumeral.get",l);function c(e=!0){return(e?d:p).slice()}var u=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function m(e){return u.exec(e)||["","","",""]}var f="I II III IV V VI VII",d=f.split(" "),p=f.toLowerCase().split(" "),h={names:c,get:l,romanNumeral:s}},{"@tonaljs/core":"bWVEi","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"9UAbq":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"all",()=>h),r.export(n,"default",()=>A),r.export(n,"distance",()=>x),r.export(n,"entries",()=>v),r.export(n,"get",()=>d),r.export(n,"mode",()=>p),r.export(n,"names",()=>y),r.export(n,"notes",()=>M),r.export(n,"relativeTonic",()=>j),r.export(n,"seventhChords",()=>g),r.export(n,"triads",()=>b);var o=e("@tonaljs/collection"),a=e("@tonaljs/core"),i=e("@tonaljs/interval"),l=e("@tonaljs/pcset"),s=e("@tonaljs/scale-type"),c=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],u={...l.EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},m=c.map(function(e){let[t,n,r,o,a,i,l]=e,c=Number(n).toString(2),u=(0,s.get)(o).intervals;return{empty:!1,intervals:u,modeNum:t,chroma:c,normalized:c,name:o,setNum:n,alt:r,triad:a,seventh:i,aliases:l?[l]:[]}}),f={};function d(e){return"string"==typeof e?f[e.toLowerCase()]||u:e&&e.name?d(e.name):u}m.forEach(e=>{f[e.name]=e,e.aliases.forEach(t=>{f[t]=e})});var p=(0,a.deprecate)("Mode.mode","Mode.get",d);function h(){return m.slice()}var v=(0,a.deprecate)("Mode.mode","Mode.all",h);function y(){return m.map(e=>e.name)}function M(e,t){return d(e).intervals.map(e=>(0,a.transpose)(t,e))}function P(e){return(t,n)=>{let r=d(t);if(r.empty)return[];let i=(0,o.rotate)(r.modeNum,e),l=r.intervals.map(e=>(0,a.transpose)(n,e));return i.map((e,t)=>l[t]+e)}}var b=P(c.map(e=>e[4])),g=P(c.map(e=>e[5]));function x(e,t){let n=d(t),r=d(e);return n.empty||r.empty?"":(0,i.simplify)((0,i.transposeFifths)("1P",r.alt-n.alt))}function j(e,t,n){return(0,a.transpose)(n,x(e,t))}var A={get:d,names:y,all:h,distance:x,relativeTonic:j,notes:M,triads:b,seventhChords:g,entries:v,mode:p}},{"@tonaljs/collection":"1Wcp8","@tonaljs/core":"bWVEi","@tonaljs/interval":"4MaG0","@tonaljs/pcset":"YAaan","@tonaljs/scale-type":"dBTmw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],awNwV:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"default",()=>c),r.export(n,"fromRomanNumerals",()=>l),r.export(n,"toRomanNumerals",()=>s);var o=e("@tonaljs/chord"),a=e("@tonaljs/core"),i=e("@tonaljs/roman-numeral");function l(e,t){let n=t.map(i.get);return n.map(t=>(0,a.transpose)(e,(0,a.interval)(t))+t.chordType)}function s(e,t){return t.map(t=>{let[n,r]=(0,o.tokenize)(t),l=(0,a.distance)(e,n),s=(0,i.get)((0,a.interval)(l));return s.name+r})}var c={fromRomanNumerals:l,toRomanNumerals:s}},{"@tonaljs/chord":"a8kbl","@tonaljs/core":"bWVEi","@tonaljs/roman-numeral":"ajhQU","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],clvSL:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"chromatic",()=>l),r.export(n,"default",()=>s),r.export(n,"numeric",()=>i);var o=e("@tonaljs/collection"),a=e("@tonaljs/midi");function i(e){let t=(0,o.compact)(e.map(e=>"number"==typeof e?e:(0,a.toMidi)(e)));return e.length&&t.length===e.length?t.reduce((e,t)=>{let n=e[e.length-1];return e.concat((0,o.range)(n,t).slice(1))},[t[0]]):[]}function l(e,t){return i(e).map(e=>(0,a.midiToNoteName)(e,t))}var s={numeric:i,chromatic:l}},{"@tonaljs/collection":"1Wcp8","@tonaljs/midi":"aFX9F","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],gaA4q:[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"default",()=>A),r.export(n,"degrees",()=>x),r.export(n,"detect",()=>h),r.export(n,"extended",()=>y),r.export(n,"get",()=>d),r.export(n,"modeNames",()=>b),r.export(n,"names",()=>f),r.export(n,"rangeOf",()=>g),r.export(n,"reduced",()=>M),r.export(n,"scale",()=>p),r.export(n,"scaleChords",()=>v),r.export(n,"scaleNotes",()=>P),r.export(n,"steps",()=>j),r.export(n,"tokenize",()=>m);var o=e("@tonaljs/chord-type"),a=e("@tonaljs/collection"),i=e("@tonaljs/core"),l=e("@tonaljs/note"),s=e("@tonaljs/pcset"),c=e("@tonaljs/scale-type"),u={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function m(e){if("string"!=typeof e)return["",""];let t=e.indexOf(" "),n=(0,i.note)(e.substring(0,t));if(n.empty){let t=(0,i.note)(e);return t.empty?["",e]:[t.name,""]}let r=e.substring(n.name.length+1);return[n.name,r.length?r:""]}var f=c.names;function d(e){let t=Array.isArray(e)?e:m(e),n=(0,i.note)(t[0]).name,r=(0,c.get)(t[1]);if(r.empty)return u;let o=r.name,a=n?r.intervals.map(e=>(0,i.transpose)(n,e)):[],l=n?n+" "+o:o;return{...r,name:l,type:o,tonic:n,notes:a}}var p=(0,i.deprecate)("Scale.scale","Scale.get",d);function h(e,t={}){let n=(0,s.chroma)(e),r=(0,i.note)(t.tonic??e[0]??""),o=r.chroma;if(void 0===o)return[];let l=n.split("");l[o]="1";let u=(0,a.rotate)(o,l).join(""),m=(0,c.all)().find(e=>e.chroma===u),f=[];return m&&f.push(r.name+" "+m.name),"exact"===t.match||y(u).forEach(e=>{f.push(r.name+" "+e)}),f}function v(e){let t=d(e),n=(0,s.isSubsetOf)(t.chroma);return(0,o.all)().filter(e=>n(e.chroma)).map(e=>e.aliases[0])}function y(e){let t=(0,s.isChroma)(e)?e:d(e).chroma,n=(0,s.isSupersetOf)(t);return(0,c.all)().filter(e=>n(e.chroma)).map(e=>e.name)}function M(e){let t=(0,s.isSubsetOf)(d(e).chroma);return(0,c.all)().filter(e=>t(e.chroma)).map(e=>e.name)}function P(e){let t=e.map(e=>(0,i.note)(e).pc).filter(e=>e),n=t[0],r=(0,l.sortedUniqNames)(t);return(0,a.rotate)(r.indexOf(n),r)}function b(e){let t=d(e);if(t.empty)return[];let n=t.tonic?t.notes:t.intervals;return(0,s.modes)(t.chroma).map((e,t)=>{let r=d(e).name;return r?[n[t],r]:["",""]}).filter(e=>e[0])}function g(e){let t=function(e){let t=Array.isArray(e)?P(e):d(e).notes,n=t.map(e=>(0,i.note)(e).chroma);return e=>{let r="number"==typeof e?(0,i.note)((0,l.fromMidi)(e)):(0,i.note)(e),o=r.height;if(void 0===o)return;let a=n.indexOf(o%12);if(-1!==a)return(0,l.enharmonic)(r.name,t[a])}}(e);return(e,n)=>{let r=(0,i.note)(e).height,o=(0,i.note)(n).height;return void 0===r||void 0===o?[]:(0,a.range)(r,o).map(t).filter(e=>e)}}function x(e){let{intervals:t,tonic:n}=d(e),r=(0,i.tonicIntervalsTransposer)(t,n);return e=>e?r(e>0?e-1:e):""}function j(e){let{intervals:t,tonic:n}=d(e);return(0,i.tonicIntervalsTransposer)(t,n)}var A={degrees:x,detect:h,extended:y,get:d,modeNames:b,names:f,rangeOf:g,reduced:M,scaleChords:v,scaleNotes:P,steps:j,tokenize:m,// deprecated
scale:p}},{"@tonaljs/chord-type":"eTgcZ","@tonaljs/collection":"1Wcp8","@tonaljs/core":"bWVEi","@tonaljs/note":"7cXrC","@tonaljs/pcset":"YAaan","@tonaljs/scale-type":"dBTmw","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],"3z6jp":[function(e,t,n){// index.ts
var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n),r.export(n,"default",()=>m),r.export(n,"get",()=>c),r.export(n,"names",()=>i),r.export(n,"parse",()=>u);var o={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},a=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function i(){return a.slice()}var l=/^(\d*\d(?:\+\d)*)\/(\d+)$/,s=/* @__PURE__ */new Map;function c(e){let t=JSON.stringify(e),n=s.get(t);if(n)return n;let r=function([e,t]){let n=Array.isArray(e)?e.reduce((e,t)=>e+t,0):e;if(0===n||0===t)return o;let r=Array.isArray(e)?`${e.join("+")}/${t}`:`${e}/${t}`,a=Array.isArray(e)?e:[],i=4===t||2===t?"simple":8===t&&n%3==0?"compound":f(t)?"irregular":"irrational";return{empty:!1,name:r,type:i,upper:n,lower:t,additive:a}}(u(e));return s.set(t,r),r}function u(e){if("string"==typeof e){let[t,n,r]=l.exec(e)||[];return u([n,r])}let[t,n]=e,r=+n;if("number"==typeof t)return[t,r];let o=t.split("+").map(e=>+e);return 1===o.length?[o[0],r]:[o,r]}var m={names:i,parse:u,get:c},f=e=>Math.log(e)/Math.log(2)%1==0},{"@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],iTjWi:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var o=e("mithril"),a=r.interopDefault(o),i=e("../Util"),l=r.interopDefault(i);n.default=class{constructor(e){this.callback=e}initShapes(e){let t=e.canvas.clientWidth,n=e.canvas.clientHeight,r=t/7;this.blackKeys=[2/3,1+2/3,3+2/3,4+2/3,5+2/3].map(e=>[e*r,0,2/3*r,n/2]),this.whiteKeys=Array(7).fill().map((e,t)=>[t*r,0,r,n])}_inBounds(e,t,n,r,o,a){return e>=n&&t>=r&&e<=n+o&&t<=r+a}onclick(e){let t=e.offsetX,n=e.offsetY,r=this.blackKeys.findIndex(([e,r,o,a])=>this._inBounds(t,n,e,r,o,a));return -1!==r?this.callback(l.default.BLACK_NOTES[r]):-1!==(r=this.whiteKeys.findIndex(([e,r,o,a])=>this._inBounds(t,n,e,r,o,a)))?this.callback(l.default.WHITE_NOTES[r]):void 0}drawKeyboard(e){this.initShapes(e),e.fillStyle="white",e.textAlign="center",e.fillRect(0,0,e.canvas.clientWidth,e.canvas.clientHeight),// Draw white keys (only right edge)
e.fillStyle="black",this.whiteKeys.forEach(([t,n,r,o],a)=>{// Draw right edge
e.beginPath(),e.moveTo(t+r,0),e.lineTo(t+r,n+o),e.stroke(),// Draw letter
e.font="24px sans-serif",e.fillText(l.default.WHITE_NOTES[a],t+r/2,o-30)}),// Draw black keys
this.blackKeys.forEach(([t,n,r,o],a)=>{e.fillStyle="black",e.fillRect(t,n,r,o),// Draw letter
e.fillStyle="white",e.font="16px sans-serif",e.fillText(l.default.BLACK_NOTES[a],t+r/2,30),e.fillText(l.default.BLACK_NOTES_FLAT[a],t+r/2,60)})}view(){return(0,a.default)("div#canvas-wrapper",[(0,a.default)("canvas[width=400][height=180]",{oncreate:e=>{let t=e.dom.getContext("2d");this.drawKeyboard(t),e.dom.addEventListener("click",this.onclick.bind(this))}})])}}},{mithril:"13PaA","../Util":"dMJ8U","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}],agpaG:[function(e,t,n){var r=e("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(n);var o=e("mithril"),a=r.interopDefault(o),i=e("tonal"),l=e("../Util"),s=r.interopDefault(l);n.default=class{constructor(){this.cells=Array(7).fill().map((e,t)=>new c(t))}compareWithAnswer(e){let t=(0,s.default).toMidiArray(e.notes),n=(0,s.default).toMidiArray(this.getNotes());return(0,s.default).calculateGuess(n,t)}getNotes(){let e=this.cells.map(e=>(0,i.Note).get(`${e.value}5`));return e}setValue(e){let t=this.nextEmptyCell();t&&t.setValue(e)}displayResults(e){this.cells.forEach((t,n)=>t.setStatus(e[n]))}clearLast(){let e=this.lastCell();e&&e.setValue(null)}getNextCellIndex(){for(let e=0;e<this.cells.length;e++)if(this.cells[e].isEmpty())return e;return -1}// Returns last filled cell
lastCell(){let e=this.getNextCellIndex();return -1===e?this.cells[this.cells.length-1]:0!==e?this.cells[e-1]:void 0}nextEmptyCell(){let e=this.getNextCellIndex();return -1===e?null:this.cells[e]}isFilled(){return!this.nextEmptyCell()}view(){return(0,a.default)("div.row",this.cells.map(e=>(0,a.default)(e)))}};class c{static #e=this.STATUS_CLASSES={C:"correct",W:"wrong-position",X:"wrong"," ":"none"};constructor(e){this.column=e,this.value=null,this.status=" ",this.flipped=!1}setValue(e){this.value=e}setStatus(e){this.status=e,this.flipped=!0}isEmpty(){return null===this.value}view(){return(0,a.default)("div.cell",[(0,a.default)(`div.delay${this.column}`,{class:this.flipped?"inner-flipped":"inner"},[(0,a.default)("div.front",this.value),(0,a.default)("div.back",{class:c.STATUS_CLASSES[this.status]},this.value)])])}}},{mithril:"13PaA",tonal:"ekC5i","../Util":"dMJ8U","@parcel/transformer-js/src/esmodule-helpers.js":"k3151"}]},["bn6ru"],"bn6ru","parcelRequire94c2")//# sourceMappingURL=index.eed82073.js.map
;
//# sourceMappingURL=index.eed82073.js.map
